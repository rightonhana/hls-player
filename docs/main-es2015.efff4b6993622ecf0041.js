(self.webpackChunkvideo_player=self.webpackChunkvideo_player||[]).push([[179],{8255:function(t){function e(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=function(){return[]},e.resolve=e,e.id=8255,t.exports=e},2738:function(t){var e;"undefined"!=typeof window&&(e=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,(function(e){return t[e]}).bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function s(){}function a(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,r,n,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new a(r,n||t,s),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),u.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},u.prototype.listeners=function(t){var e=this._events[i?i+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var r=0,n=e.length,s=new Array(n);r<n;r++)s[r]=e[r].fn;return s},u.prototype.listenerCount=function(t){var e=this._events[i?i+t:t];return e?e.fn?1:e.length:0},u.prototype.emit=function(t,e,r,n,s,a){var o=i?i+t:t;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,n),!0;case 5:return c.fn.call(c.context,e,r,n,s),!0;case 6:return c.fn.call(c.context,e,r,n,s,a),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,r);break;case 4:c[u].fn.call(c[u].context,e,r,n);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return l(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||l(this,s);else{for(var o=0,u=[],c=a.length;o<c;o++)(a[o].fn!==e||n&&!a[o].once||r&&a[o].context!==r)&&u.push(a[o]);u.length?this._events[s]=1===u.length?u[0]:u:l(this,s)}return this},u.prototype.removeAllListeners=function(t){var e;return t?this._events[e=i?i+t:t]&&l(this,e):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,t.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":function(t,e,r){var n,i,s,a,o;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,i=/^([^\/?#]*)(.*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,t.exports=o={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var n=o.parseURL(t);if(!n)throw new Error("Error trying to parse base URL.");return n.path=o.normalizePath(n.path),o.buildURLFromParts(n)}var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return r.alwaysNormalize?(s.path=o.normalizePath(s.path),o.buildURLFromParts(s)):e;var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=i.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(u.netLoc=a.netLoc,"/"!==s.path[0]))if(s.path){var c=a.path,d=c.substring(0,c.lastIndexOf("/")+1)+s.path;u.path=o.normalizePath(d)}else u.path=a.path,s.params||(u.params=a.params,s.query||(u.query=a.query));return null===u.path&&(u.path=r.alwaysNormalize?o.normalizePath(s.path):s.path),o.buildURLFromParts(u)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(s,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}}},"./node_modules/webworkify-webpack/index.js":function(t,e,r){function n(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var n=r(r.s=ENTRY_MODULE);return n.default||n}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(t,e,n){var s={};s[n]=[];var a=e.toString(),o=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return s;for(var l,u=o[1],c=new RegExp("(\\\\n|\\W)"+i(u)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=c.exec(a);)"dll-reference"!==l[3]&&s[n].push(l[3]);for(c=new RegExp("\\("+i(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=c.exec(a);)t[l[2]]||(s[n].push(l[1]),t[l[2]]=r(l[1]).m),s[l[2]]=s[l[2]]||[],s[l[2]].push(l[4]);for(var d=Object.keys(s),h=0;h<d.length;h++)for(var f=0;f<s[d[h]].length;f++)isNaN(1*s[d[h]][f])||(s[d[h]][f]=1*s[d[h]][f]);return s}function a(t){return Object.keys(t).reduce(function(e,r){return e||t[r].length>0},!1)}t.exports=function(t,e){var i={main:r.m},o=(e=e||{}).all?{main:Object.keys(i.main)}:function(t,e){for(var r={main:[e]},n={main:[]},i={main:{}};a(r);)for(var o=Object.keys(r),l=0;l<o.length;l++){var u=o[l],c=r[u].pop();if(i[u]=i[u]||{},!i[u][c]&&t[u][c]){i[u][c]=!0,n[u]=n[u]||[],n[u].push(c);for(var d=s(t,t[u][c],u),h=Object.keys(d),f=0;f<h.length;f++)r[h[f]]=r[h[f]]||[],r[h[f]]=r[h[f]].concat(d[h[f]])}}return n}(i,t),l="";Object.keys(o).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;o[t][e];)e++;o[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+t+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o[t].map(function(e){return JSON.stringify(e)+": "+i[t][e].toString()}).join(",")+"});\n"}),l=l+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.main.map(function(t){return JSON.stringify(t)+": "+i.main[t].toString()}).join(",")+"}))(self);";var u=new window.Blob([l],{type:"text/javascript"});if(e.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(c);return d.objectURL=c,d}},"./src/crypt/decrypter.js":function(t,e,r){"use strict";r.r(e);var n=function(){function t(t,e){this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),i=function(){function t(t,e){this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),s=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),n=0;n<4;n++)r[n]=e.getUint32(4*n);return r},e.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,n=r[0],i=r[1],s=r[2],a=r[3],o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;t[f]=m=m>>>8^255&m^99,e[m]=f;var v=h[f],y=h[v],_=h[y],b=257*h[m]^16843008*m;n[f]=b<<24|b>>>8,i[f]=b<<16|b>>>16,s[f]=b<<8|b>>>24,a[f]=b,l[m]=(b=16843009*_^65537*y^257*v^16843008*f)<<24|b>>>8,u[m]=b<<16|b>>>16,c[m]=b<<8|b>>>24,d[m]=b,f?(f=v^h[h[h[_^v]]],p^=h[h[p]]):f=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,n=0;n<e.length&&r;)r=e[n]===this.key[n],n++;if(!r){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var s,a,o,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(s=0;s<u;s++)s<i?o=c[s]=e[s]:(l=o,s%i==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[s/i|0]<<24):i>6&&s%i==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[s]=o=(c[s-i]^l)>>>0);for(a=0;a<u;a++)s=u-a,l=3&a?c[s]:c[s-4],d[a]=a<4||s<=4?l:g[h[l>>>24]]^m[h[l>>>16&255]]^v[h[l>>>8&255]]^y[h[255&l]],d[a]=d[a]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,r,n){for(var i,s,a,o,l,u,c,d,h,f,p,g,m,v,y,_,b,w=this.keySize+6,E=this.invKeySchedule,S=this.invSBox,T=this.invSubMix,k=T[0],x=T[1],C=T[2],A=T[3],R=this.uint8ArrayToUint32Array_(r),D=R[0],I=R[1],O=R[2],L=R[3],P=new Int32Array(t),M=new Int32Array(P.length),F=this.networkToHostOrderSwap;e<P.length;){for(h=F(P[e]),f=F(P[e+1]),p=F(P[e+2]),g=F(P[e+3]),l=h^E[0],u=g^E[1],c=p^E[2],d=f^E[3],m=4,v=1;v<w;v++)s=k[u>>>24]^x[c>>16&255]^C[d>>8&255]^A[255&l]^E[m+1],a=k[c>>>24]^x[d>>16&255]^C[l>>8&255]^A[255&u]^E[m+2],o=k[d>>>24]^x[l>>16&255]^C[u>>8&255]^A[255&c]^E[m+3],l=i=k[l>>>24]^x[u>>16&255]^C[c>>8&255]^A[255&d]^E[m],u=s,c=a,d=o,m+=4;i=S[l>>>24]<<24^S[u>>16&255]<<16^S[c>>8&255]<<8^S[255&d]^E[m],s=S[u>>>24]<<24^S[c>>16&255]<<16^S[d>>8&255]<<8^S[255&l]^E[m+1],a=S[c>>>24]<<24^S[d>>16&255]<<16^S[l>>8&255]<<8^S[255&u]^E[m+2],o=S[d>>>24]<<24^S[l>>16&255]<<16^S[u>>8&255]<<8^S[255&c]^E[m+3],m+=3,M[e]=F(i^D),M[e+1]=F(o^I),M[e+2]=F(a^O),M[e+3]=F(s^L),D=h,I=f,O=p,L=g,e+=4}return n?(b=(_=(y=M.buffer).byteLength)&&new DataView(y).getUint8(_-1))?y.slice(0,_-b):y:M.buffer},e.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),a=r("./src/errors.ts"),o=r("./src/utils/logger.js"),l=r("./src/events.js"),u=r("./src/utils/get-self-scope.js"),c=Object(u.getSelfScope)();e.default=function(){function t(t,e,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=i,i)try{var s=c.crypto;s&&(this.subtle=s.subtle||s.webkitSubtle)}catch(a){}this.disableWebCrypto=!this.subtle}var e=t.prototype;return e.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.decrypt=function(t,e,r,a){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(o.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new s),u.expandKey(e),a(u.decrypt(t,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(o.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new i(c,e)),this.fastAesKey.expandKey().then(function(i){new n(c,r).decrypt(t,i).catch(function(n){l.onWebCryptoError(n,t,e,r,a)}).then(function(t){a(t)})}).catch(function(n){l.onWebCryptoError(n,t,e,r,a)})}},e.onWebCryptoError=function(t,e,r,n,i){this.config.enableSoftwareAES?(o.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,r,n,i)):(o.logger.error("decrypting error : "+t.message),this.observer.trigger(l.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},e.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}()},"./src/demux/demuxer-inline.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/events.js"),i=r("./src/errors.ts"),s=r("./src/crypt/decrypter.js"),a=r("./src/polyfills/number.js"),o=r("./src/utils/logger.js"),l=r("./src/utils/get-self-scope.js");function u(t,e){return 255===t[e]&&240==(246&t[e+1])}function c(t,e){return 1&t[e+1]?7:9}function d(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function h(t,e){return!!(e+1<t.length&&u(t,e))}function f(t,e){if(h(t,e)){var r=c(t,e);if(e+r>=t.length)return!1;var n=d(t,e);if(n<=r)return!1;var i=e+n;if(i===t.length||i+1<t.length&&u(t,i))return!0}return!1}function p(t,e,r,s,a){if(!t.samplerate){var l=function(t,e,r,s){var a,l,u,c,d,h=navigator.userAgent.toLowerCase(),f=s,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(a=1+((192&e[r+2])>>>6),!((l=(60&e[r+2])>>>2)>p.length-1))return c=(1&e[r+2])<<2,o.logger.log("manifest codec:"+s+",ADTS data:type:"+a+",sampleingIndex:"+l+"["+p[l]+"Hz],channelConfig:"+(c|=(192&e[r+3])>>>6)),/firefox/i.test(h)?l>=6?(a=5,d=new Array(4),u=l-3):(a=2,d=new Array(2),u=l):-1!==h.indexOf("android")?(a=2,d=new Array(2),u=l):(a=5,d=new Array(4),s&&(-1!==s.indexOf("mp4a.40.29")||-1!==s.indexOf("mp4a.40.5"))||!s&&l>=6?u=l-3:((s&&-1!==s.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(h))||!s&&1===c)&&(a=2,d=new Array(2)),u=l)),d[0]=a<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===a&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[l],channelCount:c,codec:"mp4a.40."+a,manifestCodec:f};t.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}(e,r,s,a);t.config=l.config,t.samplerate=l.samplerate,t.channelCount=l.channelCount,t.codec=l.codec,t.manifestCodec=l.manifestCodec,o.logger.log("parsed codec:"+t.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function g(t){return 9216e4/t}function m(t,e,r,n,i){var s=function(t,e,r,n,i){var s,a,o=t.length;if(s=c(t,e),a=d(t,e),(a-=s)>0&&e+s+a<=o)return{headerLength:s,frameLength:a,stamp:r+n*i}}(e,r,n,i,g(t.samplerate));if(s){var a=s.stamp,o=s.headerLength,l=s.frameLength,u={unit:e.subarray(r+o,r+o+l),pts:a,dts:a};return t.samples.push(u),{sample:u,length:l+o}}}var v=r("./src/demux/id3.js"),y=function(){function t(t,e,r){this.observer=t,this.config=r,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(v.default.getID3Data(t,0)||[]).length,r=t.length;e<r;e++)if(f(t,e))return o.logger.log("ADTS sync word found !"),!0;return!1},e.append=function(t,e,r,n){for(var i=this._audioTrack,s=v.default.getID3Data(t,0)||[],l=v.default.getTimeStamp(s),u=Object(a.isFiniteNumber)(l)?90*l:9e4*e,c=0,d=u,f=t.length,g=s.length,y=[{pts:d,dts:d,data:s}];g<f-1;)if(h(t,g)&&g+5<f){p(i,this.observer,t,g,i.manifestCodec);var _=m(i,t,g,u,c);if(!_){o.logger.log("Unable to parse AAC frame");break}g+=_.length,d=_.sample.pts,c++}else v.default.isHeader(t,g)?(s=v.default.getID3Data(t,g),y.push({pts:d,dts:d,data:s}),g+=s.length):g++;this.remuxer.remux(i,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},e,r,n)},e.destroy=function(){},t}(),_=r("./src/demux/mp4demuxer.js"),b={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,r,n,i){if(!(r+24>e.length)){var s=this.parseHeader(e,r);if(s&&r+s.frameLength<=e.length){var a=n+i*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:e.subarray(r,r+s.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(o),{sample:o,length:s.frameLength}}}},parseHeader:function(t,e){var r=t[e+1]>>3&3,n=t[e+1]>>1&3,i=t[e+2]>>4&15,s=t[e+2]>>2&3;if(1!==r&&0!==i&&15!==i&&3!==s){var a=b.SamplingRateMap[3*(3===r?0:2===r?1:2)+s],o=b.SamplesCoefficients[r][n],l=b.BytesInSlot[n],u=8*o*l;return{sampleRate:a,channelCount:t[e+3]>>6==3?1:2,frameLength:parseInt(o*(1e3*b.BitratesMap[14*(3===r?3-n:3===n?3:4)+i-1])/a+(t[e+2]>>1&1),10)*l,samplesPerFrame:u}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var r=this.parseHeader(t,e),n=4;r&&r.frameLength&&(n=r.frameLength);var i=e+n;if(i===t.length||i+1<t.length&&this.isHeaderPattern(t,i))return!0}return!1}},w=b,E=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,n=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");n.set(t.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&o.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){var e,r=8,n=8;for(e=0;e<t;e++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},e.readSPS=function(){var t,e,r,n,i,s,a,o=0,l=0,u=0,c=0,d=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),t=d(),h(5),g(3),d(),v(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var _=f();if(3===_&&g(1),v(),v(),g(1),p())for(s=3!==_?8:12,a=0;a<s;a++)p()&&y(a<6?16:64)}v();var b=f();if(0===b)f();else if(1===b)for(g(1),m(),m(),e=f(),a=0;a<e;a++)m();v(),g(1),r=f(),n=f(),0===(i=h(1))&&g(1),g(1),p()&&(o=f(),l=f(),u=f(),c=f());var w=[1,1];if(p()&&p())switch(d()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(r+1)-2*o-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(u+c),pixelRatio:w}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),S=function(){function t(t,e,r,n){this.decryptdata=r,this.discardEPB=n,this.decrypter=new s.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},e.decryptAacSample=function(t,e,r,n){var i=t[e].unit,s=i.subarray(16,i.length-i.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length),o=this;this.decryptBuffer(a,function(s){s=new Uint8Array(s),i.set(s,16),n||o.decryptAacSamples(t,e+1,r)})},e.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,n),!n)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),n=0,i=32;i<=t.length-16;i+=160,n+=16)r.set(t.subarray(i,i+16),n);return r},e.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var r=0,n=32;n<=t.length-16;n+=160,r+=16)t.set(e.subarray(r,r+16),n);return t},e.decryptAvcSample=function(t,e,r,n,i,s){var a=this.discardEPB(i.data),o=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(o.buffer,function(o){i.data=l.getAvcDecryptedUnit(a,o),s||l.decryptAvcSamples(t,e,r+1,n)})},e.decryptAvcSamples=function(t,e,r,n){for(;;e++,r=0){if(e>=t.length)return void n();for(var i=t[e].units;!(r>=i.length);r++){var s=i[r];if(!(s.length<=48||1!==s.type&&5!==s.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,n,s,a),!a)return}}}},t}(),T={video:1,audio:2,id3:3,text:4},k=function(){function t(t,e,r,n){this.observer=t,this.config=r,this.typeSupported=n,this.remuxer=e,this.sampleAes=null,this.pmtUnknownTypes={}}var e=t.prototype;return e.setDecryptData=function(t){this.sampleAes=null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?new S(this.observer,this.config,t,this.discardEPB):null},t.probe=function(e){var r=t._syncOffset(e);return!(r<0||(r&&o.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:T[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},e.resetInitSegment=function(e,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},e.resetTimeStamp=function(){},e.append=function(e,r,s,a){var l,u,c,d,h,f=e.length,p=!1;this.pmtUnknownTypes={},this.contiguous=s;var g=this.pmtParsed,m=this._avcTrack,v=this._audioTrack,y=this._id3Track,_=m.pid,b=v.pid,w=y.pid,E=this._pmtId,S=m.pesData,T=v.pesData,k=y.pesData,x=this._parsePAT,C=this._parsePMT.bind(this),A=this._parsePES,R=this._parseAVCPES.bind(this),D=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),L=t._syncOffset(e);for(f-=(f+L)%188,l=L;l<f;l+=188)if(71===e[l]){if(u=!!(64&e[l+1]),c=((31&e[l+1])<<8)+e[l+2],(48&e[l+3])>>4>1){if((d=l+5+e[l+4])===l+188)continue}else d=l+4;switch(c){case _:u&&(S&&(h=A(S))&&R(h,!1),S={data:[],size:0}),S&&(S.data.push(e.subarray(d,l+188)),S.size+=l+188-d);break;case b:u&&(T&&(h=A(T))&&(v.isAAC?D(h):I(h)),T={data:[],size:0}),T&&(T.data.push(e.subarray(d,l+188)),T.size+=l+188-d);break;case w:u&&(k&&(h=A(k))&&O(h),k={data:[],size:0}),k&&(k.data.push(e.subarray(d,l+188)),k.size+=l+188-d);break;case 0:u&&(d+=e[d]+1),E=this._pmtId=x(e,d);break;case E:u&&(d+=e[d]+1);var P=C(e,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(_=P.avc)>0&&(m.pid=_),(b=P.audio)>0&&(v.pid=b,v.isAAC=P.isAAC),(w=P.id3)>0&&(y.pid=w),p&&!g&&(o.logger.log("reparse from beginning"),p=!1,l=L-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(h=A(S))?(R(h,!0),m.pesData=null):m.pesData=S,T&&(h=A(T))?(v.isAAC?D(h):I(h),v.pesData=null):(T&&T.size&&o.logger.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=T),k&&(h=A(k))?(O(h),y.pesData=null):y.pesData=k,null==this.sampleAes?this.remuxer.remux(v,m,y,this._txtTrack,r,s,a):this.decryptAndRemux(v,m,y,this._txtTrack,r,s,a)},e.decryptAndRemux=function(t,e,r,n,i,s,a){if(t.samples&&t.isAAC){var o=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){o.decryptAndRemuxAvc(t,e,r,n,i,s,a)})}else this.decryptAndRemuxAvc(t,e,r,n,i,s,a)},e.decryptAndRemuxAvc=function(t,e,r,n,i,s,a){if(e.samples){var o=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){o.remuxer.remux(t,e,r,n,i,s,a)})}else this.remuxer.remux(t,e,r,n,i,s,a)},e.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},e._trackUnknownPmt=function(t,e,r){var n=this.pmtUnknownTypes[t]||0;return 0===n&&(this.pmtUnknownTypes[t]=0,e.call(o.logger,r)),this.pmtUnknownTypes[t]++,n},e._parsePMT=function(t,e,r,n){var i,s,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<i;){switch(s=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!n){this._trackUnknownPmt(t[e],o.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===a.audio&&(a.audio=s);break;case 21:-1===a.id3&&(a.id3=s);break;case 219:if(!n){this._trackUnknownPmt(t[e],o.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===a.avc&&(a.avc=s);break;case 3:case 4:r?-1===a.audio&&(a.audio=s,a.isAAC=!1):this._trackUnknownPmt(t[e],o.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(t[e],o.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(t[e],o.logger.log,"Unknown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return a},e._parsePES=function(t){var e,r,n,i,s,a,l,u,c=0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var h=new Uint8Array(d[0].length+d[1].length);h.set(d[0]),h.set(d[1],d[0].length),d[0]=h,d.splice(1,1)}if(1===((e=d[0])[0]<<16)+(e[1]<<8)+e[2]){if((n=(e[4]<<8)+e[5])&&n>t.size-6)return null;if(192&(r=e[7])&&((a=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2)>4294967295&&(a-=8589934592),64&r?((l=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>4294967295&&(l-=8589934592),a-l>54e5&&(o.logger.warn(Math.round((a-l)/9e4)+"s delta between PTS and DTS, align them"),a=l)):l=a),t.size<=(u=(i=e[8])+9))return null;t.size-=u,s=new Uint8Array(t.size);for(var f=0,p=d.length;f<p;f++){var g=(e=d[f]).byteLength;if(u){if(u>g){u-=g;continue}e=e.subarray(u),g-=u,u=0}s.set(e,c),c+=g}return n&&(n-=i+3),{data:s,pts:a,dts:l,len:n}}return null},e.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var r=e.samples,n=r.length;if(isNaN(t.pts)){if(!n)return void e.dropped++;var i=r[n-1];t.pts=i.pts,t.dts=i.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(n||this.contiguous)?(t.id=n,r.push(t)):e.dropped++}t.debug.length&&o.logger.log(t.pts+"/"+t.dts+":"+t.debug)},e._parseAVCPES=function(t,e){var r,n,i,s=this,a=this._avcTrack,o=this._parseAVCNALu(t.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(t,e,r,n){return{key:t,pts:e,dts:r,units:[],debug:n}};t.data=null,l&&o.length&&!a.audFound&&(c(l,a),l=this.avcSample=d(!1,t.pts,t.dts,"")),o.forEach(function(e){switch(e.type){case 1:n=!0,l||(l=s.avcSample=d(!0,t.pts,t.dts,"")),l.frame=!0;var o=e.data;if(u&&o.length>4){var h=new E(o).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=s.avcSample=d(!0,t.pts,t.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,(r=new E(s.discardEPB(e.data))).readUByte();for(var f=0,p=0,g=!1,m=0;!g&&r.bytesAvailable>1;){f=0;do{f+=m=r.readUByte()}while(255===m);p=0;do{p+=m=r.readUByte()}while(255===m);if(4===f&&0!==r.bytesAvailable){if(g=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var y=r.readUByte(),_=31&y,b=[y,r.readUByte()];for(i=0;i<_;i++)b.push(r.readUByte()),b.push(r.readUByte()),b.push(r.readUByte());s._insertSampleInOrder(s._txtTrack.samples,{type:3,pts:t.pts,bytes:b})}}else if(5===f&&0!==r.bytesAvailable){if(g=!0,p>16){var w=[];for(i=0;i<16;i++)w.push(r.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||w.push("-");var S=p-16,T=new Uint8Array(S);for(i=0;i<S;i++)T[i]=r.readUByte();s._insertSampleInOrder(s._txtTrack.samples,{pts:t.pts,payloadType:f,uuid:w.join(""),userDataBytes:T,userData:Object(v.utf8ArrayToStr)(T.buffer)})}}else if(p<r.bytesAvailable)for(i=0;i<p;i++)r.readUByte()}break;case 7:if(n=!0,u=!0,!a.sps){var k=(r=new E(e.data)).readSPS();a.width=k.width,a.height=k.height,a.pixelRatio=k.pixelRatio,a.sps=[e.data],a.duration=s._duration;var x=e.data.subarray(1,4),C="avc1.";for(i=0;i<3;i++){var A=x[i].toString(16);A.length<2&&(A="0"+A),C+=A}a.codec=C}break;case 8:n=!0,a.pps||(a.pps=[e.data]);break;case 9:n=!1,a.audFound=!0,l&&c(l,a),l=s.avcSample=d(!1,t.pts,t.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+e.type+" ")}l&&n&&l.units.push(e)}),e&&l&&(c(l,a),this.avcSample=null)},e._insertSampleInOrder=function(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var n=r-1;n>=0;n--)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)},e._getLastNalUnit=function(){var t,e=this.avcSample;if(!e||0===e.units.length){var r=this._avcTrack.samples;e=r[r.length-1]}if(e){var n=e.units;t=n[n.length-1]}return t},e._parseAVCNALu=function(t){var e,r,n,i,s=0,a=t.byteLength,o=this._avcTrack,l=o.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,i=31&t[0],l=0,s=1);s<a;)if(e=t[s++],l)if(1!==l)if(e)if(1===e){if(d>=0)n={data:t.subarray(d,s-l-1),type:i},c.push(n);else{var h=this._getLastNalUnit();if(h&&(u&&s<=4-u&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-u)),(r=s-l-1)>0)){var f=new Uint8Array(h.data.byteLength+r);f.set(h.data,0),f.set(t.subarray(0,r),h.data.byteLength),h.data=f}}s<a?(d=s,i=31&t[s],l=0):l=-1}else l=0;else l=3;else l=e?0:2;else l=e?0:1;if(d>=0&&l>=0&&(n={data:t.subarray(d,a),type:i,state:l},c.push(n)),0===c.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+t.byteLength);g.set(p.data,0),g.set(t,p.data.byteLength),p.data=g}}return o.naluState=l,c},e.discardEPB=function(t){for(var e,r,n=t.byteLength,i=[],s=1;s<n-2;)0===t[s]&&0===t[s+1]&&3===t[s+2]?(i.push(s+2),s+=2):s++;if(0===i.length)return t;e=n-i.length,r=new Uint8Array(e);var a=0;for(s=0;s<e;a++,s++)a===i[0]&&(a++,i.shift()),r[s]=t[a];return r},e._parseAACPES=function(t){var e,r,s,a,l,u,c,d=this._audioTrack,f=t.data,v=t.pts,y=this.aacOverFlow,_=this.aacLastPTS;if(y){var b=new Uint8Array(y.byteLength+f.byteLength);b.set(y,0),b.set(f,y.byteLength),f=b}for(s=0,l=f.length;s<l-1&&!h(f,s);s++);if(!s||(s<l-1?(u="AAC PES did not start with ADTS header,offset:"+s,c=!1):(u="no ADTS header found in AAC PES",c=!0),o.logger.warn("parsing error:"+u),this.observer.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:u}),!c)){if(p(d,this.observer,f,s,this.audioCodec),r=0,e=g(d.samplerate),y&&_){var w=_+e;Math.abs(w-v)>1&&(o.logger.log("AAC: align PTS for overlapping frames by "+Math.round((w-v)/90)),v=w)}for(;s<l;){if(h(f,s)){if(s+5<l){var E=m(d,f,s,v,r);if(E){s+=E.length,a=E.sample.pts,r++;continue}}break}s++}y=s<l?f.subarray(s,l):null,this.aacOverFlow=y,this.aacLastPTS=a}},e._parseMPEGPES=function(t){for(var e=t.data,r=e.length,n=0,i=0,s=t.pts;i<r;)if(w.isHeader(e,i)){var a=w.appendFrame(this._audioTrack,e,i,s,n);if(!a)break;i+=a.length,n++}else i++},e._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),x=function(){function t(t,e,r){this.observer=t,this.config=r,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){var e,r,n=v.default.getID3Data(t,0);if(n&&void 0!==v.default.getTimeStamp(n))for(e=n.length,r=Math.min(t.length-1,e+100);e<r;e++)if(w.probe(t,e))return o.logger.log("MPEG Audio sync word found !"),!0;return!1},e.append=function(t,e,r,n){for(var i=v.default.getID3Data(t,0),s=v.default.getTimeStamp(i),a=void 0!==s?90*s:9e4*e,o=i.length,l=t.length,u=0,c=0,d=this._audioTrack,h=[{pts:a,dts:a,data:i}];o<l;)if(w.isHeader(t,o)){var f=w.appendFrame(d,t,o,a,u);if(!f)break;o+=f.length,c=f.sample.pts,u++}else v.default.isHeader(t,o)?(i=v.default.getID3Data(t,o),h.push({pts:c,dts:c,data:i}),o+=i.length):o++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,r,n)},e.destroy=function(){},t}(),C=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),A=Math.pow(2,32)-1,R=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=s,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,l,a,o),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,s=i;i--;)n+=r[i].byteLength;for((e=new Uint8Array(n))[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=255&n,e.set(t,4),i=0,n=8;i<s;i++)e.set(r[i],n),n+=r[i].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var n=Math.floor(r/(A+1)),i=Math.floor(r%(A+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return t.box(t.types.minf,"audio"===e.type?t.box(t.types.smhd,t.SMHD):t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,r))},t.moov=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(n))},t.mvhd=function(e,r){r*=e;var n=Math.floor(r/(A+1)),i=Math.floor(r%(A+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,s)},t.sdtp=function(e){var r,n,i=e.samples||[],s=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)s[n+4]=(r=i[n].flags).dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.box(t.types.sdtp,s)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,n,i,s=[],a=[];for(r=0;r<e.sps.length;r++)s.push((i=(n=e.sps[r]).byteLength)>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(n));for(r=0;r<e.pps.length;r++)a.push((i=(n=e.pps[r]).byteLength)>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));var o=t.box(t.types.avcC,new Uint8Array([1,s[3],s[4],s[5],255,224|e.sps.length].concat(s).concat([e.pps.length]).concat(a))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return t.box(t.types.stsd,t.STSD,"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.mp4a(e):t.mp3(e):t.avc1(e))},t.tkhd=function(e){var r=e.id,n=e.duration*e.timescale,i=e.width,s=e.height,a=Math.floor(n/(A+1)),o=Math.floor(n%(A+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,s>>8&255,255&s,0,0]))},t.traf=function(e,r){var n=t.sdtp(e),i=e.id,s=Math.floor(r/(A+1)),a=Math.floor(r%(A+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a])),t.trun(e,n.length+16+20+8+16+8+8),n)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var n,i,s,a,o,l,u=e.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(h.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,(r+=8+d)>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)h.set([(s=(i=u[n]).duration)>>>24&255,s>>>16&255,s>>>8&255,255&s,(a=i.size)>>>24&255,a>>>16&255,a>>>8&255,255&a,(o=i.flags).isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,(l=i.cts)>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var r,n=t.moov(e);return(r=new Uint8Array(t.FTYP.byteLength+n.byteLength)).set(t.FTYP),r.set(n,t.FTYP.byteLength),r},t}();function D(t,e,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var i=t*e*r;return n?Math.round(i):i}function I(t,e){return void 0===e&&(e=!1),D(t,1e3,1/9e4,e)}function O(t,e){return void 0===e&&(e=1),D(t,9e4,1/e)}var L=O(10),P=O(.2);function M(t,e){var r;if(void 0===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}var F,N=function(){function t(t,e,r,n){this.observer=t,this.config=e,this.typeSupported=r,this.ISGenerated=!1}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},e.resetInitSegment=function(){this.ISGenerated=!1},e.remux=function(t,e,r,i,s,a,l){if(this.ISGenerated||this.generateIS(t,e,s),this.ISGenerated){var u=t.samples.length,c=e.samples.length,d=s,h=s;if(u&&c){var f=e.samples.reduce(function(t,e){return Math.min(t,e.pts)},e.samples[0].pts),p=(t.samples[0].pts-f)/e.inputTimeScale;d+=Math.max(0,p),h+=Math.max(0,-p)}if(u){t.timescale||(o.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,s));var g,m=this.remuxAudio(t,d,a,l);c&&(m&&(g=m.endPTS-m.startPTS),e.timescale||(o.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,s)),this.remuxVideo(e,h,a,g))}else if(c){var v=this.remuxVideo(e,h,a,0,l);v&&t.codec&&this.remuxEmptyAudio(t,d,a,v)}}r.samples.length&&this.remuxID3(r,s),i.samples.length&&this.remuxText(i,s),this.observer.trigger(n.default.FRAG_PARSED)},e.generateIS=function(t,e,r){var s,a,l=this.observer,u=t.samples,c=e.samples,d=this.typeSupported,h="audio/mp4",f={},p={tracks:f},g=void 0===this._initPTS;if(g&&(s=a=1/0),t.config&&u.length&&(t.timescale=t.samplerate,o.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(d.mpeg?(h="audio/mpeg",t.codec=""):d.mp3&&(t.codec="mp3")),f.audio={container:h,codec:t.codec,initSegment:!t.isAAC&&d.mpeg?new Uint8Array:R.initSegment([t]),metadata:{channelCount:t.channelCount}},g&&(s=a=u[0].pts-Math.round(t.inputTimeScale*r))),e.sps&&e.pps&&c.length){var m=e.inputTimeScale;if(e.timescale=m,f.video={container:"video/mp4",codec:e.codec,initSegment:R.initSegment([e]),metadata:{width:e.width,height:e.height}},g){var v=c.reduce(function(t,e){return Math.min(t,e.pts)},c[0].pts),y=Math.round(m*r);a=Math.min(a,c[0].dts-y),s=Math.min(s,v-y),this.observer.trigger(n.default.INIT_PTS_FOUND,{initPTS:s})}}else g&&f.audio&&this.observer.trigger(n.default.INIT_PTS_FOUND,{initPTS:s});Object.keys(f).length?(l.trigger(n.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=s,this._initDTS=a)):l.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.remuxVideo=function(t,e,r,s){var a,l,u,c,d,h=t.timescale,f=t.samples,p=[],g=f.length,m=this._initPTS,v=8,y=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,b=0,w=!1,E=this.nextAvcDts;if(0!==g){r||(E=e*h-(f[0].pts-f[0].dts));for(var S=0;S<g;S++){var T=f[S];T.dts>T.pts&&(b=Math.max(Math.min(b,T.pts-T.dts),-1*P)),T.dts<f[S>0?S-1:S].dts&&(w=!0),T.pts=M(T.pts-m,E),T.dts=M(T.dts-m,E)}w&&f.sort(function(t,e){return t.dts-e.dts||t.pts-e.pts||t.id-e.id}),c=f[0].dts,d=f[g-1].dts;var k=Math.round((d-c)/(g-1));if(b<0){if(b<-2*k){o.logger.warn("PTS < DTS detected in video samples, offsetting DTS to PTS "+I(-k,!0)+" ms");for(var x=0;x<g;x++)f[x].dts=f[x].pts-k}else{o.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+I(b,!0)+" ms to overcome this issue");for(var C=0;C<g;C++)f[C].dts=f[C].dts+b}c=f[0].dts,d=f[g-1].dts}if(r){var A=c-E,D=A>k;if(D||A<-1){o.logger.warn(D?"AVC: "+I(A,!0)+" ms ("+A+"dts) hole between fragments detected, filling it":"AVC: "+I(-A,!0)+" ms ("+A+"dts) overlapping between fragments detected");var O=f[0].pts-A;f[0].dts=c=E,f[0].pts=O,o.logger.log("Video: First PTS/DTS adjusted: "+I(O,!0)+"/"+I(c,!0)+", delta: "+I(A,!0)+" ms")}}for(var L=0,F=0,N=0;N<g;N++){for(var U=f[N],B=U.units,j=B.length,V=0,G=0;G<j;G++)V+=B[G].data.length;F+=V,L+=j,U.length=V,U.dts=Math.max(U.dts,c),U.pts=Math.max(U.pts,U.dts,0),y=Math.min(U.pts,y),_=Math.max(U.pts,_)}var H=F+4*L+8;try{l=new Uint8Array(H)}catch(lt){return void this.observer.trigger(n.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:H,reason:"fail allocating video mdat "+H})}var K=new DataView(l.buffer);K.setUint32(0,H),l.set(R.types.mdat,4);for(var $=0;$<g;$++){for(var z,q=f[$],W=q.units,Y=0,X=0,Z=W.length;X<Z;X++){var Q=W[X],J=Q.data,tt=Q.data.byteLength;K.setUint32(v,tt),l.set(J,v+=4),v+=tt,Y+=4+tt}if($<g-1)a=f[$+1].dts-q.dts;else{var et=this.config,rt=q.dts-f[$>0?$-1:$].dts;if(et.stretchShortVideoTrack){var nt=Math.floor(et.maxBufferHole*h),it=(s?y+s*h:this.nextAudioPts)-q.pts;it>nt?((a=it-rt)<0&&(a=rt),o.logger.log("It is approximately "+I(it,!1)+" ms to the next segment; using duration "+I(a,!1)+" ms for the last video frame.")):a=rt}else a=rt}z=Math.round(q.pts-q.dts),p.push({size:Y,duration:a,cts:z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:q.key?2:1,isNonSync:q.key?0:1}})}this.nextAvcDts=d+a;var st=t.dropped;if(t.nbNalu=0,t.dropped=0,p.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var at=p[0].flags;at.dependsOn=2,at.isNonSync=0}t.samples=p,u=R.moof(t.sequenceNumber++,c,t),t.samples=[];var ot={data1:u,data2:l,startPTS:y/h,endPTS:(_+a)/h,startDTS:c/h,endDTS:this.nextAvcDts/h,type:"video",hasAudio:!1,hasVideo:!0,nb:p.length,dropped:st};return this.observer.trigger(n.default.FRAG_PARSING_DATA,ot),ot}},e.remuxAudio=function(t,e,r,s){var a,l,u,c,d,h,f=t.inputTimeScale,p=f/t.timescale,g=(t.isAAC?1024:1152)*p,m=this._initPTS,v=!t.isAAC&&this.typeSupported.mpeg,y=v?0:8,_=t.samples,b=[],w=this.nextAudioPts;if(r|=_.length&&w&&(s&&Math.abs(e-w/f)<.1||Math.abs(_[0].pts-w-m)<20*g),_.forEach(function(t){t.pts=t.dts=M(t.pts-m,e*f)}),0!==(_=_.filter(function(t){return t.pts>=0})).length){if(r||(w=s?Math.max(0,e*f):_[0].pts),t.isAAC)for(var E=this.config.maxAudioFramesDrift,S=0,T=w;S<_.length;){var k=_[S],x=k.pts,A=x-T;if(A<=-E*g)r?(o.logger.warn("Dropping 1 audio frame @ "+I(T,!0)/1e3+"s due to "+I(A,!0)+" ms overlap."),_.splice(S,1)):(o.logger.warn("Audio frame @ "+I(x,!0)/1e3+"s overlaps nextAudioPts by "+I(A,!0)+" ms."),T=x+g,S++);else if(A>=E*g&&A<L&&T){var D=Math.round(A/g);o.logger.warn("Injecting "+D+" audio frames @ "+I(T,!0)/1e3+"s due to "+I(A,!0)+" ms gap.");for(var O=0;O<D;O++){var P=Math.max(T,0);(l=C.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=k.unit.subarray()),_.splice(S,0,{unit:l,pts:P,dts:P}),T+=g,S++}k.pts=k.dts=T,T+=g,S++}else Math.abs(A),k.pts=k.dts=T,T+=g,S++}for(var F=_.length,N=0;F--;)N+=_[F].unit.byteLength;for(var U=0,B=_.length;U<B;U++){var j=_[U],V=j.unit,G=j.pts;if(void 0!==h&&a)a.duration=Math.round((G-h)/p);else{var H=G-w,K=0;if(r&&t.isAAC&&H){if(H>0&&H<L)K=Math.round((G-w)/g),o.logger.log(I(H,!0)+" ms hole between AAC samples detected,filling it"),K>0&&((l=C.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(l=V.subarray()),N+=K*l.length);else if(H<-12){o.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+I(w,!0)+" ms / "+I(G,!0)+" ms / "+I(-H,!0)+" ms"),N-=V.byteLength;continue}G=w}if(d=G,!(N>0))return;N+=y;try{u=new Uint8Array(N)}catch(Z){return void this.observer.trigger(n.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating audio mdat "+N})}v||(new DataView(u.buffer).setUint32(0,N),u.set(R.types.mdat,4));for(var $=0;$<K;$++)(l=C.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(o.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=V.subarray()),u.set(l,y),y+=l.byteLength,b.push(a={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}})}u.set(V,y);var z=V.byteLength;y+=z,b.push(a={size:z,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),h=G}var q=0;if((F=b.length)>=2&&(a.duration=q=b[F-2].duration),F){this.nextAudioPts=w=h+p*q,t.samples=b,c=v?new Uint8Array:R.moof(t.sequenceNumber++,d/p,t),t.samples=[];var W=d/f,Y=w/f,X={data1:c,data2:u,startPTS:W,endPTS:Y,startDTS:W,endDTS:Y,type:"audio",hasAudio:!0,hasVideo:!1,nb:F};return this.observer.trigger(n.default.FRAG_PARSING_DATA,X),X}return null}},e.remuxEmptyAudio=function(t,e,r,n){var i=t.inputTimeScale,s=this.nextAudioPts,a=(void 0!==s?s:n.startDTS*i)+this._initDTS,l=i/(t.samplerate?t.samplerate:i)*1024,u=Math.ceil((n.endDTS*i+this._initDTS-a)/l),c=C.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(o.logger.warn("remux empty Audio"),c){for(var d=[],h=0;h<u;h++){var f=a+h*l;d.push({unit:c,pts:f,dts:f})}t.samples=d,this.remuxAudio(t,e,r)}else o.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.remuxID3=function(t){var e=t.samples.length;if(e){for(var r=t.inputTimeScale,i=this._initPTS,s=this._initDTS,a=0;a<e;a++){var o=t.samples[a];o.pts=(o.pts-i)/r,o.dts=(o.dts-s)/r}this.observer.trigger(n.default.FRAG_PARSING_METADATA,{samples:t.samples}),t.samples=[]}},e.remuxText=function(t){t.samples.sort(function(t,e){return t.pts-e.pts});var e,r=t.samples.length,i=t.inputTimeScale,s=this._initPTS;if(r){for(var a=0;a<r;a++)(e=t.samples[a]).pts=(e.pts-s)/i;this.observer.trigger(n.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},t}(),U=function(){function t(t){this.observer=t}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.remux=function(t,e,r,i,s,a,o,l){var u=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),u.trigger(n.default.FRAG_PARSING_DATA,{data1:l,startPTS:s,startDTS:s,type:c,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),u.trigger(n.default.FRAG_PARSED)},t}(),B=Object(l.getSelfScope)();try{F=B.performance.now.bind(B.performance)}catch(j){o.logger.debug("Unable to use Performance API on this environment"),F=B.Date.now}e.default=function(){function t(t,e,r,n){this.observer=t,this.typeSupported=e,this.config=r,this.vendor=n}var e=t.prototype;return e.destroy=function(){var t=this.demuxer;t&&t.destroy()},e.push=function(t,e,r,i,a,o,l,u,c,d,h,f){var p=this;if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var g=this.decrypter;null==g&&(g=this.decrypter=new s.default(this.observer,this.config));var m=F();g.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var s=F();p.observer.trigger(n.default.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:s}}),p.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),i,a,o,l,u,c,d,h,f)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),i,a,o,l,u,c,d,h,f)},e.pushDecrypted=function(t,e,r,s,a,o,l,u,c,d,h,f){var p=this.demuxer,g=this.remuxer;if(!p||l||u){for(var m,v=this.observer,b=this.typeSupported,w=this.config,E=[{demux:k,remux:N},{demux:_.default,remux:U},{demux:y,remux:N},{demux:x,remux:N}],S=0,T=E.length;S<T&&!(m=E[S]).demux.probe(t);S++);if(!m)return void v.trigger(n.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});g&&g instanceof m.remux||(g=new m.remux(v,w,b,this.vendor)),p&&p instanceof m.demux||(p=new m.demux(v,g,w,b),this.probe=m.demux.probe),this.demuxer=p,this.remuxer=g}(l||u)&&(p.resetInitSegment(r,s,a,d),g.resetInitSegment()),l&&(p.resetTimeStamp(f),g.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(e),p.append(t,o,c,h)},t}()},"./src/demux/demuxer-worker.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/demux/demuxer-inline.js"),i=r("./src/events.js"),s=r("./src/utils/logger.js"),a=r("./node_modules/eventemitter3/index.js");e.default=function(t){var e=new a.EventEmitter;e.trigger=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];e.emit.apply(e,[t,t].concat(n))},e.off=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];e.removeListener.apply(e,[t].concat(n))};var r=function(e,r){t.postMessage({event:e,data:r})};t.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var o=JSON.parse(a.config);t.demuxer=new n.default(e,a.typeSupported,o,a.vendor),Object(s.enableLogs)(o.debug),r("init",null);break;case"demux":t.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),e.on(i.default.FRAG_DECRYPTED,r),e.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),e.on(i.default.FRAG_PARSED,r),e.on(i.default.ERROR,r),e.on(i.default.FRAG_PARSING_METADATA,r),e.on(i.default.FRAG_PARSING_USERDATA,r),e.on(i.default.INIT_PTS_FOUND,r),e.on(i.default.FRAG_PARSING_DATA,function(e,r){var n=[],i={event:e,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),t.postMessage(i,n)})}},"./src/demux/id3.js":function(t,e,r){"use strict";r.r(e),r.d(e,"utf8ArrayToStr",function(){return o});var n,i=r("./src/utils/get-self-scope.js"),s=function(){function t(){}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,r){for(var n=r,i=0;t.isHeader(e,r);)i+=10,i+=t._readSize(e,r+6),t.isFooter(e,r+10)&&(i+=10),r+=i;if(i>0)return e.subarray(n,n+i)},t._readSize=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,(r|=(127&t[e+2])<<7)|127&t[e+3]},t.getTimeStamp=function(e){for(var r=t.getID3Frames(e),n=0;n<r.length;n++){var i=r[n];if(t.isTimeStampFrame(i))return t._readTimeStamp(i)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var r=String.fromCharCode(e[0],e[1],e[2],e[3]),n=t._readSize(e,4);return{type:r,size:n,data:e.subarray(10,10+n)}},t.getID3Frames=function(e){for(var r=0,n=[];t.isHeader(e,r);){for(var i=t._readSize(e,r+6),s=(r+=10)+i;r+8<s;){var a=t._getFrameData(e.subarray(r)),o=t._decodeFrame(a);o&&n.push(o),r+=a.size+10}t.isFooter(e,r)&&(r+=10)}return n},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,1&e[3]&&(r+=47721858.84),Math.round(r)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var r=t._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(r.length+1));return{key:e.type,info:r,data:n.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var r=1,n=t._utf8ArrayToStr(e.data.subarray(r),!0),i=t._utf8ArrayToStr(e.data.subarray(r+=n.length+1));return{key:e.type,info:n,data:i}}var s=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:s}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var r=1,n=t._utf8ArrayToStr(e.data.subarray(r)),i=t._utf8ArrayToStr(e.data.subarray(r+=n.length+1));return{key:e.type,info:n,data:i}}var s=t._utf8ArrayToStr(e.data);return{key:e.type,data:s}},t._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);var r=a();if(r){var n=r.decode(t);if(e){var i=n.indexOf("\0");return-1!==i?n.substring(0,i):n}return n.replace(/\0/g,"")}for(var s,o,l,u=t.length,c="",d=0;d<u;){if(0===(s=t[d++])&&e)return c;if(0!==s&&3!==s)switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(s);break;case 12:case 13:o=t[d++],c+=String.fromCharCode((31&s)<<6|63&o);break;case 14:o=t[d++],l=t[d++],c+=String.fromCharCode((15&s)<<12|(63&o)<<6|(63&l)<<0)}}return c},t}();function a(){var t=Object(i.getSelfScope)();return n||void 0===t.TextDecoder||(n=new t.TextDecoder("utf-8")),n}var o=s._utf8ArrayToStr;e.default=s},"./src/demux/mp4demuxer.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/utils/logger.js"),i=r("./src/events.js"),s=Math.pow(2,32)-1;e.default=function(){function t(t,e){this.observer=t,this.remuxer=e}var e=t.prototype;return e.resetTimeStamp=function(t){this.initPTS=t},e.resetInitSegment=function(e,r,n,s){if(e&&e.byteLength){var a=this.initData=t.parseInitSegment(e);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var o={};a.audio&&a.video?o.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:s?e:null}:(a.audio&&(o.audio={container:"audio/mp4",codec:r,initSegment:s?e:null}),a.video&&(o.video={container:"video/mp4",codec:n,initSegment:s?e:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r},t.writeUint32=function(t,e,r){t.data&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},t.findBox=function(e,r){var n,i,s,a,o,l,u=[];if(e.data?(o=e.start,s=e.end,e=e.data):(o=0,s=e.byteLength),!r.length)return null;for(n=o;n<s;)l=(i=t.readUint32(e,n))>1?n+i:s,t.bin2str(e.subarray(n+4,n+8))===r[0]&&(1===r.length?u.push({data:e,start:n+8,end:l}):(a=t.findBox({data:e,start:n+8,end:l},r.slice(1))).length&&(u=u.concat(a))),n=l;return u},t.parseSegmentIndex=function(e){var r,n=t.findBox(e,["moov"])[0],i=n?n.end:null,s=0,a=t.findBox(e,["sidx"]);if(!a||!a[0])return null;r=[];var o=(a=a[0]).data[0],l=t.readUint32(a,s=0===o?8:16);s+=4,s+=0===o?8:16;var u=a.end+0,c=t.readUint16(a,s+=2);s+=2;for(var d=0;d<c;d++){var h=s,f=t.readUint32(a,h);h+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=t.readUint32(a,h);h+=4,r.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+p-1}}),u+=p,s=h+=4}return{earliestPresentationTime:0,timescale:l,version:o,referencesCount:c,references:r,moovEndOffset:i}},t.parseInitSegment=function(e){var r=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var i=t.findBox(e,["tkhd"])[0];if(i){var s=i.data[i.start],a=0===s?12:20,o=t.readUint32(i,a),l=t.findBox(e,["mdia","mdhd"])[0];if(l){var u=t.readUint32(l,a=0===(s=l.data[l.start])?12:20),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[t.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var h=t.findBox(e,["mdia","minf","stbl","stsd"]);if(h.length){var f=t.bin2str((h=h[0]).data.subarray(h.start+12,h.start+16));n.logger.log("MP4Demuxer:"+d+":"+f+" found")}r[o]={timescale:u,type:d},r[d]={timescale:u,id:o}}}}}}),r},t.getStartDTS=function(e,r){var n,i,s;return n=t.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map(function(r){return t.findBox(r,["tfhd"]).map(function(n){var i,s;return i=t.readUint32(n,4),s=e[i].timescale||9e4,t.findBox(r,["tfdt"]).map(function(e){var r,n;return r=e.data[e.start],n=t.readUint32(e,4),1===r&&(n*=Math.pow(2,32),n+=t.readUint32(e,8)),n})[0]/s})})),s=Math.min.apply(null,i),isFinite(s)?s:0},t.offsetStartDTS=function(e,r,n){t.findBox(r,["moof","traf"]).map(function(r){return t.findBox(r,["tfhd"]).map(function(i){var a=t.readUint32(i,4),o=e[a].timescale||9e4;t.findBox(r,["tfdt"]).map(function(e){var r=e.data[e.start],i=t.readUint32(e,4);if(0===r)t.writeUint32(e,4,i-n*o);else{i*=Math.pow(2,32),i+=t.readUint32(e,8),i-=n*o,i=Math.max(i,0);var a=Math.floor(i/(s+1)),l=Math.floor(i%(s+1));t.writeUint32(e,4,a),t.writeUint32(e,8,l)}})})})},e.append=function(e,r,n,s){var a=this.initData;a||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),a=this.initData);var o,l=this.initPTS;if(void 0===l){var u=t.getStartDTS(a,e);this.initPTS=l=u-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}t.offsetStartDTS(a,e,l),o=t.getStartDTS(a,e),this.remuxer.remux(a.audio,a.video,null,null,o,n,s,e)},e.destroy=function(){},t}()},"./src/errors.ts":function(t,e,r){"use strict";var n,i;r.r(e),r.d(e,"ErrorTypes",function(){return n}),r.d(e,"ErrorDetails",function(){return i}),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(n||(n={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException"}(i||(i={}))},"./src/events.js":function(t,e,r){"use strict";r.r(e),e.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return Re});var n={};r.r(n),r.d(n,"newCue",function(){return jt});var i,s,a=r("./node_modules/url-toolkit/src/url-toolkit.js"),o=r("./src/errors.ts"),l=r("./src/polyfills/number.js"),u=r("./src/events.js"),c=r("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){},e.onHandlerDestroyed=function(){},e.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(d[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},e.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},e.onEvent=function(t,e){this.onEventGeneric(t,e)},e.onEventGeneric=function(t,e){try{(function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)}).call(this,t,e).call()}catch(r){c.logger.error("An internal error happened while handling event "+t+'. Error message: "'+r.message+'". Here is a stacktrace:',r),this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:r})}},t}();!function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(s||(s={}));var f=r("./src/demux/mp4demuxer.js");var p,g=function(){function t(t,e){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=e}var e;return(e=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(a.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();!function(t){t.AUDIO="audio",t.VIDEO="video"}(p||(p={}));var m=function(){function t(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((t={})[p.AUDIO]=!1,t[p.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var e,r=t.prototype;return r.setByteRange=function(t,e){var r=t.split("@",2),n=[];n[0]=1===r.length?e?e.byteRangeEndOffset:0:parseInt(r[1]),n[1]=parseInt(r[0])+n[0],this._byteRange=n},r.addElementaryStream=function(t){this._elementaryStreams[t]=!0},r.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},r.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},r.setDecryptDataFromLevelKey=function(t,e){var r=t;return(null==t?void 0:t.method)&&t.uri&&!t.iv&&((r=new g(t.baseuri,t.reluri)).method=t.method,r.iv=this.createInitializationVector(e)),r},(e=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l.isFiniteNumber)(this.programDateTime))return null;var t=Object(l.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();var v=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}var e;return(e=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}(),y=/^(\d+)x(\d+)$/,_=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,b=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)r[n]=parseInt(e.slice(2*n,2*n+2),16);return r}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.enumeratedString=function(t){return this[t]},e.decimalResolution=function(t){var e=y.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(_.lastIndex=0;null!==(e=_.exec(t));){var n=e[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[e[1]]=n}return r},t}(),w={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function E(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var S=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,T=/#EXT-X-MEDIA:(.*)/g,k=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),x=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,C=/\.(mp4|m4s|m4v|m4a)$/i,A=function(){function t(){}return t.findGroup=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(n.id===e)return n}},t.convertAVC1ToAVCOTI=function(t){var e,r=t.split(".");return r.length>2?(e=r.shift()+".",e+=parseInt(r.shift()).toString(16),e+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var n,i=[],s={},a=!1;function o(t,e){["video","audio"].forEach(function(r){var n=t.filter(function(t){return function(t,e){var r=w[e];return!!r&&!0===r[t.slice(0,4)]}(t,r)});if(n.length){var i=n.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[r+"Codec"]=i.length>0?i[0]:n[0],t=t.filter(function(t){return-1===n.indexOf(t)})}}),e.unknownCodecs=t}for(S.lastIndex=0;null!=(n=S.exec(e));)if(n[1]){var l={},u=l.attrs=new b(n[1]);l.url=t.resolve(n[2],r);var c=u.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),l.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),l.name=u.NAME,o([].concat((u.CODECS||"").split(/[ ,]+/)),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=t.convertAVC1ToAVCOTI(l.videoCodec)),i.push(l)}else if(n[3]){var d=new b(n[3]);d["DATA-ID"]&&(a=!0,s[d["DATA-ID"]]=d)}return{levels:i,sessionData:a?s:null}},t.parseMasterPlaylistMedia=function(e,r,n,i){var s;void 0===i&&(i=[]);var a=[],o=0;for(T.lastIndex=0;null!==(s=T.exec(e));){var l=new b(s[1]);if(l.TYPE===n){var u={attrs:l,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE,type:n,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=t.resolve(l.URI,r)),i.length){var c=t.findGroup(i,u.groupId);u.audioCodec=c?c.codec:i[0].codec}a.push(u)}}return a},t.parseLevelPlaylist=function(t,e,r,n,i){var s,a,o,u=0,d=0,h=new v(e),f=0,p=null,y=new m,_=null;for(k.lastIndex=0;null!==(s=k.exec(t));){var w=s[1];if(w){y.duration=parseFloat(w);var E=(" "+s[2]).slice(1);y.title=E||null,y.tagList.push(E?["INF",w,E]:["INF",w])}else if(s[3]){if(Object(l.isFiniteNumber)(y.duration)){var S=u++;y.type=n,y.start=d,o&&(y.levelkey=o),y.sn=S,y.level=r,y.cc=f,y.urlId=i,y.baseurl=e,y.relurl=(" "+s[3]).slice(1),R(y,p),h.fragments.push(y),p=y,d+=y.duration,y=new m}}else if(s[4]){var T=(" "+s[4]).slice(1);p?y.setByteRange(T,p):y.setByteRange(T)}else if(s[5])y.rawProgramDateTime=(" "+s[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),null===_&&(_=h.fragments.length);else{if(!(s=s[0].match(x))){c.logger.warn("No matches on slow regex match for level playlist!");continue}for(a=1;a<s.length&&void 0===s[a];a++);var A=(" "+s[a+1]).slice(1),D=(" "+s[a+2]).slice(1);switch(s[a]){case"#":y.tagList.push(D?[A,D]:[A]);break;case"PLAYLIST-TYPE":h.type=A.toUpperCase();break;case"MEDIA-SEQUENCE":u=h.startSN=parseInt(A);break;case"TARGETDURATION":h.targetduration=parseFloat(A);break;case"VERSION":h.version=parseInt(A);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":f++,y.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(A);break;case"KEY":var I=new b(A),O=I.enumeratedString("METHOD"),L=I.URI,P=I.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(I.KEYFORMAT||"identity")){c.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}O&&(o=new g(e,L),L&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(O)>=0&&(o.method=O,o.key=null,o.iv=P));break;case"START":var M=new b(A).decimalFloatingPoint("TIME-OFFSET");Object(l.isFiniteNumber)(M)&&(h.startTimeOffset=M);break;case"MAP":var F=new b(A);y.relurl=F.URI,F.BYTERANGE&&y.setByteRange(F.BYTERANGE),y.baseurl=e,y.level=r,y.type=n,y.sn="initSegment",h.initSegment=y,(y=new m).rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+s)}}}return(y=p)&&!y.relurl&&(h.fragments.pop(),d-=y.duration),h.totalduration=d,h.averagetargetduration=d/h.fragments.length,h.endSN=u-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=f,!h.initSegment&&h.fragments.length&&h.fragments.every(function(t){return C.test(t.relurl)})&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(y=new m).relurl=h.fragments[0].relurl,y.baseurl=e,y.level=r,y.type=n,y.sn="initSegment",h.initSegment=y,h.needSidxRanges=!0),_&&function(t,e){for(var r=t[e],n=e-1;n>=0;n--){var i=t[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}(h.fragments,_),h},t}();function R(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):(null==e?void 0:e.programDateTime)&&(t.programDateTime=e.endProgramDateTime),Object(l.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var D=window.performance,I=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.MANIFEST_LOADING,u.default.LEVEL_LOADING,u.default.AUDIO_TRACK_LOADING,u.default.SUBTITLE_TRACK_LOADING)||this).loaders={},r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.canHaveQualityLevels=function(t){return t!==i.AUDIO_TRACK&&t!==i.SUBTITLE_TRACK},n.mapContextToLevelType=function(t){switch(t.type){case i.AUDIO_TRACK:return s.AUDIO;case i.SUBTITLE_TRACK:return s.SUBTITLE;default:return s.MAIN}},n.getResponseUrl=function(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r};var a=n.prototype;return a.createInternalLoader=function(t){var e=this.hls.config,r=new(e.pLoader||e.loader)(e);return t.loader=r,this.loaders[t.type]=r,r},a.getInternalLoader=function(t){return this.loaders[t.type]},a.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},a.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},a.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},a.onManifestLoading=function(t){this.load({url:t.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},a.onLevelLoading=function(t){this.load({url:t.url,type:i.LEVEL,level:t.level,id:t.id,responseType:"text"})},a.onAudioTrackLoading=function(t){this.load({url:t.url,type:i.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},a.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:i.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},a.load=function(t){var e=this.hls.config;c.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var r,n,s,a,o=this.getInternalLoader(t);if(o){var l=o.context;if(l&&l.url===t.url)return c.logger.trace("playlist request ongoing"),!1;c.logger.warn("aborting previous loader for type: "+t.type),o.abort()}switch(t.type){case i.MANIFEST:r=e.manifestLoadingMaxRetry,n=e.manifestLoadingTimeOut,s=e.manifestLoadingRetryDelay,a=e.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:r=0,a=0,s=0,n=e.levelLoadingTimeOut;break;default:r=e.levelLoadingMaxRetry,n=e.levelLoadingTimeOut,s=e.levelLoadingRetryDelay,a=e.levelLoadingMaxRetryTimeout}o=this.createInternalLoader(t);var u={timeout:n,maxRetry:r,retryDelay:s,maxRetryDelay:a},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.logger.debug("Calling internal loader delegate for URL: "+t.url),o.load(t,u,d),!0},a.loadsuccess=function(t,e,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(t,r),void this._handlePlaylistLoaded(t,e,r,n);if(this.resetInternalLoader(r.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=t.data;e.tload=D.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,e,r,n):this._handleMasterPlaylist(t,e,r,n):this._handleManifestParsingError(t,r,"no EXTM3U delimiter",n)},a.loaderror=function(t,e,r){void 0===r&&(r=null),this._handleNetworkError(e,r,!1,t)},a.loadtimeout=function(t,e,r){void 0===r&&(r=null),this._handleNetworkError(e,r,!0)},a._handleMasterPlaylist=function(t,e,r,i){var s=this.hls,a=t.data,o=n.getResponseUrl(t,r),l=A.parseMasterPlaylist(a,o),d=l.levels,h=l.sessionData;if(d.length){var f=d.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),p=A.parseMasterPlaylistMedia(a,o,"AUDIO",f),g=A.parseMasterPlaylistMedia(a,o,"SUBTITLES"),m=A.parseMasterPlaylistMedia(a,o,"CLOSED-CAPTIONS");if(p.length){var v=!1;p.forEach(function(t){t.url||(v=!0)}),!1===v&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(c.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}s.trigger(u.default.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:g,captions:m,url:o,stats:e,networkDetails:i,sessionData:h})}else this._handleManifestParsingError(t,r,"no level found in manifest",i)},a._handleTrackOrLevelPlaylist=function(t,e,r,s){var a=this.hls,c=r.id,d=r.level,h=r.type,f=n.getResponseUrl(t,r),p=Object(l.isFiniteNumber)(c)?c:0,g=Object(l.isFiniteNumber)(d)?d:p,m=n.mapContextToLevelType(r),v=A.parseLevelPlaylist(t.data,f,g,m,p);v.tload=e.tload,v.fragments.length?(h===i.MANIFEST&&a.trigger(u.default.MANIFEST_LOADED,{levels:[{url:f,details:v}],audioTracks:[],url:f,stats:e,networkDetails:s,sessionData:null}),e.tparsed=D.now(),v.needSidxRanges?this.load({url:v.initSegment.url,isSidxRequest:!0,type:h,level:d,levelDetails:v,id:c,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"}):(r.levelDetails=v,this._handlePlaylistLoaded(t,e,r,s))):a.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:f,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},a._handleSidxRequest=function(t,e){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var r=f.default.parseSegmentIndex(new Uint8Array(t.data));if(r){var n=e.levelDetails;r.references.forEach(function(t,e){var r=t.info;if(n){var i=n.fragments[e];0===i.byteRange.length&&i.setByteRange(String(1+r.end-r.start)+"@"+String(r.start))}}),n&&n.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}},a._handleManifestParsingError=function(t,e,r,n){this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:r,networkDetails:n})},a._handleNetworkError=function(t,e,r,n){var s,a;void 0===r&&(r=!1),void 0===n&&(n=null),c.logger.info("A network error occured while loading a "+t.type+"-type playlist");var l=this.getInternalLoader(t);switch(t.type){case i.MANIFEST:s=r?o.ErrorDetails.MANIFEST_LOAD_TIMEOUT:o.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case i.LEVEL:s=r?o.ErrorDetails.LEVEL_LOAD_TIMEOUT:o.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case i.AUDIO_TRACK:s=r?o.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}l&&(l.abort(),this.resetInternalLoader(t.type));var d={type:o.ErrorTypes.NETWORK_ERROR,details:s,fatal:a,url:t.url,loader:l,context:t,networkDetails:e};n&&(d.response=n),this.hls.trigger(u.default.ERROR,d)},a._handlePlaylistLoaded=function(t,e,r,s){var a=r.type,o=r.level,l=r.id,c=r.levelDetails;if(c&&c.targetduration)if(n.canHaveQualityLevels(r.type))this.hls.trigger(u.default.LEVEL_LOADED,{details:c,level:o||0,id:l||0,stats:e,networkDetails:s});else switch(a){case i.AUDIO_TRACK:this.hls.trigger(u.default.AUDIO_TRACK_LOADED,{details:c,id:l,stats:e,networkDetails:s});break;case i.SUBTITLE_TRACK:this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:e,networkDetails:s})}else this._handleManifestParsingError(t,r,"invalid target duration",s)},n}(h),O=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.FRAG_LOADING)||this).loaders={},r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.destroy=function(){var e=this.loaders;for(var r in e){var n=e[r];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},i.onFragLoading=function(t){var e=t.frag,r=e.type,n=this.loaders,i=this.hls.config,s=i.fLoader,a=i.loader;e.loaded=0;var o,u,d,h=n[r];h&&(c.logger.warn("abort previous fragment loader for type: "+r),h.abort()),h=n[r]=e.loader=i.fLoader?new s(i):new a(i),o={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var f=e.byteRangeStartOffset,p=e.byteRangeEndOffset;Object(l.isFiniteNumber)(f)&&Object(l.isFiniteNumber)(p)&&(o.rangeStart=f,o.rangeEnd=p),u={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(o,u,d)},i.loadsuccess=function(t,e,r,n){void 0===n&&(n=null);var i=t.data,s=r.frag;s.loader=void 0,this.loaders[s.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:i,frag:s,stats:e,networkDetails:n})},i.loaderror=function(t,e,r){void 0===r&&(r=null);var n=e.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:r})},i.loadtimeout=function(t,e,r){void 0===r&&(r=null);var n=e.frag,i=n.loader;i&&i.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:r})},i.loadprogress=function(t,e,r,n){void 0===n&&(n=null);var i=e.frag;i.loaded=t.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:i,stats:t,networkDetails:n})},n}(h),L=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.KEY_LOADING)||this).loaders={},r.decryptkey=null,r.decrypturl=null,r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.destroy=function(){for(var e in this.loaders){var r=this.loaders[e];r&&r.destroy()}this.loaders={},t.prototype.destroy.call(this)},i.onKeyLoading=function(t){var e=t.frag,r=e.type,n=this.loaders[r];if(e.decryptdata){var i=e.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;if(n&&(c.logger.warn("abort previous key loader for type:"+r),n.abort()),!i)return void c.logger.warn("key uri is falsy");e.loader=this.loaders[r]=new s.loader(s),this.decrypturl=i,this.decryptkey=null;var a={url:i,frag:e,responseType:"arraybuffer"},o={timeout:s.fragLoadingTimeOut,maxRetry:0,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};e.loader.load(a,o,l)}else this.decryptkey&&(e.decryptdata.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:e}))}else c.logger.warn("Missing decryption data on fragment in onKeyLoading")},i.loadsuccess=function(t,e,r){var n=r.frag;n.decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(t.data),n.loader=void 0,delete this.loaders[n.type],this.hls.trigger(u.default.KEY_LOADED,{frag:n})):c.logger.error("after key load, decryptdata unset")},i.loaderror=function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},i.loadtimeout=function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.NETWORK_ERROR,details:o.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},n}(h),P=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.BUFFER_APPENDED,u.default.FRAG_BUFFERED,u.default.FRAG_LOADED)||this).bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=e.config,r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,h.prototype.destroy.call(this),t.prototype.destroy.call(this)},i.getBufferedFrag=function(t,e){var r=this.fragments,n=Object.keys(r).filter(function(n){var i=r[n];if(i.body.type!==e)return!1;if(!i.buffered)return!1;var s=i.body;return s.startPTS<=t&&t<=s.endPTS});if(0===n.length)return null;var i=n.pop();return r[i].body},i.detectEvictedFragments=function(t,e){var r=this;Object.keys(this.fragments).forEach(function(n){var i=r.fragments[n];if(i&&i.buffered){var s=i.range[t];if(s)for(var a=s.time,o=0;o<a.length;o++){var l=a[o];if(!r.isTimeBuffered(l.startPTS,l.endPTS,e)){r.removeFragment(i.body);break}}}})},i.detectPartialFragments=function(t){var e=this,r=this.getFragmentKey(t),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){t.hasElementaryStream(r)&&(n.range[r]=e.getBufferedTimes(t.startPTS,t.endPTS,e.timeRanges[r]))}))},i.getBufferedTimes=function(t,e,r){for(var n,i,s=[],a=!1,o=0;o<r.length;o++){if(n=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,t>=n&&e<=i){s.push({startPTS:Math.max(t,r.start(o)),endPTS:Math.min(e,r.end(o))});break}if(t<i&&e>n)s.push({startPTS:Math.max(t,r.start(o)),endPTS:Math.min(e,r.end(o))}),a=!0;else if(e<=n)break}return{time:s,partial:a}},i.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},i.getPartialFragment=function(t){var e,r,n,i=this,s=null,a=0;return Object.keys(this.fragments).forEach(function(o){var l=i.fragments[o];i.isPartial(l)&&(n=l.body.endPTS+i.bufferPadding,t>=(r=l.body.startPTS-i.bufferPadding)&&t<=n&&(e=Math.min(t-r,n-t),a<=e&&(s=l.body,a=e)))}),s},i.getState=function(t){var e=this.getFragmentKey(t),r=this.fragments[e],n="NOT_LOADED";return void 0!==r&&(n=r.buffered?!0===this.isPartial(r)?"PARTIAL":"OK":"APPENDING"),n},i.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},i.isTimeBuffered=function(t,e,r){for(var n,i,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,t>=n&&e<=i)return!0;if(e<=n)return!1}return!1},i.onFragLoaded=function(t){var e=t.frag;Object(l.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},i.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){e.detectEvictedFragments(t,e.timeRanges[t])})},i.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},i.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},i.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},i.removeAllFragments=function(){this.fragments=Object.create(null)},n}(h),M=function(t,e){for(var r=0,n=t.length-1,i=null,s=null;r<=n;){var a=e(s=t[i=(r+n)/2|0]);if(a>0)r=i+1;else{if(!(a<0))return s;n=i-1}}return null},F=function(){function t(){}return t.isBuffered=function(t,e){try{if(t)for(var r=t.buffered,n=0;n<r.length;n++)if(e>=r.start(n)&&e<=r.end(n))return!0}catch(i){}return!1},t.bufferInfo=function(t,e,r){try{if(t){var n,i=t.buffered,s=[];for(n=0;n<i.length;n++)s.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(s,e,r)}}catch(a){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,r){t.sort(function(t,e){return t.start-e.start||e.end-t.end});var n=[];if(r)for(var i=0;i<t.length;i++){var s=n.length;if(s){var a=n[s-1].end;t[i].start-a<r?t[i].end>a&&(n[s-1].end=t[i].end):n.push(t[i])}else n.push(t[i])}else n=t;for(var o,l=0,u=e,c=e,d=0;d<n.length;d++){var h=n[d].start,f=n[d].end;if(e+r>=h&&e<f)u=h,l=(c=f)-e;else if(e+r<h){o=h;break}}return{len:l,start:u,end:c,nextStart:o}},t}(),N=r("./node_modules/eventemitter3/index.js"),U=r("./node_modules/webworkify-webpack/index.js"),B=r("./src/demux/demuxer-inline.js");function j(){return window.MediaSource||window.WebKitMediaSource}var V=r("./src/utils/get-self-scope.js"),G=function(t){var e,r;function n(){return t.apply(this,arguments)||this}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.trigger=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.emit.apply(this,[t,t].concat(r))},n}(N.EventEmitter),H=Object(V.getSelfScope)(),K=j()||{isTypeSupported:function(){return!1}},$=function(){function t(t,e){var r=this;this.hls=t,this.id=e;var n=this.observer=new G,i=t.config,s=function(e,n){(n=n||{}).frag=r.frag,n.id=r.id,t.trigger(e,n)};n.on(u.default.FRAG_DECRYPTED,s),n.on(u.default.FRAG_PARSING_INIT_SEGMENT,s),n.on(u.default.FRAG_PARSING_DATA,s),n.on(u.default.FRAG_PARSED,s),n.on(u.default.ERROR,s),n.on(u.default.FRAG_PARSING_METADATA,s),n.on(u.default.FRAG_PARSING_USERDATA,s),n.on(u.default.INIT_PTS_FOUND,s);var a={mp4:K.isTypeSupported("video/mp4"),mpeg:K.isTypeSupported("audio/mpeg"),mp3:K.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(i.enableWorker&&"undefined"!=typeof Worker){var d;c.logger.log("demuxing in webworker");try{d=this.w=U("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(e){t.trigger(u.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:a,vendor:l,id:e,config:JSON.stringify(i)})}catch(h){c.logger.warn("Error in worker:",h),c.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&H.URL.revokeObjectURL(d.objectURL),this.demuxer=new B.default(n,a,i,l),this.w=void 0}}else this.demuxer=new B.default(n,a,i,l)}var e=t.prototype;return e.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},e.push=function(t,e,r,n,i,s,a,o){var u=this.w,d=Object(l.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,h=i.decryptdata,f=this.frag,p=!(f&&i.cc===f.cc),g=!(f&&i.level===f.level),m=!g&&f&&i.sn===f.sn+1;if(p&&c.logger.log(this.id+":discontinuity detected"),g&&c.logger.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:t,decryptdata:h,initSegment:e,audioCodec:r,videoCodec:n,timeOffset:d,discontinuity:p,trackSwitch:g,contiguous:m,duration:s,accurateTimeOffset:a,defaultInitPTS:o},t instanceof ArrayBuffer?[t]:[]);else{var v=this.demuxer;v&&v.push(t,h,e,r,n,d,p,g,m,s,a,o)}},e.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":H.URL.revokeObjectURL(this.w.objectURL);break;case u.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},t}();function z(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r)}}function q(t,e,r){var n=t[e],i=t[r],s=i.startPTS;Object(l.isFiniteNumber)(s)?r>e?(n.duration=s-n.start,n.duration<0&&c.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-s,i.duration<0&&c.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):i.start=r>e?n.start+(n.minEndPTS?n.minEndPTS-n.start:n.duration):Math.max(n.start-i.duration,0)}function W(t,e,r,n,i,s){var a=r,o=n;if(Object(l.isFiniteNumber)(e.startPTS)){var u=Math.abs(e.startPTS-r);e.deltaPTS=Object(l.isFiniteNumber)(e.deltaPTS)?Math.max(u,e.deltaPTS):u,a=Math.max(r,e.startPTS),r=Math.min(r,e.startPTS),o=Math.min(n,e.endPTS),n=Math.max(n,e.endPTS),i=Math.min(i,e.startDTS),s=Math.max(s,e.endDTS)}var c=r-e.start;e.start=e.startPTS=r,e.maxStartPTS=a,e.endPTS=n,e.minEndPTS=o,e.startDTS=i,e.endDTS=s,e.duration=n-r;var d,h,f,p=e.sn;if(!t||p<t.startSN||p>t.endSN)return 0;for((h=t.fragments)[d=p-t.startSN]=e,f=d;f>0;f--)q(h,f,f-1);for(f=d;f<h.length-1;f++)q(h,f,f+1);return t.PTSKnown=!0,c}function Y(t,e){e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment);var r,n=0;if(X(t,e,function(t,i){n=t.cc-i.cc,Object(l.isFiniteNumber)(t.startPTS)&&(i.start=i.startPTS=t.startPTS,i.endPTS=t.endPTS,i.duration=t.duration,i.backtracked=t.backtracked,i.dropped=t.dropped,r=i),e.PTSKnown=!0}),e.PTSKnown){if(n){c.logger.log("discontinuity sliding from playlist, take drift into account");for(var i=e.fragments,s=0;s<i.length;s++)i[s].cc+=n}r?W(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):function(t,e){var r=e.startSN-t.startSN,n=t.fragments,i=e.fragments;if(!(r<0||r>n.length))for(var s=0;s<i.length;s++)i[s].start+=n[r].start}(t,e),e.PTSKnown=t.PTSKnown}}function X(t,e,r){if(t&&e)for(var n=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,s=e.startSN-t.startSN,a=n;a<=i;a++){var o=t.fragments[s+a],l=e.fragments[a];if(!o||!l)break;r(o,l,a)}}function Z(t,e,r){var n=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),i=n/2;return t&&e.endSN===t.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}var Q=function(t){for(var e="",r=t.length,n=0;n<r;n++)e+="["+t.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e};function J(t,e){e.fragments.forEach(function(e){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}),e.PTSKnown=!0}function tt(t,e,r){!function(t,e,r){if(function(t,e,r){var n=!1;return e&&e.details&&r&&(r.endCC>r.startCC||t&&t.cc<r.startCC)&&(n=!0),n}(t,r,e)){var n=function(t,e){var r=t.fragments,n=e.fragments;if(n.length&&r.length){var i=function(t,e){for(var r=null,n=0;n<t.length;n+=1){var i=t[n];if(i&&i.cc===e){r=i;break}}return r}(r,n[0].cc);if(i&&(!i||i.startPTS))return i;c.logger.log("No frag in previous level to align on")}else c.logger.log("No fragments to align")}(r.details,e);n&&(c.logger.log("Adjusting PTS using last level due to CC increase within current level"),J(n.start,e))}}(t,r,e),!r.PTSKnown&&e&&function(t,e){if(e&&e.fragments.length){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;var r=(t.fragments[0].programDateTime-e.fragments[0].programDateTime)/1e3+e.fragments[0].start;Object(l.isFiniteNumber)(r)&&(c.logger.log("adjusting PTS using programDateTime delta, sliding:"+r.toFixed(3)),J(r,t))}}(r,e.details)}function et(t,e,r){if(null===e||!Array.isArray(t)||!t.length||!Object(l.isFiniteNumber)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;r=r||0;for(var n=0;n<t.length;++n){var i=t[n];if(it(e,r,i))return i}return null}function rt(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=null;return t?i=e[t.sn-e[0].sn+1]:0===r&&0===e[0].start&&(i=e[0]),i&&0===nt(r,n,i)?i:M(e,nt.bind(null,r,n))||i}function nt(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0);var n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=t?1:r.start-n>t&&r.start?-1:0}function it(t,e,r){var n=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>t}var st=function(){function t(t,e,r,n){this.config=t,this.media=e,this.fragmentTracker=r,this.hls=n,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var e=t.prototype;return e.poll=function(t){var e=this.config,r=this.media,n=this.stalled,i=r.currentTime,s=r.seeking,a=this.seeking&&!s,o=!this.seeking&&s;if(this.seeking=s,i===t){if((o||a)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&r.buffered.length){var l=F.bufferInfo(r,i,0),u=l.nextStart||0;if(l.len>0||u){if(s){var d=l.len>2,h=!u||u-i>2&&!this.fragmentTracker.getPartialFragment(i);if(d||h)return;this.moved=!1}if(!this.moved&&this.stalled){var f=Math.max(u,l.start||0)-i;if(f>0&&f<=2)return void this._trySkipBufferHole(null)}var p=self.performance.now();if(null!==n){var g=p-n;!s&&g>=250&&this._reportStall(l.len);var m=F.bufferInfo(r,i,e.maxBufferHole);this._tryFixBufferStall(m,g)}else this.stalled=p}}}else if(this.moved=!0,null!==n){if(this.stallReported){var v=self.performance.now()-n;c.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var r=this.config,n=this.fragmentTracker.getPartialFragment(this.media.currentTime);n&&this._trySkipBufferHole(n)||t.len>r.maxBufferHole&&e>1e3*r.highBufferWatchdogPeriod&&(c.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,c.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,r=this.hls,n=this.media,i=n.currentTime,s=0,a=0;a<n.buffered.length;a++){var l=n.buffered.start(a);if(i+e.maxBufferHole>=s&&i<l){var d=Math.max(l+.05,n.currentTime+.1);return c.logger.warn("skipping hole, adjusting currentTime from "+i+" to "+d),this.moved=!0,this.stalled=null,n.currentTime=d,t&&r.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+d,frag:t}),d}s=n.buffered.end(a)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,n=r.currentTime,i=(this.nudgeRetry||0)+1;if(this.nudgeRetry=i,i<t.nudgeMaxRetry){var s=n+i*t.nudgeOffset;c.logger.warn("Nudging 'currentTime' from "+n+" to "+s),r.currentTime=s,e.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.logger.error("Playhead still not moving while enough data buffered @"+n+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}();function at(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ot=function(t){var e,r;function n(e){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return(r=t.call.apply(t,[this,e].concat(i))||this)._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(at(r)),r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},i.hasInterval=function(){return!!this._tickInterval},i.hasNextTick=function(){return!!this._tickTimer},i.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},i.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},i.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},i.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},i.doTick=function(){},n}(h),lt=function(t){var e,r;function n(){return t.apply(this,arguments)||this}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.doTick=function(){},i.startLoad=function(){},i.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state="STOPPED"},i._streamEnded=function(t,e){var r=this.fragCurrent;if(!e.live&&r&&!r.backtracked&&r.sn===e.endSN&&!t.nextStart){var n=this.fragmentTracker.getState(r);return"PARTIAL"===n||"OK"===n}return!1},i.onMediaSeeking=function(){var t=this.config,e=this.media,r=this.state,n=e?e.currentTime:null,i=F.bufferInfo(this.mediaBuffer||e,n,this.config.maxBufferHole);if(c.logger.log("media seeking to "+(Object(l.isFiniteNumber)(n)?n.toFixed(3):n)),"FRAG_LOADING"===r){var s=this.fragCurrent;if(0===i.len&&s){var a=t.maxFragLookUpTolerance;n<s.start-a||n>s.start+s.duration+a?(s.loader&&(c.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),s.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state="IDLE"):c.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else"ENDED"===r&&(0===i.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state="IDLE");e&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},i.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},i.onHandlerDestroyed=function(){this.state="STOPPED",this.fragmentTracker=null},i.computeLivePosition=function(t,e){return t+Math.max(0,e.totalduration-(void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration))},n}(ot);var ut,ct=function(t){var e,r;function n(e,r){var n;return(n=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.LEVELS_UPDATED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this).fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state="STOPPED",n.stallReported=!1,n.gapController=null,n.altAudio=!1,n.audioOnly=!1,n.bitrateTest=!1,n}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i,a=n.prototype;return a.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(r.config.testBandwidth?(n=0,this.bitrateTest=!0):n=r.nextAutoLevel),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}e>0&&-1===t&&(c.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state="IDLE",this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state="STOPPED"},a.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},a.doTick=function(){switch(this.state){case"BUFFER_FLUSHING":this.fragLoadError=0;break;case"IDLE":this._doTickIdle();break;case"WAITING_LEVEL":var t=this.levels[this.level];t&&t.details&&(this.state="IDLE");break;case"FRAG_LOADING_WAITING_RETRY":var e=window.performance.now(),r=this.retryDate;(!r||e>=r||this.media&&this.media.seeking)&&(c.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state="IDLE")}this._checkBuffer(),this._checkFragmentChanged()},a._doTickIdle=function(){var t=this.hls,e=t.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&e.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=t.nextLoadLevel,s=this.levels[i];if(s){var a,o=s.bitrate;a=o?Math.max(8*e.maxBufferSize/o,e.maxBufferLength):e.maxBufferLength,a=Math.min(a,e.maxMaxBufferLength);var l=n<e.maxBufferHole?Math.max(2,e.maxBufferHole):e.maxBufferHole,d=F.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,l),h=d.len;if(!(h>=a)){c.logger.trace("buffer length of "+h.toFixed(3)+" is below max of "+a.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=i;var f=s.details;if(!f||f.live&&this.levelLastLoaded!==i)this.state="WAITING_LEVEL";else{if(this._streamEnded(d,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(u.default.BUFFER_EOS,p),void(this.state="ENDED")}this._fetchPayloadOrEos(n,d,f)}}}}},a._fetchPayloadOrEos=function(t,e,r){var n=this.fragPrevious,i=r.fragments,s=i.length;if(0!==s){var a,o=i[0].start,l=i[s-1].start+i[s-1].duration,u=e.end;if(r.initSegment&&!r.initSegment.data)a=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(s<d)return void c.logger.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+d);if(null===(a=this._ensureFragmentAtLivePoint(r,u,o,l,n,i)))return}else u<o&&(a=i[0]);a||(a=this._findFragment(o,n,s,i,u,l,r)),a&&(a.encrypted?this._loadKey(a,r):this._loadFragment(a,r,t,u))}},a._ensureFragmentAtLivePoint=function(t,e,r,n,i,s){var a,o=this.hls.config,u=this.media,d=1/0;if(void 0!==o.liveMaxLatencyDuration?d=o.liveMaxLatencyDuration:Object(l.isFiniteNumber)(o.liveMaxLatencyDurationCount)&&(d=o.liveMaxLatencyDurationCount*t.targetduration),e<Math.max(r-o.maxFragLookUpTolerance,n-d)){var h=this.liveSyncPosition=this.computeLivePosition(r,t);e=h,u&&!u.paused&&u.readyState&&u.duration>h&&h>u.currentTime&&(c.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),u.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&e>n&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown&&i)if(t.hasProgramDateTime)c.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),a=et(s,i.endProgramDateTime,o.maxFragLookUpTolerance);else{var f=i.sn+1;if(f>=t.startSN&&f<=t.endSN){var p=s[f-t.startSN];i.cc===p.cc&&c.logger.log("live playlist, switching playlist, load frag with next SN: "+(a=p).sn)}a||(a=M(s,function(t){return i.cc-t.cc}))&&c.logger.log("live playlist, switching playlist, load frag with same CC: "+a.sn)}return a},a._findFragment=function(t,e,r,n,i,s,a){var o,l=this.hls.config;if(o=i<s?rt(e,n,i,i>s-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):n[r-1]){var u=o.sn-a.startSN,d=n[u-1],h=n[u+1];if(e&&o.sn===e.sn)if(e&&o.level===e.level&&!o.backtracked)if(o.sn<a.endSN){var f=e.deltaPTS;f&&f>l.maxBufferHole&&e.dropped&&u?(o=d,c.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):c.logger.log("Re-loading fragment with SN: "+(o=h).sn)}else o=null;else o.backtracked&&(h&&h.backtracked?(c.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+o.sn+". Loading fragment "+h.sn),o=h):(c.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),o.dropped=0,d?(o=d).backtracked=!0:u&&(o=null)))}return o},a._loadKey=function(t,e){c.logger.log("Loading key for "+t.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+this.level),this.state="KEY_LOADING",this.hls.trigger(u.default.KEY_LOADING,{frag:t})},a._loadFragment=function(t,e,r,n){var i=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||"NOT_LOADED"===i||"PARTIAL"===i?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,c.logger.log("Loading "+t.sn+" of ["+e.startSN+" ,"+e.endSN+"],level "+this.level+", currentTime:"+r.toFixed(3)+",bufferEnd:"+n.toFixed(3)),this.hls.trigger(u.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new $(this.hls,"main")),this.state="FRAG_LOADING"):"APPENDING"===i&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},a.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,s.MAIN)},a.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},a._checkFragmentChanged=function(){var t,e,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((e=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),F.isBuffered(r,e)?t=this.getBufferedFrag(e):F.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var n=t;if(n!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},a.immediateLevelSwitch=function(){if(c.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,e=this.media;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},a.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,F.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},a.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,r=this.getBufferedFrag(t.currentTime);if(r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),t.paused)e=0;else{var n=this.fragLastKbps;e=n&&this.fragCurrent?this.fragCurrent.duration*this.levels[this.hls.nextLoadLevel].bitrate/(1e3*n)+1:0}var i=this.getBufferedFrag(t.currentTime+e);if(i){var s=this.followingBufferedFrag(i);if(s){var a=this.fragCurrent;a&&a.loader&&a.loader.abort(),this.fragCurrent=null;var o=Math.max(i.endPTS,s.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,s.duration));this.flushMainBuffer(o,Number.POSITIVE_INFINITY)}}}},a.flushMainBuffer=function(t,e){this.state="BUFFER_FLUSHING";var r={startOffset:t,endOffset:e};this.altAudio&&(r.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,r)},a.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new st(r,e,this.fragmentTracker,this.hls)},a.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},a.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;Object(l.isFiniteNumber)(e)&&c.logger.log("media seeked to "+e.toFixed(3)),this.tick()},a.onManifestLoading=function(){c.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},a.onManifestParsed=function(t){var e,r=!1,n=!1;t.levels.forEach(function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(r=!0),-1!==e.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&c.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},a.onLevelLoaded=function(t){var e=t.details,r=t.level,n=this.levels[this.levelLastLoaded],i=this.levels[r],s=e.totalduration,a=0;if(c.logger.log("level "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+s),e.live){var o=i.details;o&&e.fragments.length>0?(Y(o,e),this.liveSyncPosition=this.computeLivePosition(a=e.fragments[0].start,o),e.PTSKnown&&Object(l.isFiniteNumber)(a)?c.logger.log("live playlist sliding:"+a.toFixed(3)):(c.logger.log("live playlist - outdated PTS, unknown sliding"),tt(this.fragPrevious,n,e))):(c.logger.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,tt(this.fragPrevious,n,e))}else e.PTSKnown=!1;if(i.details=e,this.levelLastLoaded=r,this.hls.trigger(u.default.LEVEL_UPDATED,{details:e,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=e.startTimeOffset;Object(l.isFiniteNumber)(d)?(d<0&&(c.logger.log("negative start time offset "+d+", count from end of last fragment"),d=a+s+d),c.logger.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):e.live?(this.startPosition=this.computeLivePosition(a,e),c.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}"WAITING_LEVEL"===this.state&&(this.state="IDLE"),this.tick()},a.onKeyLoaded=function(){"KEY_LOADING"===this.state&&(this.state="IDLE",this.tick())},a.onFragLoaded=function(t){var e=this.fragCurrent,r=this.hls,n=this.media,i=t.frag;if("FRAG_LOADING"===this.state&&e&&"main"===i.type&&i.level===e.level&&i.sn===e.sn){var s=t.stats,a=this.levels[e.level],o=a.details;if(this.bitrateTest=!1,this.stats=s,c.logger.log("Loaded "+e.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+e.level),i.bitrateTest&&r.nextLoadLevel)this.state="IDLE",this.startFragRequested=!1,s.tparsed=s.tbuffered=window.performance.now(),r.trigger(u.default.FRAG_BUFFERED,{stats:s,frag:e,id:"main"}),this.tick();else if("initSegment"===i.sn)this.state="IDLE",s.tparsed=s.tbuffered=window.performance.now(),o.initSegment.data=t.payload,r.trigger(u.default.FRAG_BUFFERED,{stats:s,frag:e,id:"main"}),this.tick();else{c.logger.log("Parsing "+e.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+e.level+", cc "+e.cc),this.state="PARSING",this.pendingBuffering=!0,this.appended=!1,i.bitrateTest&&(i.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:i}));var l=!(n&&n.seeking)&&(o.PTSKnown||!o.live),d=o.initSegment?o.initSegment.data:[],h=this._getAudioCodec(a);(this.demuxer=this.demuxer||new $(this.hls,"main")).push(t.payload,d,h,a.videoCodec,e,o.totalduration,l)}}this.fragLoadError=0},a.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&"PARSING"===this.state){var n,i,s=t.tracks;if(this.audioOnly=s.audio&&!s.video,this.altAudio&&!this.audioOnly&&delete s.audio,i=s.audio){var a=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===o.indexOf("firefox")&&(a="mp4a.40.5"),-1!==o.indexOf("android")&&"audio/mpeg"!==i.container&&c.logger.log("Android: force audio codec to "+(a="mp4a.40.2")),i.levelCodec=a,i.id=t.id}for(n in(i=s.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=t.id),this.hls.trigger(u.default.BUFFER_CODECS,s),s){c.logger.log("main track:"+n+",container:"+(i=s[n]).container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:n,data:l,parent:"main",content:"initSegment"}))}this.tick()}},a.onFragParsingData=function(t){var e=this,r=this.fragCurrent,n=t.frag;if(r&&"main"===t.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==t.type||!this.altAudio)&&"PARSING"===this.state){var i=this.levels[this.level],s=r;if(Object(l.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),!0===t.hasAudio&&s.addElementaryStream(p.AUDIO),!0===t.hasVideo&&s.addElementaryStream(p.VIDEO),c.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(s.dropped=t.dropped,s.dropped)if(s.backtracked)c.logger.warn("Already backtracked on this fragment, appending with the gap",s.sn);else{var a=i.details;if(!a||s.sn!==a.startSN)return c.logger.warn("missing video frame(s), backtracking fragment",s.sn),this.fragmentTracker.removeFragment(s),s.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state="IDLE",this.fragPrevious=s,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();c.logger.warn("missing video frame(s) on first frag, appending with gap",s.sn)}else s.backtracked=!1;var o=W(i.details,s,t.startPTS,t.endPTS,t.startDTS,t.endDTS),d=this.hls;d.trigger(u.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:o,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(r){r&&r.length&&"PARSING"===e.state&&(e.appended=!0,e.pendingBuffering=!0,d.trigger(u.default.BUFFER_APPENDING,{type:t.type,data:r,parent:"main",content:"data"}))}),this.tick()}},a.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&"PARSING"===this.state&&(this.stats.tparsed=window.performance.now(),this.state="PARSED",this._checkAppendedParsed())},a.onAudioTrackSwitching=function(t){var e=t.id;if(!t.url){if(this.mediaBuffer!==this.media){c.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(c.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state="IDLE"}var n=this.hls;n.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),n.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:e}),this.altAudio=!1}},a.onAudioTrackSwitched=function(t){var e=!!this.hls.audioTracks[t.id].url;if(e){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(c.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=e,this.tick()},a.onBufferCreated=function(t){var e,r,n=t.tracks,i=!1;for(var s in n){var a=n[s];"main"===a.id?(r=s,e=a,"video"===s&&(this.videoBuffer=n[s].buffer)):i=!0}i&&e?(c.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},a.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;"PARSING"!==e&&"PARSED"!==e||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},a._checkAppendedParsed=function(){if(!("PARSED"!==this.state||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){c.logger.log("main buffered : "+Q((this.mediaBuffer?this.mediaBuffer:this.media).buffered)),this.fragPrevious=t;var e=this.stats;e.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*e.total/(e.tbuffered-e.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:e,frag:t,id:"main"}),this.state="IDLE"}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},a.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var r=!!this.media&&F.isBuffered(this.media,this.media.currentTime)&&F.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.logger.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state="FRAG_LOADING_WAITING_RETRY"}else c.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state="ERROR";break;case o.ErrorDetails.LEVEL_LOAD_ERROR:case o.ErrorDetails.LEVEL_LOAD_TIMEOUT:"ERROR"!==this.state&&(t.fatal?(this.state="ERROR",c.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||"WAITING_LEVEL"!==this.state||(this.state="IDLE"));break;case o.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||"PARSING"!==this.state&&"PARSED"!==this.state||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state="IDLE"):(c.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},a._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,c.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},a._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e)}},a.onFragLoadEmergencyAborted=function(){this.state="IDLE",this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},a.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(this.audioOnly?p.AUDIO:p.VIDEO,t.buffered),this.state="IDLE",this.fragPrevious=null},a.onLevelsUpdated=function(t){this.levels=t.levels},a.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},a._seekToStartPos=function(){var t=this.media,e=t.currentTime,r=this.startPosition;if(e!==r&&r>=0){if(t.seeking)return void c.logger.log("could not seek to "+r+", already seeking at "+e);var n=(t.buffered.length?t.buffered.start(0):0)-r;n>0&&n<this.config.maxBufferHole&&(c.logger.log("adjusting start position by "+n+" to match buffer start"),this.startPosition=r+=n),c.logger.log("seek to target start position "+r+" from current time "+e+". ready state "+t.readyState),t.currentTime=r}},a._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},(i=[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,c.logger.log("main stream-controller: "+e+"->"+t),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(n.prototype,i),n}(lt);var dt=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.FRAG_LOADED,u.default.ERROR)||this).canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,ut=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i,s=n.prototype;return s.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},s.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},s.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},s.stopLoad=function(){this.canload=!1},s.onManifestLoaded=function(t){var e,r=[],n=[],i={},s=null,a=!1,l=!1;if(t.levels.forEach(function(t){var e=t.attrs;t.loadError=0,t.fragmentError=!1,a=a||!!t.videoCodec,l=l||!!t.audioCodec,ut&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(s=i[t.bitrate])?s.url.push(t.url):(t.url=[t.url],t.urlId=0,i[t.bitrate]=t,r.push(t)),e&&(e.AUDIO&&z(s||t,"audio",e.AUDIO),e.SUBTITLES&&z(s||t,"text",e.SUBTITLES))}),a&&l&&(r=r.filter(function(t){return!!t.videoCodec})),r=r.filter(function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||E(e,"audio"))&&(!r||E(r,"video"))}),t.audioTracks&&(n=t.audioTracks.filter(function(t){return!t.audioCodec||E(t.audioCodec,"audio")})).forEach(function(t,e){t.id=e}),r.length>0){e=r[0].bitrate,r.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=r;for(var d=0;d<r.length;d++)if(r[d].bitrate===e){this._firstLevel=d,c.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+e);break}this.hls.trigger(u.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:t.stats,audio:l,video:a,altAudio:!(l&&!a)&&n.some(function(t){return!!t.url})})}else this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},s.setLevelInternal=function(t){var e=this._levels,r=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){c.logger.log("switching to level "+t),this.currentLevelIndex=t;var n=e[t];n.level=t,r.trigger(u.default.LEVEL_SWITCHING,n)}var i=e[t],s=i.details;if(!s||s.live){var a=i.urlId;r.trigger(u.default.LEVEL_LOADING,{url:i.url[a],level:t,id:a})}}else r.trigger(u.default.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},s.onError=function(t){if(t.fatal)t.type===o.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var e,r=!1,n=!1;switch(t.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,n=!0;break;case o.ErrorDetails.LEVEL_LOAD_ERROR:case o.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,r=!0;break;case o.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,r=!0}void 0!==e&&this.recoverLevel(t,e,r,n)}},s.recoverLevel=function(t,e,r,n){var i,s,a,o=this,l=this.hls.config,u=t.details,d=this._levels[e];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return c.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);s=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return o.loadLevel()},s),t.levelRetry=!0,this.levelRetryCount++,c.logger.warn("level controller, "+u+", retry in "+s+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&((i=d.url.length)>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,c.logger.warn("level controller, "+u+" for level "+e+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(c.logger.warn("level controller, "+u+": switch to "+(a=0===e?this._levels.length-1:e-1)),this.hls.nextAutoLevel=this.currentLevelIndex=a):n&&(c.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},s.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var r=this._levels[e.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},s.onLevelLoaded=function(t){var e=this,r=t.level,n=t.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var s=Z(i.details,n,t.stats.trequest);c.logger.log("live playlist, reload in "+Math.round(s)+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},s)}else this.clearTimer()}},s.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===e){n=i;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},s.loadLevel=function(){if(c.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var e=this.currentLevelIndex,r=t.urlId,n=t.url[r];c.logger.log("Attempt loading level index "+e+" with URL-id "+r),this.hls.trigger(u.default.LEVEL_LOADING,{url:n,level:e,id:r})}}},s.removeLevel=function(t,e){var r=this.levels.filter(function(r,n){return n!==t||r.url.length>1&&void 0!==e&&(r.url=r.url.filter(function(t,r){return r!==e}),r.urlId=0,!0)}).map(function(t,e){var r=t.details;return r&&r.fragments&&r.fragments.forEach(function(t){t.level=e}),t});this._levels=r,this.hls.trigger(u.default.LEVELS_UPDATED,{levels:r})},(i=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(n.prototype,i),n}(h),ht=r("./src/demux/id3.js");function ft(t,e){var r;try{r=new Event("addtrack")}catch(n){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function pt(t){if(null==t?void 0:t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}var gt=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA,u.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,r.media=void 0,r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.destroy=function(){h.prototype.destroy.call(this)},i.onMediaAttached=function(t){this.media=t.media},i.onMediaDetaching=function(){pt(this.id3Track),this.id3Track=void 0,this.media=void 0},i.getID3Track=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return ft(r,this.media),r}return this.media.addTextTrack("metadata","id3")},i.onFragParsingMetadata=function(t){var e=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var s=ht.default.getID3Frames(r[i].data);if(s){var a=Math.max(r[i].pts,0),o=i<r.length-1?r[i+1].pts:e.endPTS;o||(o=e.start+e.duration),a===o?o+=1e-4:a>o&&(c.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),o=a+.25);for(var l=0;l<s.length;l++){var u=s[l];if(!ht.default.isTimeStampFrame(u)){var d=new n(a,o,"");d.value=u,this.id3Track.addCue(d)}}}}},i.onLiveBackBufferReached=function(t){var e=this.id3Track;if(e&&e.cues&&e.cues.length){var r=function(t,e){if(e<t[0].endTime)return t[0];if(e>t[t.length-1].endTime)return t[t.length-1];for(var r=0,n=t.length-1;r<=n;){var i=Math.floor((n+r)/2);if(e<t[i].endTime)n=i-1;else{if(!(e>t[i].endTime))return t[i];r=i+1}}return t[r].endTime-e<e-t[n].endTime?t[r]:t[n]}(e.cues,t.bufferEnd);if(r)for(;e.cues[0]!==r;)e.removeCue(e.cues[0])}},n}(h),mt=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var e=t.prototype;return e.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),vt=function(){function t(t,e,r,n){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new mt(e),this.fast_=new mt(r)}var e=t.prototype;return e.sample=function(t,e){var r=(t=Math.max(t,this.minDelayMs_))/1e3,n=8*e/r;this.fast_.sample(r,n),this.slow_.sample(r,n)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();var yt=window.performance,_t=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR)||this).lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)),r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i,s=n.prototype;return s.destroy=function(){this.clearTimer(),h.prototype.destroy.call(this)},s.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r,n,i=this.hls,s=i.config;i.levels[e.level].details.live?(r=s.abrEwmaFastLive,n=s.abrEwmaSlowLive):(r=s.abrEwmaFastVoD,n=s.abrEwmaSlowVoD),this._bwEstimator=new vt(i,n,r,s.abrEwmaDefaultEstimate)}},s._abandonRulesCheck=function(){var t=this.hls,e=t.media,r=this.fragCurrent;if(r){var n=r.loader;if(!n||n.stats&&n.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var i=n.stats;if(e&&i&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var s=yt.now()-i.trequest,a=Math.abs(e.playbackRate);if(s>500*r.duration/a){var o=t.levels,l=Math.max(1,i.bw?i.bw/8:1e3*i.loaded/s),d=o[r.level];if(!d)return;var h=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,f=i.total?i.total:Math.max(i.loaded,Math.round(r.duration*h/8)),p=e.currentTime,g=(f-i.loaded)/l,m=(F.bufferInfo(e,p,t.config.maxBufferHole).end-p)/a;if(m<2*r.duration/a&&g>m){var v,y=t.minAutoLevel;for(v=r.level-1;v>y;v--){var _=o[v].realBitrate?Math.max(o[v].realBitrate,o[v].bitrate):o[v].bitrate;if(r.duration*_/(6.4*l)<m)break}void 0<g&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+v+":fragLoadedDelay["+v+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+g.toFixed(1)+":"+m.toFixed(1)),t.nextLoadLevel=v,this._bwEstimator.sample(s,i.loaded),n.abort(),this.clearTimer(),t.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:i}))}}}}},s.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&Object(l.isFiniteNumber)(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[e.level],n=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,i=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(t.frag.bitrateTest){var s=t.stats;s.tparsed=s.tbuffered=s.tload,this.onFragBuffered(t)}}},s.onFragBuffered=function(t){var e=t.stats,r=t.frag;if(!0!==e.aborted&&"main"===r.type&&Object(l.isFiniteNumber)(r.sn)&&(!r.bitrateTest||e.tload===e.tbuffered)){var n=e.tparsed-e.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(n,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),this.bitrateTestDelay=r.bitrateTest?n/1e3:0}},s.onError=function(t){switch(t.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},s.clearTimer=function(){clearInterval(this.timer),this.timer=null},s._findBestLevel=function(t,e,r,n,i,s,a,o,l){for(var u=i;u>=n;u--){var d=l[u];if(d){var h,f=d.details,p=f?f.totalduration/f.fragments.length:e,g=!!f&&f.live;h=u<=t?a*r:o*r;var m=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=m*p/h;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(h)+"/"+m+"/"+p+"/"+s+"/"+v),h>m&&(!v||g&&!this.bitrateTestDelay||v<s))return u}}return-1},(i=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this._nextABRAutoLevel;return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,r=t.levels,n=t.config,i=t.minAutoLevel,s=t.media,a=this.lastLoadedFragLevel,o=this.fragCurrent?this.fragCurrent.duration:0,l=s?s.currentTime:0,u=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(F.bufferInfo(s,l,n.maxBufferHole).end-l)/u,f=this._findBestLevel(a,o,d,i,e,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(f>=0)return f;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=o?Math.min(o,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(0===h){var v=this.bitrateTestDelay;v&&(p=(o?Math.min(o,n.maxLoadingDelay):n.maxLoadingDelay)-v,c.logger.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=m=1)}return f=this._findBestLevel(a,o,d,i,e,h+p,g,m,r),Math.max(f,0)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(n.prototype,i),n}(h),bt=j(),wt=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED)||this)._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){c.logger.log("media source opened"),r.hls.trigger(u.default.MEDIA_ATTACHED,{media:r.media});var t=r.mediaSource;t&&t.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){c.logger.log("media source closed")},r._onMediaSourceEnded=function(){c.logger.log("media source ended")},r._onSBUpdateEnd=function(){if(r.audioTimestampOffset&&r.sourceBuffer.audio){var t=r.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+r.audioTimestampOffset),t.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset}r._needsFlush&&r.doFlush(),r._needsEos&&r.checkEos(),r.appending=!1;var e=r.parent,n=r.segments.reduce(function(t,r){return r.parent===e?t+1:t},0),i={},s=r.sourceBuffer;for(var a in s){var o=s[a];if(!o)throw Error("handling source buffer update end error: source buffer for "+a+" uninitilized and unable to update buffered TimeRanges.");i[a]=o.buffered}r.hls.trigger(u.default.BUFFER_APPENDED,{parent:e,pending:n,timeRanges:i}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===n&&r.flushLiveBackBuffer()},r._onSBUpdateError=function(t){c.logger.error("sourceBuffer error:",t),r.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.config=e.config,r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.destroy=function(){h.prototype.destroy.call(this)},i.onLevelPtsUpdated=function(t){var e=this.tracks.audio;if("audio"===t.type&&e&&"audio/mpeg"===e.container){var r=this.sourceBuffer.audio;if(!r)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(r.timestampOffset-t.start)>.1){var n=r.updating;try{r.abort()}catch(i){c.logger.warn("can not abort audio buffer: "+i)}n?this.audioTimestampOffset=t.start:(c.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+t.start),r.timestampOffset=t.start)}}},i.onManifestParsed=function(t){var e=2;(t.audio&&!t.video||!t.altAudio)&&(e=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e,c.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},i.onMediaAttaching=function(t){var e=this.media=t.media;if(e&&bt){var r=this.mediaSource=new bt;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),e.src=window.URL.createObjectURL(r),this._objectUrl=e.src}},i.onMediaDetaching=function(){c.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u.default.MEDIA_DETACHED)},i.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.pendingTracks,r=Object.keys(e).length;(r&&!t||2===r)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},i.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var r=t[e];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(n){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},i.onBufferCodecs=function(t){var e=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach(function(r){e.pendingTracks[r]=t[r]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},i.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var n in t)if(!e[n]){var i=t[n];if(!i)throw Error("source buffer exists for track "+n+", however track does not");var s=i.levelCodec||i.codec,a=i.container+";codecs="+s;c.logger.log("creating sourceBuffer("+a+")");try{var l=e[n]=r.addSourceBuffer(a);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[n]={buffer:l,codec:s,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(d){c.logger.error("error while trying to add sourceBuffer:"+d.message),this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:d,mimeType:a})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:this.tracks})},i.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},i.onBufferEos=function(t){for(var e in this.sourceBuffer)if(!t.type||t.type===e){var r=this.sourceBuffer[e];r&&!r.ended&&(r.ended=!0,c.logger.log(e+" sourceBuffer now EOS"))}this.checkEos()},i.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var r in t){var n=t[r];if(n){if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}}c.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(i){c.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},i.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},i.flushLiveBackBuffer=function(){if(this._live){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))if(this.media)for(var e=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=e-Math.max(t,this._levelTargetDuration),s=n.length-1;s>=0;s--){var a=n[s],o=r[a];if(o){var l=o.buffered;l.length>0&&i>l.start(0)&&this.removeBufferRange(a,o,0,i)&&this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}else c.logger.error("flushLiveBackBuffer called without attaching media")}},i.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},i.updateMediaElementDuration=function(){var t,e=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer){var n=this.sourceBuffer[r];if(n&&!0===n.updating)return}t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(c.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(l.isFiniteNumber)(t))&&(c.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},i.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;try{for(var n in r){var i=r[n];i&&(e+=i.buffered.length)}}catch(s){c.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(u.default.BUFFER_FLUSHED)}},i.doAppending=function(){var t=this.config,e=this.hls,r=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(!this.media||this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=r.shift();if(i)try{var s=n[i.type];if(!s)return void this._onSBUpdateEnd();if(s.updating)return void r.unshift(i);s.ended=!1,this.parent=i.parent,s.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(l){c.logger.error("error while trying to append buffer:"+l.message),r.unshift(i);var a={type:o.ErrorTypes.MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===l.code?(this.segments=[],a.details=o.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,a.details=o.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(c.logger.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0)),e.trigger(u.default.ERROR,a)}}}},i.flushBuffer=function(t,e,r){var n=this.sourceBuffer;if(!Object.keys(n).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),c.logger.log("flushBuffer,pos/start/end: "+i+"/"+t+"/"+e),this.flushBufferCounter>=this.appended)return c.logger.warn("abort flushing too many retries"),!0;var s=n[r];if(s){if(s.ended=!1,s.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(r,s,t,e))return this.flushBufferCounter++,!1}return c.logger.log("buffer flushed"),!0},i.removeBufferRange=function(t,e,r,n){try{for(var i=0;i<e.buffered.length;i++){var s=e.buffered.start(i),a=e.buffered.end(i),o=Math.max(s,r),l=Math.min(a,n);if(Math.min(l,a)-o>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c.logger.log("sb remove "+t+" ["+o+","+l+"], of ["+s+","+a+"], pos:"+u),e.remove(o,l),!0}}}catch(d){c.logger.warn("removeBufferRange failed",d)}return!1},n}(h);function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var St=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED,u.default.LEVELS_UPDATED,u.default.BUFFER_CODECS,u.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r.clientRect=null,r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i,s,a,o=n.prototype;return o.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},o.onFpsDropLevelCapping=function(t){n.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},o.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},o.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this.startCapping()},o.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},o.onLevelsUpdated=function(t){this.levels=t.levels},o.onMediaDetaching=function(){this.stopCapping()},o.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},o.getMaxLevel=function(t){var e=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,i){return n.isLevelAllowed(i,e.restrictedLevels)&&i<=t});return this.clientRect=null,n.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},o.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},o.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},o.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var r=t.getBoundingClientRect();e.width=r.width,e.height=r.height,e.width||e.height||(e.width=r.right-r.left||t.width||0,e.height=r.bottom-r.top||t.height||0)}return this.clientRect=e,e},n.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},n.getMaxLevelByMediaSize=function(t,e,r){if(!t||t&&!t.length)return-1;for(var n,i,s=t.length-1,a=0;a<t.length;a+=1){var o=t[a];if((o.width>=e||o.height>=r)&&(n=o,!(i=t[a+1])||n.width!==i.width||n.height!==i.height)){s=a;break}}return s},i=n,a=[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(e){}return t}}],(s=[{key:"mediaWidth",get:function(){return this.getDimensions().width*n.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*n.contentScaleFactor}}])&&Et(i.prototype,s),a&&Et(i,a),n}(h),Tt=window.performance,kt=function(t){var e,r;function n(e){return t.call(this,e,u.default.MEDIA_ATTACHING)||this}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},i.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},i.checkFPS=function(t,e,r){var n=Tt.now();if(e){if(this.lastTime){var i=r-this.lastDroppedFrames,s=e-this.lastDecodedFrames,a=1e3*i/(n-this.lastTime),o=this.hls;if(o.trigger(u.default.FPS_DROP,{currentDropped:i,currentDecoded:s,totalDroppedFrames:r}),a>0&&i>o.config.fpsDroppedMonitoringThreshold*s){var l=o.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),l>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=l)&&(o.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:l-=1,droppedLevel:o.currentLevel}),o.autoLevelCapping=l,o.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},i.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},n}(h),xt=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var e=t.prototype;return e.destroy=function(){this.abort(),this.loader=null},e.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.load=function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t,e=this.context;t=this.loader=new window.XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,e.url)}catch(i){t.open("GET",e.url,!0),n(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(i){return void this.callbacks.onError({code:t.status,text:i.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.readystatechange=function(t){var e=t.currentTarget,r=e.readyState,n=this.stats,i=this.context,s=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(window.performance.now(),n.trequest)),4===r){var a,o,l=e.status;l>=200&&l<300?(n.tload=Math.max(n.tfirst,window.performance.now()),o="arraybuffer"===i.responseType?(a=e.response).byteLength:(a=e.responseText).length,n.loaded=n.total=o,this.callbacks.onSuccess({url:e.responseURL,data:a},n,i,e)):n.retry>=s.maxRetry||l>=400&&l<499?(c.logger.error(l+" while loading "+i.url),this.callbacks.onError({code:l,text:e.statusText},i,e)):(c.logger.warn(l+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},e.loadtimeout=function(){c.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.loadprogress=function(t){var e=t.currentTarget,r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,e)},t}();var Ct=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.AUDIO_TRACK_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.LEVEL_LOADED,u.default.ERROR)||this)._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i,s=n.prototype;return s.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},s.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:e}),this._selectAudioGroup(this.hls.nextLoadLevel)},s.onAudioTrackLoaded=function(t){t.id>=this.tracks.length?c.logger.warn("Invalid audio track id:",t.id):(c.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()&&this.setInterval(1e3*t.details.targetduration),!t.details.live&&this.hasInterval()&&this.clearInterval())},s.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},s.onLevelLoaded=function(t){this._selectAudioGroup(t.level)},s.onError=function(t){t.type===o.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(c.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},s._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)c.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(t<0||t>=this.tracks.length)c.logger.warn("Invalid id passed to audio-track controller");else{var e=this.tracks[t];c.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t,this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING,{id:e.id,type:e.type,url:e.url}),this._loadTrackDetailsIfNeeded(e)}},s.doTick=function(){this._updateTrack(this._trackId)},s._selectAudioGroup=function(t){var e=this.hls.levels[t];if(e&&e.audioGroupIds){var r=e.audioGroupIds[e.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},s._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var i=e.filter(function(t){return t.default});i.length?e=i:c.logger.warn("No default audio tracks defined")}var s=!1,a=function(){e.forEach(function(e){s||t.audioGroupId&&e.groupId!==t.audioGroupId||n&&n!==e.name||(t._setAudioTrack(e.id),s=!0)})};a(),s||(n=null,a()),s||(c.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},s._needsTrackLoading=function(t){var e=t.details;return!(e&&!e.live||!t.url)},s._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,r=t.id;c.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:e,id:r})}},s._updateTrack=function(t){t<0||t>=this.tracks.length||(this.clearInterval(),this._trackId=t,c.logger.log("trying to update audio-track "+t),this._loadTrackDetailsIfNeeded(this.tracks[t]))},s._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],r=e.name,n=e.language;c.logger.warn("Loading failed on audio track id: "+t+", group-id: "+e.groupId+', name/language: "'+r+'" / "'+n+'"');for(var i=t,s=0;s<this.tracks.length;s++)if(!this.trackIdBlacklist[s]&&this.tracks[s].name===r){i=s;break}i!==t?(c.logger.log("Attempting audio-track fallback id:",i,"group-id:",this.tracks[i].groupId),this._setAudioTrack(i)):c.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"')},(i=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(n.prototype,i),n}(ot);var At=window.performance,Rt=function(t){var e,r;function n(e,r){var n;return(n=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this).fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state="STOPPED",n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i,s=n.prototype;return s.onInitPtsFound=function(t){var e=t.frag.cc,r=t.initPTS;"main"===t.id&&(this.initPTS[e]=r,this.videoTrackCC=e,c.logger.log("InitPTS for cc: "+e+" found from video track: "+r),"WAITING_INIT_PTS"===this.state&&this.tick())},s.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(c.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state="IDLE"):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state="STARTING"),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state="STOPPED"},s.doTick=function(){var t,e,r,n=this.hls,i=n.config;switch(this.state){case"ERROR":case"PAUSED":case"BUFFER_FLUSHING":break;case"STARTING":this.state="WAITING_TRACK",this.loadedmetadata=!1;break;case"IDLE":var s=this.tracks;if(!s)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var a=this.mediaBuffer?this.mediaBuffer:this.media,o=this.videoBuffer?this.videoBuffer:this.media,d=t<i.maxBufferHole?Math.max(2,i.maxBufferHole):i.maxBufferHole,h=F.bufferInfo(a,t,d),f=F.bufferInfo(o,t,d),p=h.len,g=h.end,m=this.fragPrevious,v=Math.min(i.maxBufferLength,i.maxMaxBufferLength),y=Math.max(v,f.len),_=this.audioSwitch,b=this.trackId;if((p<y||_)&&b<s.length){if(void 0===(r=s[b].details)){this.state="WAITING_TRACK";break}if(!_&&this._streamEnded(h,r))return this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),void(this.state="ENDED");var w,E=r.fragments,S=E.length,T=E[0].start,k=E[S-1].start+E[S-1].duration;if(_)if(r.live&&!r.PTSKnown)c.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),g=0;else if(g=t,r.PTSKnown&&t<T){if(!(h.end>T||h.nextStart))return;c.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=T+.05}if(r.initSegment&&!r.initSegment.data)w=r.initSegment;else if(g<=T){if(w=E[0],null!==this.videoTrackCC&&w.cc!==this.videoTrackCC&&(w=function(t,e){return M(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}(E,this.videoTrackCC)),r.live&&w.loadIdx&&w.loadIdx===this.fragLoadIdx){var x=h.nextStart?h.nextStart:T;return c.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(x+.05)),void(this.media.currentTime=x+.05)}}else{var C,A=i.maxFragLookUpTolerance,R=m?E[m.sn-E[0].sn+1]:void 0,D=function(t){var e=Math.min(A,t.duration);return t.start+t.duration-e<=g?1:t.start-e>g&&t.start?-1:0};g<k?(g>k-A&&(A=0),C=R&&!D(R)?R:M(E,D)):C=E[S-1],C&&(w=C,T=C.start,m&&w.level===m.level&&w.sn===m.sn&&(w.sn<r.endSN?c.logger.log("SN just loaded, load next one: "+(w=E[w.sn+1-r.startSN]).sn):w=null))}w&&(w.encrypted?(c.logger.log("Loading key for "+w.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+b),this.state="KEY_LOADING",n.trigger(u.default.KEY_LOADING,{frag:w})):(this.fragCurrent=w,(_||"NOT_LOADED"===this.fragmentTracker.getState(w))&&(c.logger.log("Loading "+w.sn+", cc: "+w.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+b+", currentTime:"+t+",bufferEnd:"+g.toFixed(3)),"initSegment"!==w.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(w.sn)&&(this.nextLoadPosition=w.start+w.duration),n.trigger(u.default.FRAG_LOADING,{frag:w}),this.state="FRAG_LOADING")))}break;case"WAITING_TRACK":(e=this.tracks[this.trackId])&&e.details&&(this.state="IDLE");break;case"FRAG_LOADING_WAITING_RETRY":var I=At.now(),O=this.retryDate;a=this.media,(!O||I>=O||a&&a.seeking)&&(c.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state="IDLE");break;case"WAITING_INIT_PTS":var L=this.videoTrackCC;if(void 0===this.initPTS[L])break;var P=this.waitingFragment;if(P){var N=P.frag.cc;L!==N?(e=this.tracks[this.trackId]).details&&e.details.live&&(c.logger.warn("Waiting fragment CC ("+N+") does not match video track CC ("+L+")"),this.waitingFragment=null,this.state="IDLE"):(this.state="FRAG_LOADING",this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state="IDLE"}},s.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},s.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},s.onAudioTracksUpdated=function(t){c.logger.log("audio tracks updated"),this.tracks=t.audioTracks},s.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state="PAUSED",this.waitingFragment=null,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state="IDLE"),this.tick()},s.onAudioTrackLoaded=function(t){var e=t.details,r=t.id,n=this.tracks[r],i=0;if(c.logger.log("track "+r+" loaded ["+e.startSN+","+e.endSN+"],duration:"+e.totalduration),e.live){var s=n.details;s&&e.fragments.length>0?(Y(s,e),i=e.fragments[0].start,c.logger.log(e.PTSKnown?"live audio playlist sliding:"+i.toFixed(3):"live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,c.logger.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(n.details=e,!this.startFragRequested){if(-1===this.startPosition){var a=e.startTimeOffset;Object(l.isFiniteNumber)(a)?(c.logger.log("start time offset found in playlist, adjust startPosition to "+a),this.startPosition=a):e.live?(this.startPosition=this.computeLivePosition(i,e),c.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}"WAITING_TRACK"===this.state&&(this.state="IDLE"),this.tick()},s.onKeyLoaded=function(){"KEY_LOADING"===this.state&&(this.state="IDLE",this.tick())},s.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if("FRAG_LOADING"===this.state&&e&&"audio"===r.type&&r.level===e.level&&r.sn===e.sn){var n=this.tracks[this.trackId],i=n.details,s=i.totalduration,a=e.level,o=e.sn,l=e.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",h=this.stats=t.stats;if("initSegment"===o)this.state="IDLE",h.tparsed=h.tbuffered=At.now(),i.initSegment.data=t.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:h,frag:e,id:"audio"}),this.tick();else{this.state="PARSING",this.appended=!1,this.demuxer||(this.demuxer=new $(this.hls,"audio"));var f=this.initPTS[l],p=i.initSegment?i.initSegment.data:[];i.initSegment||void 0!==f?(this.pendingBuffering=!0,c.logger.log("Demuxing "+o+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.demuxer.push(t.payload,p,d,null,e,s,!1,f)):(c.logger.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+o+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.waitingFragment=t,this.state="WAITING_INIT_PTS")}}this.fragLoadError=0},s.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&"PARSING"===this.state){var n,i=t.tracks;if(i.video&&delete i.video,n=i.audio){n.levelCodec=n.codec,n.id=t.id,this.hls.trigger(u.default.BUFFER_CODECS,i),c.logger.log("audio track:audio,container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var s=n.initSegment;if(s){var a={type:"audio",data:s,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,a))}this.tick()}}},s.onFragParsingData=function(t){var e=this,r=this.fragCurrent,n=t.frag;if(r&&"audio"===t.id&&"audio"===t.type&&n.sn===r.sn&&n.level===r.level&&"PARSING"===this.state){var i=this.trackId,s=this.tracks[i],a=this.hls;Object(l.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),r.addElementaryStream(p.AUDIO),c.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),W(s.details,r,t.startPTS,t.endPTS);var d=this.media,h=!1;if(this.audioSwitch)if(d&&d.readyState){var f=d.currentTime;c.logger.log("switching audio track : currentTime:"+f),f>=t.startPTS&&(c.logger.log("switching audio track : flushing all audio"),this.state="BUFFER_FLUSHING",a.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,a.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,a.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:i});var g=this.pendingData;if(!g)return c.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void a.trigger(u.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&g.push({type:t.type,data:e,parent:"audio",content:"data"})}),!h&&g.length&&(g.forEach(function(t){"PARSING"===e.state&&(e.pendingBuffering=!0,e.hls.trigger(u.default.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},s.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&"PARSING"===this.state&&(this.stats.tparsed=At.now(),this.state="PARSED",this._checkAppendedParsed())},s.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},s.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},s.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;"PARSING"!==e&&"PARSED"!==e||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},s._checkAppendedParsed=function(){if(!("PARSED"!==this.state||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,r=this.hls;if(t){this.fragPrevious=t,e.tbuffered=At.now(),r.trigger(u.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;n&&c.logger.log("audio buffered : "+Q(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state="IDLE"}this.tick()}},s.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:var r=t.frag;if(r&&"audio"!==r.type)break;if(!t.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n;var s=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);c.logger.warn("AudioStreamController: frag loading failed, retry in "+s+" ms"),this.retryDate=At.now()+s,this.state="FRAG_LOADING_WAITING_RETRY"}else c.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state="ERROR"}break;case o.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case o.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:"ERROR"!==this.state&&(this.state=t.fatal?"ERROR":"IDLE",c.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case o.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&("PARSING"===this.state||"PARSED"===this.state)){var a=this.mediaBuffer,l=this.media.currentTime;if(a&&F.isBuffered(a,l)&&F.isBuffered(a,l+.5)){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,c.logger.warn("AudioStreamController: reduce max buffer length to "+d.maxMaxBufferLength+"s")),this.state="IDLE"}else c.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state="BUFFER_FLUSHING",this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},s.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(c.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach(function(e){t.hls.trigger(u.default.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state="PARSED"):(this.state="IDLE",this.fragPrevious=null,this.tick())},(i=[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,c.logger.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(n.prototype,i),n}(lt),Dt=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var t={"":!0,lr:!0,rl:!0},e={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}function n(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function i(e,i,s){var a=this,o={enumerable:!0};a.hasBeenReset=!1;var l="",u=!1,c=e,d=i,h=s,f=null,p="",g=!0,m="auto",v="start",y=50,_="middle",b=50,w="middle";Object.defineProperty(a,"id",n({},o,{get:function(){return l},set:function(t){l=""+t}})),Object.defineProperty(a,"pauseOnExit",n({},o,{get:function(){return u},set:function(t){u=!!t}})),Object.defineProperty(a,"startTime",n({},o,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",n({},o,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",n({},o,{get:function(){return h},set:function(t){h=""+t,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",n({},o,{get:function(){return f},set:function(t){f=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",n({},o,{get:function(){return p},set:function(e){var r=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");p=r,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",n({},o,{get:function(){return g},set:function(t){g=!!t,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",n({},o,{get:function(){return m},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",n({},o,{get:function(){return v},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",n({},o,{get:function(){return y},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",n({},o,{get:function(){return _},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",n({},o,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",n({},o,{get:function(){return w},set:function(t){var e=r(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");w=e,this.hasBeenReset=!0}})),a.displayState=void 0}return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}(),It=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};function Ot(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new It,this.regionList=[]}function Lt(){this.values=Object.create(null)}function Pt(t,e,r,n){var i=n?t.split(n):[t];for(var s in i)if("string"==typeof i[s]){var a=i[s].split(r);2===a.length&&e(a[0],a[1])}}Lt.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var Mt=new Dt(0,0,0),Ft="middle"===Mt.align?"middle":"center";function Nt(t,e,r){var n=t;function i(){var e=function(t){function e(t,e,r,n){return 3600*(0|t)+60*(0|e)+(0|r)+(0|n)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);t=t.substr(3),s(),e.endTime=i(),s(),function(t,e){var n=new Lt;Pt(t,function(t,e){switch(t){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===e){n.set(t,r[i].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var s=e.split(","),a=s[0];n.integer(t,a),n.percent(t,a)&&n.set("snapToLines",!1),n.alt(t,a,["auto"]),2===s.length&&n.alt("lineAlign",s[1],["start",Ft,"end"]);break;case"position":s=e.split(","),n.percent(t,s[0]),2===s.length&&n.alt("positionAlign",s[1],["start",Ft,"end","line-left","line-right","auto"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start",Ft,"end","left","right"])}},/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===Mt.line&&(i=-1),e.line=i,e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100),e.align=n.get("align",Ft);var s=n.get("position","auto");"auto"===s&&50===Mt.position&&(s="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=s}(t,e)}function Ut(t){return t.replace(/<br(?: \/)?>/gi,"\n")}Ot.prototype={parse:function(t){var e=this;function r(){var t=e.buffer,r=0;for(t=Ut(t);r<t.length&&"\r"!==t[r]&&"\n"!==t[r];)++r;var n=t.substr(0,r);return"\r"===t[r]&&++r,"\n"===t[r]&&++r,e.buffer=t.substr(r),n}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var n;if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var i=(n=r()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var s=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(s?s=!1:n=r(),e.state){case"HEADER":/:/.test(n)?Pt(n,function(t,e){},/:/):n||(e.state="ID");continue;case"NOTE":n||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){e.state="NOTE";break}if(!n)continue;if(e.cue=new Dt(0,0,""),e.state="CUE",-1===n.indexOf("--\x3e")){e.cue.id=n;continue}case"CUE":try{Nt(n,e.cue,e.regionList)}catch(o){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var a=-1!==n.indexOf("--\x3e");if(!n||a&&(s=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=n;continue;case"BADCUE":n||(e.state="ID");continue}}}catch(o){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return this.onflush&&this.onflush(),this}};var Bt=Ot;function jt(t,e,r,n){for(var i,s,a,o,l,u=[],c=window.VTTCue||TextTrackCue,d=0;d<n.rows.length;d++)if(a=!0,o=0,l="",!(i=n.rows[d]).isEmpty()){for(var h=0;h<i.chars.length;h++)i.chars[h].uchar.match(/\s/)&&a?o++:(l+=i.chars[h].uchar,a=!1);i.cueStartTime=e,e===r&&(r+=1e-4),o>=16?o--:o++,(s=new c(e,r,Ut(l.trim()))).line=navigator.userAgent.match(/Firefox\//)?d+1:d>7?d-2:d+1,s.align="left",s.position=Math.max(0,Math.min(100,o/32*100)),u.push(s),t&&t.addCue(s)}return u}var Vt,Gt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ht=function(t){var e=t;return Gt.hasOwnProperty(t)&&(e=Gt[t]),String.fromCharCode(e)},Kt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},$t={17:2,18:4,21:6,22:8,23:10,19:13,20:15},zt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},qt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Wt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(Vt||(Vt={}));var Yt=function(){function t(){this.time=null,this.verboseLevel=Vt.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&c.logger.log(this.time+" ["+t+"] "+e)},t}(),Xt=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},Zt=function(){function t(t,e,r,n,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var n=e[r];t.hasOwnProperty(n)&&(this[n]=t[n])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Qt=function(){function t(t,e,r,n,i,s){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Zt(e,r,n,i,s)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Jt=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<100;e++)this.chars.push(new Qt);this.logger=t,this.pos=0,this.currPenState=new Zt}var e=t.prototype;return e.equals=function(t){for(var e=!0,r=0;r<100;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<100;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<100;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(Vt.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(Vt.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=Ht(t);this.pos>=100?this.logger.log(Vt.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<100;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,r=0;r<100;r++){var n=this.chars[r].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),te=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new Jt(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,r=0;r<15;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(Vt.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(Vt.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<15;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var s=i.rows[n].cueStartTime,a=this.logger.time;if(s&&null!==a&&s<a)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(i.rows[n+o])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var u=Math.max(t.indent-1,0);l.setCursor(t.indent),t.color=l.chars[u].penState.foreground}this.setPen({foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1})},e.setBkgData=function(t){this.logger.log(Vt.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(Vt.TEXT,this.getDisplayText());var t=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(Vt.INFO,"Rolling up")}else this.logger.log(Vt.DEBUG,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],r="",n=0;n<15;n++){var i=this.rows[n].getTextString();i&&e.push(t?"Row "+(n+1)+": '"+i+"'":i.trim())}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},e.getTextAndFormat=function(){return this.rows},t}(),ee=function(){function t(t,e,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new te(r),this.nonDisplayedMemory=new te(r),this.lastOutputScreen=new te(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(Vt.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);this.logger.log(Vt.INFO,(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(Vt.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(Vt.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(Vt.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(Vt.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(Vt.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(Vt.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(Vt.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(Vt.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(Vt.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(Vt.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(Vt.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(Vt.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(Vt.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(Vt.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(Vt.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(Vt.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}();function re(t,e,r){r.a=t,r.b=e}function ne(t,e,r){return r.a===t&&r.b===e}var ie=function(){function t(t,e,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var n=new Yt;this.channels=[null,new ee(t,e,n),new ee(t+1,r,n)],this.cmdHistory={a:null,b:null},this.logger=n}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var r,n,i,s=!1;this.logger.time=t;for(var a=0;a<e.length;a+=2)if(i=127&e[a+1],0!=(n=127&e[a])||0!==i){if(this.logger.log(Vt.DATA,"["+Xt([e[a],e[a+1]])+"] -> ("+Xt([n,i])+")"),(r=this.parseCmd(n,i))||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(s=this.parseChars(n,i))){var o=this.currentChannel;o&&o>0?this.channels[o].insertChars(s):this.logger.log(Vt.WARNING,"No channel found yet. TEXT-MODE?")}r||s||this.logger.log(Vt.WARNING,"Couldn't parse cleaned data "+Xt([n,i])+" orig: "+Xt([e[a],e[a+1]]))}},e.parseCmd=function(t,e){var r=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(ne(t,e,r))return re(null,null,r),this.logger.log(Vt.DEBUG,"Repeated command ("+Xt([t,e])+") is dropped"),!0;var n=20===t||21===t||23===t?1:2,i=this.channels[n];return 20===t||21===t||28===t||29===t?32===e?i.ccRCL():33===e?i.ccBS():34===e?i.ccAOF():35===e?i.ccAON():36===e?i.ccDER():37===e?i.ccRU(2):38===e?i.ccRU(3):39===e?i.ccRU(4):40===e?i.ccFON():41===e?i.ccRDC():42===e?i.ccTR():43===e?i.ccRTD():44===e?i.ccEDM():45===e?i.ccCR():46===e?i.ccENM():47===e&&i.ccEOC():i.ccTO(e-32),re(t,e,r),this.currentChannel=n,!0},e.parseMidrow=function(t,e){var r=0;if((17===t||25===t)&&e>=32&&e<=47){if((r=17===t?1:2)!==this.currentChannel)return this.logger.log(Vt.ERROR,"Mismatch channel in midrow parsing"),!1;var n=this.channels[r];return!!n&&(n.ccMIDROW(e),this.logger.log(Vt.DEBUG,"MIDROW ("+Xt([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var r=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(ne(t,e,r))return re(null,null,r),!0;var n=t<=23?1:2,i=this.channels[n];return!!i&&(i.setPAC(this.interpretPAC(e>=64&&e<=95?1===n?Kt[t]:zt[t]:1===n?$t[t]:qt[t],e)),re(t,e,r),this.currentChannel=n,!0)},e.interpretPAC=function(t,e){var r,n={color:null,italics:!1,indent:null,underline:!1,row:t};return n.underline=1==(1&(r=e>95?e-96:e-64)),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},e.parseChars=function(t,e){var r,n,i=null,s=null;(t>=25?(r=2,s=t-8):(r=1,s=t),s>=17&&s<=19)?(this.logger.log(Vt.INFO,"Special char '"+Ht(n=17===s?e+80:18===s?e+112:e+144)+"' in channel "+r),i=[n]):t>=32&&t<=127&&(i=0===e?[t]:[t,e]);if(i){var a=Xt(i);this.logger.log(Vt.DEBUG,"Char codes =  "+a.join(",")),re(t,e,this.cmdHistory)}return i},e.parseBackgroundAttributes=function(t,e){var r;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var n={};return 16===t||24===t?(r=Math.floor((e-32)/2),n.background=Wt[r],e%2==1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),this.channels[t<=23?1:2].setBkgData(n),re(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var r=this.channels[e];r&&r.cueSplitAtTime(t)}},t}(),se=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[]},t}(),ae=function(t,e,r){return t.substr(r||0,e.length)===e},oe=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()};function le(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}var ce=function(t){var e,r;function n(e){var r;if((r=t.call(this,e,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_USERDATA,u.default.FRAG_DECRYPTED,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.FRAG_LOADED,u.default.INIT_PTS_FOUND)||this).media=null,r.config=void 0,r.enabled=!0,r.Cues=void 0,r.textTracks=[],r.tracks=[],r.initPTS=[],r.unparsedVttFrags=[],r.captionsTracks={},r.nonNativeCaptionsTracks={},r.captionsProperties=void 0,r.cea608Parser1=void 0,r.cea608Parser2=void 0,r.lastSn=-1,r.prevCC=-1,r.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},r.hls=e,r.config=e.config,r.Cues=e.config.cueHandler,r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode},textTrack3:{label:r.config.captionsTextTrack3Label,languageCode:r.config.captionsTextTrack3LanguageCode},textTrack4:{label:r.config.captionsTextTrack4Label,languageCode:r.config.captionsTextTrack4LanguageCode}},r.config.enableCEA708Captions){var n=new se(le(r),"textTrack1"),i=new se(le(r),"textTrack2"),s=new se(le(r),"textTrack3"),a=new se(le(r),"textTrack4");r.cea608Parser1=new ie(1,n,i),r.cea608Parser2=new ie(3,s,a)}return r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.addCues=function(t,e,r,n,i){for(var s,a,o=!1,l=i.length;l--;){var c=i[l],d=(s=c[0],a=e,Math.min(c[1],r)-Math.max(s,a));if(d>=0&&(c[0]=Math.min(c[0],e),c[1]=Math.max(c[1],r),o=!0,d/(r-e)>.5))return}if(o||i.push([e,r]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[t],e,r,n);else{var h=this.Cues.newCue(null,e,r,n);this.hls.trigger(u.default.CUES_PARSED,{type:"captions",cues:h,track:t})}},i.onInitPtsFound=function(t){var e=this,r=this.unparsedVttFrags;"main"===t.id&&(this.initPTS[t.frag.cc]=t.initPTS),r.length&&(this.unparsedVttFrags=[],r.forEach(function(t){e.onFragLoaded(t)}))},i.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var n=e.textTracks[r];if(n[t])return n}return null},i.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},i.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsTracks,r=this.media,n=this.captionsProperties[t],i=n.label,s=n.languageCode,a=this.getExistingTrack(t);if(a)e[t]=a,pt(e[t]),ft(e[t],r);else{var o=this.createTextTrack("captions",i,s);o&&(o[t]=!0,e[t]=o)}}},i.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var r={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=r,this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},i.createTextTrack=function(t,e,r){var n=this.media;if(n)return n.addTextTrack(t,e,r)},i.destroy=function(){t.prototype.destroy.call(this)},i.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},i.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){pt(t[e]),delete t[e]}),this.nonNativeCaptionsTracks={}},i.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},i._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)pt(e[r])}},i.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var r=t.subtitles||[],n=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=t.subtitles||[],this.config.renderTextTracksNatively){var i=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,r){var n;if(r<i.length){for(var s=null,a=0;a<i.length;a++)if(ue(i[a],t)){s=i[a];break}s&&(n=s)}n||(n=e.createTextTrack("subtitles",t.name,t.lang)),n.mode=t.default?e.hls.subtitleDisplay?"showing":"hidden":"disabled",e.textTracks.push(n)})}else if(!n&&this.tracks&&this.tracks.length){var s=this.tracks.map(function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}});this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(t){var r=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(r){var n=e.captionsProperties["textTrack"+r[1]];n&&(n.label=t.name,t.lang&&(n.languageCode=t.lang),n.media=t)}})},i.onFragLoaded=function(t){var e=t.frag,r=t.payload,n=this.cea608Parser1,i=this.cea608Parser2,s=this.initPTS,a=this.unparsedVttFrags;if("main"===e.type){var o=e.sn;e.sn!==this.lastSn+1&&n&&i&&(n.reset(),i.reset()),this.lastSn=o}else if("subtitle"===e.type)if(r.byteLength){if(!Object(l.isFiniteNumber)(s[e.cc]))return a.push(t),void(s.length&&this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e}));var c=e.decryptdata;null!=c&&null!=c.key&&"AES-128"===c.method||this._parseVTTs(e,r)}else this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},i._parseVTTs=function(t,e){var r=this,n=this.hls,i=this.textTracks,s=this.vttCCs;s[t.cc]||(s[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc),function(t,e,r,n,i,s){var a,o=Object(ht.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",c=0,d=0,h=0,f=[],p=!0,g=!1,m=new Bt;m.oncue=function(t){var e=r[n],i=r.ccOffset;e&&e.new&&(void 0!==d?i=r.ccOffset=e.start:function(t,e,r){var n=t[e],i=t[n.prevCC];if(!i||!i.new&&n.new)return t.ccOffset=t.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)t.ccOffset+=n.start-i.start,n.new=!1,i=t[(n=i).prevCC];t.presentationOffset=r}(r,n,h)),h&&(i=h-r.presentationOffset),g&&(t.startTime+=i-d,t.endTime+=i-d),t.id=oe(t.startTime.toString())+oe(t.endTime.toString())+oe(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&f.push(t)},m.onparsingerror=function(t){a=t},m.onflush=function(){a&&s?s(a):i(f)},o.forEach(function(t){if(p){if(ae(t,"X-TIMESTAMP-MAP=")){p=!1,g=!0,t.substr(16).split(",").forEach(function(t){ae(t,"LOCAL:")?u=t.substr(6):ae(t,"MPEGTS:")&&(c=parseInt(t.substr(7)))});try{e+(9e4*r[n].start||0)<0&&(e+=8589934592),c-=e,d=function(t){var e=parseInt(t.substr(-3)),r=parseInt(t.substr(-6,2)),n=parseInt(t.substr(-9,2)),i=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(l.isFiniteNumber)(e)&&Object(l.isFiniteNumber)(r)&&Object(l.isFiniteNumber)(n)&&Object(l.isFiniteNumber)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*r,(e+=6e4*n)+36e5*i}(u)/1e3,h=c/9e4}catch(i){g=!1,a=i}return}""===t&&(p=!1)}m.parse(t+"\n")}),m.flush()}(e,this.initPTS[t.cc],s,t.cc,function(e){if(r.config.renderTextTracksNatively){var s=i[t.level];if("disabled"===s.mode)return void n.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t});e.forEach(function(t){if(!s.cues.getCueById(t.id))try{if(s.addCue(t),!s.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(r){c.logger.debug("Failed occurred on adding cues: "+r);var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,s.addCue(e)}})}else n.trigger(u.default.CUES_PARSED,{type:"subtitles",cues:e,track:r.tracks[t.level].default?"default":"subtitles"+t.level});n.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){c.logger.log("Failed to parse VTT cue: "+e),n.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},i.onFragDecrypted=function(t){var e=t.frag,r=t.payload;if("subtitle"===e.type){if(!Object(l.isFiniteNumber)(this.initPTS[e.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(e,r)}},i.onFragParsingUserdata=function(t){var e=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&e&&r)for(var n=0;n<t.samples.length;n++){var i=t.samples[n].bytes;if(i){var s=this.extractCea608Data(i);e.addData(t.samples[n].pts,s[0]),r.addData(t.samples[n].pts,s[1])}}},i.extractCea608Data=function(t){for(var e=31&t[0],r=2,n=[[],[]],i=0;i<e;i++){var s=t[r++],a=127&t[r++],o=127&t[r++],l=3&s;0===a&&0===o||0!=(4&s)&&(0!==l&&1!==l||(n[l].push(a),n[l].push(o)))}return n},n}(h);function de(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];"subtitles"===n.kind&&n.label&&e.push(t[r])}return e}var he,fe=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i,s=n.prototype;return s.destroy=function(){h.prototype.destroy.call(this)},s.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(Object(l.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},s.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),de(this.media.textTracks).forEach(function(t){pt(t)}),this.subtitleTrack=-1,this.media=null)},s.onManifestLoaded=function(t){var e=this,r=t.subtitles||[];this.tracks=r,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},s.onSubtitleTrackLoaded=function(t){var e=this,r=t.id,n=t.details,i=this.trackId,s=this.tracks,a=s[i];if(r>=s.length||r!==i||!a||this.stopped)this._clearReloadTimer();else if(c.logger.log("subtitle track "+r+" loaded"),n.live){var o=Z(a.details,n,t.stats.trequest);c.logger.log("Reloading live subtitle playlist in "+o+"ms"),this.timer=setTimeout(function(){e._loadCurrentTrack()},o)}else this._clearReloadTimer()},s.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},s.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},s._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},s._loadCurrentTrack=function(){var t=this.trackId,e=this.hls,r=this.tracks[t];t<0||!r||r.details&&!r.details.live||(c.logger.log("Loading subtitle track "+t),e.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:t}))},s._toggleTrackModes=function(t){var e=this.media,r=this.subtitleDisplay,n=this.trackId;if(e){var i=de(e.textTracks);if(-1===t)[].slice.call(i).forEach(function(t){t.mode="disabled"});else{var s=i[n];s&&(s.mode="disabled")}var a=i[t];a&&(a.mode=r?"showing":"hidden")}},s._setSubtitleTrackInternal=function(t){var e=this.hls,r=this.tracks;!Object(l.isFiniteNumber)(t)||t<-1||t>=r.length||(this.trackId=t,c.logger.log("Switching to subtitle track "+t),e.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},s._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=de(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack=t}},(i=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(n.prototype,i),n}(h),pe=r("./src/crypt/decrypter.js"),ge=window.performance,me=function(t){var e,r;function n(e,r){var n;return(n=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED,u.default.LEVEL_UPDATED)||this).fragmentTracker=r,n.config=e.config,n.state="STOPPED",n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new pe.default(e,e.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=n.prototype;return i.onSubtitleFragProcessed=function(t){var e=t.frag,r=t.success;if(this.fragPrevious=e,this.state="IDLE",r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,s=e.start,a=0;a<n.length;a++)if(s>=n[a].start&&s<=n[a].end){i=n[a];break}var o=e.start+e.duration;i?i.end=o:n.push(i={start:s,end:o})}}},i.onMediaAttached=function(t){var e=t.media;this.media=e,e.addEventListener("seeking",this._onMediaSeeking),this.state="IDLE"},i.onMediaDetaching=function(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]}),this.media=null,this.state="STOPPED")},i.onError=function(t){var e=t.frag;e&&"subtitle"===e.type&&(this.state="IDLE")},i.onSubtitleTracksUpdated=function(t){var e=this;c.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach(function(t){e.tracksBuffered[t.id]=[]})},i.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var e=this.tracks[this.currentTrackId];e&&e.details&&this.setInterval(500)}else this.clearInterval()},i.onSubtitleTrackLoaded=function(t){var e=t.id,r=t.details,n=this.currentTrackId,i=this.tracks,s=i[n];e>=i.length||e!==n||!s||(r.live&&function(t,e,r){void 0===r&&(r=0);var n=-1;X(t,e,function(t,e,r){e.start=t.start,n=r});var i=e.fragments;if(n<0)i.forEach(function(t){t.start+=r});else for(var s=n+1;s<i.length;s++)i[s].start=i[s-1].start+i[s-1].duration}(s.details,r,this.lastAVStart),s.details=r,this.setInterval(500))},i.onKeyLoaded=function(){"KEY_LOADING"===this.state&&(this.state="IDLE")},i.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag.decryptdata,n=t.frag,i=this.hls;if("FRAG_LOADING"===this.state&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var s=ge.now();this.decrypter.decrypt(t.payload,r.key.buffer,r.iv.buffer,function(t){var e=ge.now();i.trigger(u.default.FRAG_DECRYPTED,{frag:n,payload:t,stats:{tstart:s,tdecrypt:e}})})}},i.onLevelUpdated=function(t){var e=t.details.fragments;this.lastAVStart=e.length?e[0].start:0},i.doTick=function(){if(this.media)switch(this.state){case"IDLE":var t=this.config,e=this.currentTrackId,r=this.fragmentTracker,n=this.media,i=this.tracks;if(!i||!i[e]||!i[e].details)break;var s,a=t.maxBufferHole,o=t.maxFragLookUpTolerance,l=Math.min(t.maxBufferLength,t.maxMaxBufferLength),d=F.bufferedInfo(this._getBuffered(),n.currentTime,a),h=d.end,f=i[e].details,p=f.fragments,g=p.length;if(d.len>l)return;var m=this.fragPrevious;h<p[g-1].start+p[g-1].duration?(m&&f.hasProgramDateTime&&(s=et(p,m.endProgramDateTime,o)),s||(s=rt(m,p,h,o))):s=p[g-1],s&&s.encrypted?(c.logger.log("Loading key for "+s.sn),this.state="KEY_LOADING",this.hls.trigger(u.default.KEY_LOADING,{frag:s})):s&&"NOT_LOADED"===r.getState(s)&&(this.fragCurrent=s,this.state="FRAG_LOADING",this.hls.trigger(u.default.FRAG_LOADING,{frag:s}))}else this.state="IDLE"},i.stopLoad=function(){this.lastAVStart=0,t.prototype.stopLoad.call(this)},i._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},i.onMediaSeeking=function(){this.fragPrevious=null},n}(lt);!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(he||(he={}));var ve="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;var ye=function(t){var e,r;function n(e){var r;return(r=t.call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHED,u.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._drmSystemOptions=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r.mediaKeysPromise=null,r._onMediaEncrypted=function(t){if(c.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),!r.mediaKeysPromise)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void r.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var e=function(e){r._media&&(r._attemptSetMediaKeys(e),r._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};r.mediaKeysPromise.then(e).catch(e)},r._config=e.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r._drmSystemOptions=e.config.drmSystemOptions,r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i,s=n.prototype;return s.getLicenseServerUrl=function(t){switch(t){case he.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},s._attemptKeySystemAccess=function(t,e,r){var n=this,i=function(t,e,r,n){switch(t){case he.WIDEVINE:return function(t,e,r){var n={audioCapabilities:[],videoCapabilities:[]};return t.forEach(function(t){n.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:r.audioRobustness||""})}),e.forEach(function(t){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:r.videoRobustness||""})}),[n]}(e,r,n);default:throw new Error("Unknown key-system: "+t)}}(t,e,r,this._drmSystemOptions);c.logger.log("Requesting encrypted media key-system access");var s=this.requestMediaKeySystemAccess(t,i);this.mediaKeysPromise=s.then(function(e){return n._onMediaKeySystemAccessObtained(t,e)}),s.catch(function(e){c.logger.error('Failed to obtain key-system "'+t+'" access:',e)})},s._onMediaKeySystemAccessObtained=function(t,e){var r=this;c.logger.log('Access for key-system "'+t+'" obtained');var n={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(n);var i=Promise.resolve().then(function(){return e.createMediaKeys()}).then(function(e){return n.mediaKeys=e,c.logger.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated(),e});return i.catch(function(t){c.logger.error("Failed to create media-keys:",t)}),i},s._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},s._onNewMediaKeySession=function(t){var e=this;c.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",function(r){e._onKeySessionMessage(t,r.message)},!1)},s._onKeySessionMessage=function(t,e){c.logger.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){c.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)})},s._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});c.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},s._generateRequestWithPreferredKeySession=function(t,e){var r=this,n=this._mediaKeysList[0];if(!n)return c.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(n.mediaKeysSessionInitialized)c.logger.warn("Key-Session already initialized but requested again");else{var i=n.mediaKeysSession;if(!i)return c.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return c.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c.logger.log('Generating key-session request for "'+t+'" init data type'),n.mediaKeysSessionInitialized=!0,i.generateRequest(t,e).then(function(){c.logger.debug("Key-session generation succeeded")}).catch(function(t){c.logger.error("Error generating key-session request:",t),r.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},s._createLicenseXhr=function(t,e,r){var n=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(n,t)}catch(s){n.open("POST",t,!0),i(n,t)}n.readyState||n.open("POST",t,!0)}catch(s){throw new Error("issue setting up KeySystem license XHR "+s)}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,t,e,r),n},s._onLicenseRequestReadyStageChange=function(t,e,r,n){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,c.logger.log("License request succeeded"),"arraybuffer"!==t.responseType&&c.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),n(t.response);else{if(c.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});c.logger.warn("Retrying license request, "+(3-this._requestLicenseFailureCount+1)+" attempts left"),this._requestLicense(r,n)}}},s._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case he.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},s._requestLicense=function(t,e){c.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return c.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,t,e);c.logger.log("Sending license request to URL: "+n);var s=this._generateLicenseRequestChallenge(r,t);i.send(s)}catch(a){c.logger.error("Failure requesting DRM license: "+a),this.hls.trigger(u.default.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},s.onMediaAttached=function(t){if(this._emeEnabled){var e=t.media;this._media=e,e.addEventListener("encrypted",this._onMediaEncrypted)}},s.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map(function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch(function(){})})).then(function(){return t.setMediaKeys(null)}).catch(function(){}))},s.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map(function(t){return t.audioCodec}),r=t.levels.map(function(t){return t.videoCodec});this._attemptKeySystemAccess(he.WIDEVINE,e,r)}},(i=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(n.prototype,i),n}(h);function _e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function be(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(r),!0).forEach(function(e){we(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function we(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ee=be(be({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:xt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:_t,bufferController:wt,capLevelController:St,fpsController:kt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:ve,testBandwidth:!0},{cueHandler:n,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:me,subtitleTrackController:fe,timelineController:ce,audioStreamController:Rt,audioTrackController:Ct,emeController:ye});function Se(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Te(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Se(Object(r),!0).forEach(function(e){ke(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ke(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ae(t,e,r){return e&&Ce(t.prototype,e),r&&Ce(t,r),t}var Re=function(t){var e,r;function n(e){var r;void 0===e&&(e={}),(r=t.call(this)||this).config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var i=n.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");r.config=Te(Te({},i),e);var s=xe(r).config;if(void 0!==s.liveMaxLatencyDurationCount&&s.liveMaxLatencyDurationCount<=s.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==s.liveMaxLatencyDuration&&(void 0===s.liveSyncDuration||s.liveMaxLatencyDuration<=s.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.enableLogs)(s.debug),r._autoLevelCapping=-1;var a=r.abrController=new s.abrController(xe(r)),o=new s.bufferController(xe(r)),l=r.capLevelController=new s.capLevelController(xe(r)),u=new s.fpsController(xe(r)),d=new I(xe(r)),h=new O(xe(r)),f=new L(xe(r)),p=new gt(xe(r)),g=r.levelController=new dt(xe(r)),m=new P(xe(r)),v=[g,r.streamController=new ct(xe(r),m)],y=s.audioStreamController;y&&v.push(new y(xe(r),m)),r.networkControllers=v;var _=[d,h,f,a,o,l,u,p,m];if(y=s.audioTrackController){var b=new y(xe(r));r.audioTrackController=b,_.push(b)}if(y=s.subtitleTrackController){var w=new y(xe(r));r.subtitleTrackController=w,v.push(w)}if(y=s.emeController){var E=new y(xe(r));r.emeController=E,_.push(E)}return(y=s.subtitleStreamController)&&v.push(new y(xe(r),m)),(y=s.timelineController)&&_.push(new y(xe(r))),r.coreComponents=_,r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.isSupported=function(){return function(){var t=j();if(!t)return!1;var e=self.SourceBuffer||self.WebKitSourceBuffer;return!(!t||"function"!=typeof t.isTypeSupported||!t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||e&&(!e.prototype||"function"!=typeof e.prototype.appendBuffer||"function"!=typeof e.prototype.remove))}()},Ae(n,null,[{key:"version",get:function(){return"0.14.5"}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return o.ErrorTypes}},{key:"ErrorDetails",get:function(){return o.ErrorDetails}},{key:"DefaultConfig",get:function(){return n.defaultConfig?n.defaultConfig:Ee},set:function(t){n.defaultConfig=t}}]);var i=n.prototype;return i.destroy=function(){c.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},i.attachMedia=function(t){c.logger.log("attachMedia"),this.media=t,this.trigger(u.default.MEDIA_ATTACHING,{media:t})},i.detachMedia=function(){c.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},i.loadSource=function(t){t=a.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),c.logger.log("loadSource:"+t),this.url=t,this.trigger(u.default.MANIFEST_LOADING,{url:t})},i.startLoad=function(t){void 0===t&&(t=-1),c.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},i.stopLoad=function(){c.logger.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},i.swapAudioCodec=function(){c.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},i.recoverMediaError=function(){c.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},i.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},Ae(n,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){c.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){c.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){c.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){c.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){c.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){c.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,r=t?t.length:0,n=0;n<r;n++)if((t[n].realBitrate?Math.max(t[n].realBitrate,t[n].bitrate):t[n].bitrate)>e)return n;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),n}(G);Re.defaultConfig=void 0},"./src/polyfills/number.js":function(t,e,r){"use strict";r.r(e),r.d(e,"isFiniteNumber",function(){return n}),r.d(e,"MAX_SAFE_INTEGER",function(){return i});var n=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":function(t,e,r){"use strict";function n(){return"undefined"==typeof window?self:window}r.r(e),r.d(e,"getSelfScope",function(){return n})},"./src/utils/logger.js":function(t,e,r){"use strict";r.r(e),r.d(e,"enableLogs",function(){return c}),r.d(e,"logger",function(){return d});var n=r("./src/utils/get-self-scope.js");function i(){}var s={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=s;function o(t,e){return"["+t+"] > "+e}var l=Object(n.getSelfScope)();function u(t){var e=l.console[t];return e?function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];n[0]&&(n[0]=o(t,n[0])),e.apply(l.console,n)}:i}var c=function(t){if(l.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach(function(e){a[e]=t[e]?t[e].bind(t):u(e)})}(t,"debug","log","info","warn","error");try{a.log()}catch(e){a=s}}else a=s},d=a}}).default},t.exports=e())},5185:function(t,e,r){"use strict";function n(t){return"function"==typeof t}let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function a(t){setTimeout(()=>{throw t},0)}const o={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function u(t){return null!==t&&"object"==typeof t}const c=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let d=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:r,_ctorUnsubscribe:i,_unsubscribe:s,_subscriptions:a}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(let t=0;t<r.length;++t)r[t].remove(this);if(n(s)){i&&(this._unsubscribe=void 0);try{s.call(this)}catch(o){e=o instanceof c?h(o.errors):[o]}}if(l(a)){let t=-1,r=a.length;for(;++t<r;){const r=a[t];if(u(r))try{r.unsubscribe()}catch(o){e=e||[],o instanceof c?e=e.concat(h(o.errors)):e.push(o)}}}if(e)throw new c(e)}add(e){let r=e;if(!e)return t.EMPTY;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){const e=r;r=new t,r._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=r;if(null===n)r._parentOrParents=this;else if(n instanceof t){if(n===this)return r;r._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return r;n.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[r]:i.push(r),r}remove(t){const e=this._subscriptions;if(e){const r=e.indexOf(t);-1!==r&&e.splice(r,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function h(t){return t.reduce((t,e)=>t.concat(e instanceof c?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends d{constructor(t,e,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=o;break;case 1:if(!t){this.destination=o;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,r)}}[f](){return this}static create(t,e,r){const n=new p(t,e,r);return n.syncErrorThrowable=!1,n}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,r,i){let s;super(),this._parentSubscriber=t;let a=this;n(e)?s=e:e&&(s=e.next,r=e.error,i=e.complete,e!==o&&(a=Object.create(e),n(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=r,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:r}=s;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;a(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(r){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw r;a(r)}}__tryOrSetError(t,e,r){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(n){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(a(n),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(t){return t}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const r=new t;return r.source=this,r.operator=e,r}subscribe(t,e,r){const{operator:n}=this,i=function(t,e,r){if(t){if(t instanceof p)return t;if(t[f])return t[f]()}return t||e||r?new p(t,e,r):new p(o)}(t,e,r);if(i.add(n?n.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:r,isStopped:n}=t;if(e||n)return!1;t=r&&r instanceof p?r:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,r)=>{let n;n=this.subscribe(e=>{try{t(e)}catch(i){r(i),n&&n.unsubscribe()}},r,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?v:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=_(t))((t,e)=>{let r;this.subscribe(t=>r=t,t=>e(t),()=>t(r))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class w extends d{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}class E extends p{constructor(t){super(t),this.destination=t}}let S=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new E(this)}lift(t){const e=new T(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,r=e.length,n=e.slice();for(let i=0;i<r;i++)n[i].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,r=e.length,n=e.slice();for(let i=0;i<r;i++)n[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,r=t.slice();for(let n=0;n<e;n++)r[n].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new w(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new T(t,e),t})();class T extends S{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):d.EMPTY}}function k(t){return t&&"function"==typeof t.schedule}function x(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new C(t,e))}}class C{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new A(t,this.project,this.thisArg))}}class A extends p{constructor(t,e,r){super(t),this.project=e,this.count=0,this.thisArg=r||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const R=t=>e=>{for(let r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.complete()};function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const I=D(),O=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function L(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const P=t=>{if(t&&"function"==typeof t[m])return r=t,t=>{const e=r[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(O(t))return R(t);if(L(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,a),e))(t);if(t&&"function"==typeof t[I])return e=t,t=>{const r=e[I]();for(;;){let e;try{e=r.next()}catch(n){return t.error(n),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof r.return&&t.add(()=>{r.return&&r.return()}),t};{const e=u(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,r};function M(t,e){return new y(r=>{const n=new d;let i=0;return n.add(e.schedule(function(){i!==t.length?(r.next(t[i++]),r.closed||n.add(this.schedule())):r.complete()})),n})}function F(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new y(r=>{const n=new d;return n.add(e.schedule(()=>{const i=t[m]();n.add(i.subscribe({next(t){n.add(e.schedule(()=>r.next(t)))},error(t){n.add(e.schedule(()=>r.error(t)))},complete(){n.add(e.schedule(()=>r.complete()))}}))})),n})}(t,e);if(L(t))return function(t,e){return new y(r=>{const n=new d;return n.add(e.schedule(()=>t.then(t=>{n.add(e.schedule(()=>{r.next(t),n.add(e.schedule(()=>r.complete()))}))},t=>{n.add(e.schedule(()=>r.error(t)))}))),n})}(t,e);if(O(t))return M(t,e);if(function(t){return t&&"function"==typeof t[I]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new y(r=>{const n=new d;let i;return n.add(()=>{i&&"function"==typeof i.return&&i.return()}),n.add(e.schedule(()=>{i=t[I](),n.add(e.schedule(function(){if(r.closed)return;let t,e;try{const r=i.next();t=r.value,e=r.done}catch(n){return void r.error(n)}e?r.complete():(r.next(t),this.schedule())}))})),n})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof y?t:new y(P(t))}class N extends p{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class U extends p{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function B(t,e){if(e.closed)return;if(t instanceof y)return t.subscribe(e);let r;try{r=P(t)(e)}catch(n){e.error(n)}return r}function j(t,e,r=Number.POSITIVE_INFINITY){return"function"==typeof e?n=>n.pipe(j((r,n)=>F(t(r,n)).pipe(x((t,i)=>e(r,t,n,i))),r)):("number"==typeof e&&(r=e),e=>e.lift(new V(t,r)))}class V{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new G(t,this.project,this.concurrent))}}class G extends U{constructor(t,e,r=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(e)}_innerSub(t){const e=new N(this),r=this.destination;r.add(e);const n=B(t,e);n!==e&&r.add(n)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(t=Number.POSITIVE_INFINITY){return j(v,t)}function K(t,e){return e?M(t,e):new y(R(t))}function $(){return function(t){return t.lift(new z(t))}}class z{constructor(t){this.connectable=t}call(t,e){const{connectable:r}=this;r._refCount++;const n=new q(t,r),i=e.subscribe(n);return n.closed||(n.connection=r.connect()),i}}class q extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:r}=this,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}class W extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new d,t.add(this.source.subscribe(new X(this.getSubject(),this))),t.closed&&(this._connection=null,t=d.EMPTY)),t}refCount(){return $()(this)}}const Y=(()=>{const t=W.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class X extends E{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Z(){return new S}function Q(t){for(let e in t)if(t[e]===Q)return e;throw Error("Could not find renamed property on target object.")}function J(t,e){for(const r in e)e.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function tt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(tt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const r=e.indexOf("\n");return-1===r?e:e.substring(0,r)}function et(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const rt=Q({__forward_ref__:Q});function nt(t){return t.__forward_ref__=nt,t.toString=function(){return tt(this())},t}function it(t){return st(t)?t():t}function st(t){return"function"==typeof t&&t.hasOwnProperty(rt)&&t.__forward_ref__===nt}class at extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function ot(t){return"string"==typeof t?t:null==t?"":String(t)}function lt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ot(t)}function ut(t,e){const r=e?` in ${e}`:"";throw new at("201",`No provider for ${lt(t)} found${r}`)}function ct(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ht(t){return ft(t,gt)||ft(t,vt)}function ft(t,e){return t.hasOwnProperty(e)?t[e]:null}function pt(t){return t&&(t.hasOwnProperty(mt)||t.hasOwnProperty(yt))?t[mt]:null}const gt=Q({"\u0275prov":Q}),mt=Q({"\u0275inj":Q}),vt=Q({ngInjectableDef:Q}),yt=Q({ngInjectorDef:Q});var _t=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let bt;function wt(t){const e=bt;return bt=t,e}function Et(t,e,r){const n=ht(t);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:r&_t.Optional?null:void 0!==e?e:void ut(tt(t),"Injector")}function St(t){return{toString:t}.toString()}var Tt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),kt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const xt="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,At="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Rt="undefined"!=typeof global&&global,Dt=xt||Rt||Ct||At,It={},Ot=[],Lt=Q({"\u0275cmp":Q}),Pt=Q({"\u0275dir":Q}),Mt=Q({"\u0275pipe":Q}),Ft=Q({"\u0275mod":Q}),Nt=Q({"\u0275loc":Q}),Ut=Q({"\u0275fac":Q}),Bt=Q({__NG_ELEMENT_ID__:Q});let jt=0;function Vt(t){return St(()=>{const e={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Tt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||kt.Emulated,id:"c",styles:t.styles||Ot,_:null,setInput:null,schemas:t.schemas||null,tView:null},n=t.directives,i=t.features,s=t.pipes;return r.id+=jt++,r.inputs=zt(t.inputs,e),r.outputs=zt(t.outputs),i&&i.forEach(t=>t(r)),r.directiveDefs=n?()=>("function"==typeof n?n():n).map(Gt):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ht):null,r})}function Gt(t){return Wt(t)||function(t){return t[Pt]||null}(t)}function Ht(t){return function(t){return t[Mt]||null}(t)}const Kt={};function $t(t){const e={type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&St(()=>{Kt[t.id]=t.type}),e}function zt(t,e){if(null==t)return It;const r={};for(const n in t)if(t.hasOwnProperty(n)){let i=t[n],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),r[i]=n,e&&(e[i]=s)}return r}const qt=Vt;function Wt(t){return t[Lt]||null}function Yt(t,e){const r=t[Ft]||null;if(!r&&!0===e)throw new Error(`Type ${tt(t)} does not have '\u0275mod' property.`);return r}function Xt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Zt(t){return Array.isArray(t)&&!0===t[1]}function Qt(t){return 0!=(8&t.flags)}function Jt(t){return 2==(2&t.flags)}function te(t){return 1==(1&t.flags)}function ee(t){return null!==t.template}function re(t,e){return t.hasOwnProperty(Ut)?t[Ut]:null}class ne{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function ie(){return se}function se(t){return t.type.prototype.ngOnChanges&&(t.setInput=oe),ae}function ae(){const t=le(this),e=null==t?void 0:t.current;if(e){const r=t.previous;if(r===It)t.previous=e;else for(let t in e)r[t]=e[t];t.current=null,this.ngOnChanges(e)}}function oe(t,e,r,n){const i=le(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:It,current:null}),s=i.current||(i.current={}),a=i.previous,o=this.declaredInputs[r],l=a[o];s[o]=new ne(l&&l.currentValue,e,a===It),t[n]=e}function le(t){return t.__ngSimpleChanges__||null}let ue;function ce(t){return!!t.listen}ie.ngInherit=!0;const de={createRenderer:(t,e)=>void 0!==ue?ue:"undefined"!=typeof document?document:void 0};function he(t){for(;Array.isArray(t);)t=t[0];return t}function fe(t,e){return he(e[t])}function pe(t,e){return he(e[t.index])}function ge(t,e){return t.data[e]}function me(t,e){const r=e[t];return Xt(r)?r:r[0]}function ve(t){return 4==(4&t[2])}function ye(t){return 128==(128&t[2])}function _e(t,e){return null==e?null:t[e]}function be(t){t[18]=0}function we(t,e){t[5]+=e;let r=t,n=t[3];for(;null!==n&&(1===e&&1===r[5]||-1===e&&0===r[5]);)n[5]+=e,r=n,n=n[3]}const Ee={lFrame:Ke(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Se(){return Ee.bindingsEnabled}function Te(){return Ee.lFrame.lView}function ke(){return Ee.lFrame.tView}function xe(){let t=Ce();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ce(){return Ee.lFrame.currentTNode}function Ae(t,e){const r=Ee.lFrame;r.currentTNode=t,r.isParent=e}function Re(){return Ee.lFrame.isParent}function De(){Ee.lFrame.isParent=!1}function Ie(){return Ee.isInCheckNoChangesMode}function Oe(t){Ee.isInCheckNoChangesMode=t}function Le(){const t=Ee.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Pe(){return Ee.lFrame.bindingIndex++}function Me(t){const e=Ee.lFrame,r=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,r}function Fe(t,e){const r=Ee.lFrame;r.bindingIndex=r.bindingRootIndex=t,Ne(e)}function Ne(t){Ee.lFrame.currentDirectiveIndex=t}function Ue(){return Ee.lFrame.currentQueryIndex}function Be(t){Ee.lFrame.currentQueryIndex=t}function je(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Ve(t,e,r){if(r&_t.SkipSelf){let n=e,i=t;for(;n=n.parent,!(null!==n||r&_t.Host||(n=je(i),null===n)||(i=i[15],10&n.type)););if(null===n)return!1;e=n,t=i}const n=Ee.lFrame=He();return n.currentTNode=e,n.lView=t,!0}function Ge(t){const e=He(),r=t[1];Ee.lFrame=e,e.currentTNode=r.firstChild,e.lView=t,e.tView=r,e.contextLView=t,e.bindingIndex=r.bindingStartIndex,e.inI18n=!1}function He(){const t=Ee.lFrame,e=null===t?null:t.child;return null===e?Ke(t):e}function Ke(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function $e(){const t=Ee.lFrame;return Ee.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ze=$e;function qe(){const t=$e();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function We(){return Ee.lFrame.selectedIndex}function Ye(t){Ee.lFrame.selectedIndex=t}function Xe(){const t=Ee.lFrame;return ge(t.tView,t.selectedIndex)}function Ze(){Ee.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function Qe(t,e){for(let r=e.directiveStart,n=e.directiveEnd;r<n;r++){const e=t.data[r].type.prototype,{ngAfterContentInit:n,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:a,ngOnDestroy:o}=e;n&&(t.contentHooks||(t.contentHooks=[])).push(-r,n),i&&((t.contentHooks||(t.contentHooks=[])).push(r,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(r,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-r,s),a&&((t.viewHooks||(t.viewHooks=[])).push(r,a),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(r,a)),null!=o&&(t.destroyHooks||(t.destroyHooks=[])).push(r,o)}}function Je(t,e,r){rr(t,e,3,r)}function tr(t,e,r,n){(3&t[2])===r&&rr(t,e,r,n)}function er(t,e){let r=t[2];(3&r)===e&&(r&=2047,r+=1,t[2]=r)}function rr(t,e,r,n){const i=null!=n?n:-1,s=e.length-1;let a=0;for(let o=void 0!==n?65535&t[18]:0;o<s;o++)if("number"==typeof e[o+1]){if(a=e[o],null!=n&&a>=n)break}else e[o]<0&&(t[18]+=65536),(a<i||-1==i)&&(nr(t,r,e,o),t[18]=(4294901760&t[18])+o+2),o++}function nr(t,e,r,n){const i=r[n]<0,s=r[n+1],a=t[i?-r[n]:r[n]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class ir{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function sr(t,e,r){const n=ce(t);let i=0;for(;i<r.length;){const s=r[i];if("number"==typeof s){if(0!==s)break;i++;const a=r[i++],o=r[i++],l=r[i++];n?t.setAttribute(e,o,l,a):e.setAttributeNS(a,o,l)}else{const a=s,o=r[++i];or(a)?n&&t.setProperty(e,a,o):n?t.setAttribute(e,a,o):e.setAttribute(a,o),i++}}return i}function ar(t){return 3===t||4===t||6===t}function or(t){return 64===t.charCodeAt(0)}function lr(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let r=-1;for(let n=0;n<e.length;n++){const i=e[n];"number"==typeof i?r=i:0===r||ur(t,r,i,null,-1===r||2===r?e[++n]:null)}}return t}function ur(t,e,r,n,i){let s=0,a=t.length;if(-1===e)a=-1;else for(;s<t.length;){const r=t[s++];if("number"==typeof r){if(r===e){a=-1;break}if(r>e){a=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===r){if(null===n)return void(null!==i&&(t[s+1]=i));if(n===t[s+1])return void(t[s+2]=i)}s++,null!==n&&s++,null!==i&&s++}-1!==a&&(t.splice(a,0,e),s=a+1),t.splice(s++,0,r),null!==n&&t.splice(s++,0,n),null!==i&&t.splice(s++,0,i)}function cr(t){return-1!==t}function dr(t){return 32767&t}function hr(t,e){let r=t>>16,n=e;for(;r>0;)n=n[15],r--;return n}let fr=!0;function pr(t){const e=fr;return fr=t,e}let gr=0;function mr(t,e){const r=yr(t,e);if(-1!==r)return r;const n=e[1];n.firstCreatePass&&(t.injectorIndex=e.length,vr(n.data,t),vr(e,null),vr(n.blueprint,null));const i=_r(t,e),s=t.injectorIndex;if(cr(i)){const t=dr(i),r=hr(i,e),n=r[1].data;for(let i=0;i<8;i++)e[s+i]=r[t+i]|n[t+i]}return e[s+8]=i,s}function vr(t,e){t.push(0,0,0,0,0,0,0,0,e)}function yr(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function _r(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=0,n=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(n=2===e?t.declTNode:1===e?i[6]:null,null===n)return-1;if(r++,i=i[15],-1!==n.injectorIndex)return n.injectorIndex|r<<16}return-1}function br(t,e,r){!function(t,e,r){let n;"string"==typeof r?n=r.charCodeAt(0)||0:r.hasOwnProperty(Bt)&&(n=r[Bt]),null==n&&(n=r[Bt]=gr++);const i=255&n;e.data[t+(i>>5)]|=1<<i}(t,e,r)}function wr(t,e,r){if(r&_t.Optional)return t;ut(e,"NodeInjector")}function Er(t,e,r,n){if(r&_t.Optional&&void 0===n&&(n=null),0==(r&(_t.Self|_t.Host))){const i=t[9],s=wt(void 0);try{return i?i.get(e,n,r&_t.Optional):Et(e,n,r&_t.Optional)}finally{wt(s)}}return wr(n,e,r)}function Sr(t,e,r,n=_t.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Bt)?t[Bt]:void 0;return"number"==typeof e?e>=0?255&e:kr:e}(r);if("function"==typeof s){if(!Ve(e,t,n))return n&_t.Host?wr(i,r,n):Er(e,r,n,i);try{const t=s(n);if(null!=t||n&_t.Optional)return t;ut(r)}finally{ze()}}else if("number"==typeof s){let i=null,a=yr(t,e),o=-1,l=n&_t.Host?e[16][6]:null;for((-1===a||n&_t.SkipSelf)&&(o=-1===a?_r(t,e):e[a+8],-1!==o&&Dr(n,!1)?(i=e[1],a=dr(o),e=hr(o,e)):a=-1);-1!==a;){const t=e[1];if(Rr(s,a,t.data)){const t=xr(a,e,r,i,n,l);if(t!==Tr)return t}o=e[a+8],-1!==o&&Dr(n,e[1].data[a+8]===l)&&Rr(s,a,e)?(i=t,a=dr(o),e=hr(o,e)):a=-1}}}return Er(e,r,n,i)}const Tr={};function kr(){return new Ir(xe(),Te())}function xr(t,e,r,n,i,s){const a=e[1],o=a.data[t+8],l=Cr(o,a,r,null==n?Jt(o)&&fr:n!=a&&0!=(3&o.type),i&_t.Host&&s===o);return null!==l?Ar(e,a,l,o):Tr}function Cr(t,e,r,n,i){const s=t.providerIndexes,a=e.data,o=1048575&s,l=t.directiveStart,u=s>>20,c=i?o+u:t.directiveEnd;for(let d=n?o:o+u;d<c;d++){const t=a[d];if(d<l&&r===t||d>=l&&t.type===r)return d}if(i){const t=a[l];if(t&&ee(t)&&t.type===r)return l}return null}function Ar(t,e,r,n){let i=t[r];const s=e.data;if(i instanceof ir){const a=i;a.resolving&&function(t,e){throw new at("200",`Circular dependency in DI detected for ${t}`)}(lt(s[r]));const o=pr(a.canSeeViewProviders);a.resolving=!0;const l=a.injectImpl?wt(a.injectImpl):null;Ve(t,n,_t.Default);try{i=t[r]=a.factory(void 0,s,t,n),e.firstCreatePass&&r>=n.directiveStart&&function(t,e,r){const{ngOnChanges:n,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(n){const n=se(e);(r.preOrderHooks||(r.preOrderHooks=[])).push(t,n),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,n)}i&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-t,i),s&&((r.preOrderHooks||(r.preOrderHooks=[])).push(t,s),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,s))}(r,s[r],e)}finally{null!==l&&wt(l),pr(o),a.resolving=!1,ze()}}return i}function Rr(t,e,r){return!!(r[e+(t>>5)]&1<<t)}function Dr(t,e){return!(t&_t.Self||t&_t.Host&&e)}class Ir{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Sr(this._tNode,this._lView,t,void 0,e)}}function Or(t){return st(t)?()=>{const e=Or(it(t));return e&&e()}:re(t)}function Lr(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const r=t.attrs;if(r){const t=r.length;let n=0;for(;n<t;){const i=r[n];if(ar(i))break;if(0===i)n+=2;else if("number"==typeof i)for(n++;n<t&&"string"==typeof r[n];)n++;else{if(i===e)return r[n+1];n+=2}}}return null}(xe(),t)}function Pr(t,e,r){return St(()=>{const n=function(t){return function(...e){if(t){const r=t(...e);for(const t in r)this[t]=r[t]}}}(e);function i(...t){if(this instanceof i)return n.apply(this,t),this;const e=new i(...t);return r.annotation=e,r;function r(t,r,n){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(e),t}}return r&&(i.prototype=Object.create(r.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Mr{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ct({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Fr=new Mr("AnalyzeForEntryComponents"),Nr=Function;function Ur(t,e){void 0===e&&(e=t);for(let r=0;r<t.length;r++){let n=t[r];Array.isArray(n)?(e===t&&(e=t.slice(0,r)),Ur(n,e)):e!==t&&e.push(n)}return e}function Br(t,e){t.forEach(t=>Array.isArray(t)?Br(t,e):e(t))}function jr(t,e,r){e>=t.length?t.push(r):t.splice(e,0,r)}function Vr(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Gr(t,e){const r=[];for(let n=0;n<t;n++)r.push(e);return r}function Hr(t,e,r){let n=$r(t,e);return n>=0?t[1|n]=r:(n=~n,function(t,e,r,n){let i=t.length;if(i==e)t.push(r,n);else if(1===i)t.push(n,t[0]),t[0]=r;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=r,t[e+1]=n}}(t,n,e,r)),n}function Kr(t,e){const r=$r(t,e);if(r>=0)return t[1|r]}function $r(t,e){return function(t,e,r){let n=0,i=t.length>>1;for(;i!==n;){const r=n+(i-n>>1),s=t[r<<1];if(e===s)return r<<1;s>e?i=r:n=r+1}return~(i<<1)}(t,e)}const zr={},qr=/\n/gm,Wr=Q({provide:String,useValue:Q});let Yr;function Xr(t){const e=Yr;return Yr=t,e}function Zr(t,e=_t.Default){if(void 0===Yr)throw new Error("inject() must be called from an injection context");return null===Yr?Et(t,void 0,e):Yr.get(t,e&_t.Optional?null:void 0,e)}function Qr(t,e=_t.Default){return(bt||Zr)(it(t),e)}const Jr=Qr;function tn(t){const e=[];for(let r=0;r<t.length;r++){const n=it(t[r]);if(Array.isArray(n)){if(0===n.length)throw new Error("Arguments array must have arguments.");let t,r=_t.Default;for(let e=0;e<n.length;e++){const i=n[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:r|=s:t=i}e.push(Qr(t,r))}else e.push(Qr(n))}return e}function en(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const rn=en(Pr("Inject",t=>({token:t})),-1),nn=en(Pr("Optional"),8),sn=en(Pr("SkipSelf"),4);function an(t,e){t.__ngContext__=e}function on(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ln(t){return t.ngDebugContext}function un(t){return t.ngOriginalError}function cn(t,...e){t.error(...e)}class dn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),r=this._findContext(t),n=function(t){return t.ngErrorLogger||cn}(t);n(this._console,"ERROR",t),e&&n(this._console,"ORIGINAL ERROR",e),r&&n(this._console,"ERROR CONTEXT",r)}_findContext(t){return t?ln(t)?ln(t):this._findContext(un(t)):null}_findOriginalError(t){let e=un(t);for(;e&&un(e);)e=un(e);return e}}const hn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dt))();function fn(t){return t instanceof Function?t():t}var pn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function gn(t,e){return(void 0)(t,e)}function mn(t){const e=t[3];return Zt(e)?e[3]:e}function vn(t){return _n(t[13])}function yn(t){return _n(t[4])}function _n(t){for(;null!==t&&!Zt(t);)t=t[4];return t}function bn(t,e,r,n,i){if(null!=n){let s,a=!1;Zt(n)?s=n:Xt(n)&&(a=!0,n=n[0]);const o=he(n);0===t&&null!==r?null==i?An(e,r,o):Cn(e,r,o,i||null,!0):1===t&&null!==r?Cn(e,r,o,i||null,!0):2===t?function(t,e,r){const n=Dn(t,e);n&&function(t,e,r,n){ce(t)?t.removeChild(e,r,n):e.removeChild(r)}(t,n,e,r)}(e,o,a):3===t&&e.destroyNode(o),null!=s&&function(t,e,r,n,i){const s=r[7];s!==he(r)&&bn(e,t,n,s,i);for(let a=10;a<r.length;a++){const i=r[a];Un(i[1],i,t,e,n,s)}}(e,t,s,r,i)}}function wn(t,e,r){return ce(t)?t.createElement(e,r):null===r?t.createElement(e):t.createElementNS(r,e)}function En(t,e){const r=t[9],n=r.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,we(i,-1)),r.splice(n,1)}function Sn(t,e){if(t.length<=10)return;const r=10+e,n=t[r];if(n){const s=n[17];null!==s&&s!==t&&En(s,n),e>0&&(t[r-1][4]=n[4]);const a=Vr(t,10+e);Un(n[1],i=n,i[11],2,null,null),i[0]=null,i[6]=null;const o=a[19];null!==o&&o.detachView(a[1]),n[3]=null,n[4]=null,n[2]&=-129}var i;return n}function Tn(t,e){if(!(256&e[2])){const r=e[11];ce(r)&&r.destroyNode&&Un(t,e,r,3,null,null),function(t){let e=t[13];if(!e)return kn(t[1],t);for(;e;){let r=null;if(Xt(e))r=e[13];else{const t=e[10];t&&(r=t)}if(!r){for(;e&&!e[4]&&e!==t;)Xt(e)&&kn(e[1],e),e=e[3];null===e&&(e=t),Xt(e)&&kn(e[1],e),r=e&&e[4]}e=r}}(e)}}function kn(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let n=0;n<r.length;n+=2){const t=e[r[n]];if(!(t instanceof ir)){const e=r[n+1];if(Array.isArray(e))for(let r=0;r<e.length;r+=2){const n=t[e[r]],i=e[r+1];try{i.call(n)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const r=t.cleanup,n=e[7];let i=-1;if(null!==r)for(let s=0;s<r.length-1;s+=2)if("string"==typeof r[s]){const t=r[s+1],a="function"==typeof t?t(e):he(e[t]),o=n[i=r[s+2]],l=r[s+3];"boolean"==typeof l?a.removeEventListener(r[s],o,l):l>=0?n[i=l]():n[i=-l].unsubscribe(),s+=2}else{const t=n[i=r[s+1]];r[s].call(t)}if(null!==n){for(let t=i+1;t<n.length;t++)(0,n[t])();e[7]=null}}(t,e),1===e[1].type&&ce(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&Zt(e[3])){r!==e[3]&&En(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function xn(t,e,r){return function(t,e,r){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return r[0];if(2&n.flags){const e=t.data[n.directiveStart].encapsulation;if(e===kt.None||e===kt.Emulated)return null}return pe(n,r)}(t,e.parent,r)}function Cn(t,e,r,n,i){ce(t)?t.insertBefore(e,r,n,i):e.insertBefore(r,n,i)}function An(t,e,r){ce(t)?t.appendChild(e,r):e.appendChild(r)}function Rn(t,e,r,n,i){null!==n?Cn(t,e,r,n,i):An(t,e,r)}function Dn(t,e){return ce(t)?t.parentNode(e):e.parentNode}function In(t,e,r){return On(t,e,r)}let On=function(t,e,r){return 40&t.type?pe(t,r):null};function Ln(t,e,r,n){const i=xn(t,n,e),s=e[11],a=In(n.parent||e[6],n,e);if(null!=i)if(Array.isArray(r))for(let o=0;o<r.length;o++)Rn(s,i,r[o],a,!1);else Rn(s,i,r,a,!1)}function Pn(t,e){if(null!==e){const r=e.type;if(3&r)return pe(e,t);if(4&r)return Fn(-1,t[e.index]);if(8&r){const r=e.child;if(null!==r)return Pn(t,r);{const r=t[e.index];return Zt(r)?Fn(-1,r):he(r)}}if(32&r)return gn(e,t)()||he(t[e.index]);{const r=Mn(t,e);return null!==r?Array.isArray(r)?r[0]:Pn(mn(t[16]),r):Pn(t,e.next)}}return null}function Mn(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Fn(t,e){const r=10+t+1;if(r<e.length){const t=e[r],n=t[1].firstChild;if(null!==n)return Pn(t,n)}return e[7]}function Nn(t,e,r,n,i,s,a){for(;null!=r;){const o=n[r.index],l=r.type;if(a&&0===e&&(o&&an(he(o),n),r.flags|=4),64!=(64&r.flags))if(8&l)Nn(t,e,r.child,n,i,s,!1),bn(e,t,i,o,s);else if(32&l){const a=gn(r,n);let l;for(;l=a();)bn(e,t,i,l,s);bn(e,t,i,o,s)}else 16&l?Bn(t,e,n,r,i,s):bn(e,t,i,o,s);r=a?r.projectionNext:r.next}}function Un(t,e,r,n,i,s){Nn(r,n,t.firstChild,e,i,s,!1)}function Bn(t,e,r,n,i,s){const a=r[16],o=a[6].projection[n.projection];if(Array.isArray(o))for(let l=0;l<o.length;l++)bn(e,t,i,o[l],s);else Nn(t,e,o,a[3],i,s,!0)}function jn(t,e,r){ce(t)?t.setAttribute(e,"style",r):e.style.cssText=r}function Vn(t,e,r){ce(t)?""===r?t.removeAttribute(e,"class"):t.setAttribute(e,"class",r):e.className=r}function Gn(t,e,r){let n=t.length;for(;;){const i=t.indexOf(e,r);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const r=e.length;if(i+r===n||t.charCodeAt(i+r)<=32)return i}r=i+1}}function Hn(t,e,r){let n=0;for(;n<t.length;){let i=t[n++];if(r&&"class"===i){if(i=t[n],-1!==Gn(i.toLowerCase(),e,0))return!0}else if(1===i){for(;n<t.length&&"string"==typeof(i=t[n++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Kn(t){return 4===t.type&&"ng-template"!==t.value}function $n(t,e,r){return e===(4!==t.type||r?t.value:"ng-template")}function zn(t,e,r){let n=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(ar(t[e]))return e;return t.length}(i);let a=!1;for(let o=0;o<e.length;o++){const l=e[o];if("number"!=typeof l){if(!a)if(4&n){if(n=2|1&n,""!==l&&!$n(t,l,r)||""===l&&1===e.length){if(qn(n))return!1;a=!0}}else{const u=8&n?l:e[++o];if(8&n&&null!==t.attrs){if(!Hn(t.attrs,u,r)){if(qn(n))return!1;a=!0}continue}const c=Wn(8&n?"class":l,i,Kn(t),r);if(-1===c){if(qn(n))return!1;a=!0;continue}if(""!==u){let t;t=c>s?"":i[c+1].toLowerCase();const e=8&n?t:null;if(e&&-1!==Gn(e,u,0)||2&n&&u!==t){if(qn(n))return!1;a=!0}}}}else{if(!a&&!qn(n)&&!qn(l))return!1;if(a&&qn(l))continue;a=!1,n=l|1&n}}return qn(n)||a}function qn(t){return 0==(1&t)}function Wn(t,e,r,n){if(null===e)return-1;let i=0;if(n||!r){let r=!1;for(;i<e.length;){const n=e[i];if(n===t)return i;if(3===n||6===n)r=!0;else{if(1===n||2===n){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===n)break;if(0===n){i+=4;continue}}i+=r?1:2}return-1}return function(t,e){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const n=t[r];if("number"==typeof n)return-1;if(n===e)return r;r++}return-1}(e,t)}function Yn(t,e,r=!1){for(let n=0;n<e.length;n++)if(zn(t,e[n],r))return!0;return!1}function Xn(t,e){t:for(let r=0;r<e.length;r++){const n=e[r];if(t.length===n.length){for(let e=0;e<t.length;e++)if(t[e]!==n[e])continue t;return!0}}return!1}function Zn(t,e){return t?":not("+e.trim()+")":e}function Qn(t){let e=t[0],r=1,n=2,i="",s=!1;for(;r<t.length;){let a=t[r];if("string"==typeof a)if(2&n){const e=t[++r];i+="["+a+(e.length>0?'="'+e+'"':"")+"]"}else 8&n?i+="."+a:4&n&&(i+=" "+a);else""===i||qn(a)||(e+=Zn(s,i),i=""),n=a,s=s||!qn(n);r++}return""!==i&&(e+=Zn(s,i)),e}const Jn={};function ti(t){ei(ke(),Te(),We()+t,Ie())}function ei(t,e,r,n){if(!n)if(3==(3&e[2])){const n=t.preOrderCheckHooks;null!==n&&Je(e,n,r)}else{const n=t.preOrderHooks;null!==n&&tr(e,n,0,r)}Ye(r)}function ri(t,e){return t<<17|e<<2}function ni(t){return t>>17&32767}function ii(t){return 2|t}function si(t){return(131068&t)>>2}function ai(t,e){return-131069&t|e<<2}function oi(t){return 1|t}function li(t,e){const r=t.contentQueries;if(null!==r)for(let n=0;n<r.length;n+=2){const i=r[n],s=r[n+1];if(-1!==s){const r=t.data[s];Be(i),r.contentQueries(2,e[s],s)}}}function ui(t,e,r,n,i,s,a,o,l,u){const c=e.blueprint.slice();return c[0]=i,c[2]=140|n,be(c),c[3]=c[15]=t,c[8]=r,c[10]=a||t&&t[10],c[11]=o||t&&t[11],c[12]=l||t&&t[12]||null,c[9]=u||t&&t[9]||null,c[6]=s,c[16]=2==e.type?t[16]:c,c}function ci(t,e,r,n,i){let s=t.data[e];if(null===s)s=function(t,e,r,n,i){const s=Ce(),a=Re(),o=t.data[e]=function(t,e,r,n,i,s){return{type:r,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,r,e,n,i);return null===t.firstChild&&(t.firstChild=o),null!==s&&(a?null==s.child&&null!==o.parent&&(s.child=o):null===s.next&&(s.next=o)),o}(t,e,r,n,i),Ee.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=r,s.value=n,s.attrs=i;const t=function(){const t=Ee.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return Ae(s,!0),s}function di(t,e,r,n){if(0===r)return-1;const i=e.length;for(let s=0;s<r;s++)e.push(n),t.blueprint.push(n),t.data.push(null);return i}function hi(t,e,r){Ge(e);try{const n=t.viewQuery;null!==n&&Vi(1,n,r);const i=t.template;null!==i&&gi(t,e,i,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&li(t,e),t.staticViewQueries&&Vi(2,t.viewQuery,r);const s=t.components;null!==s&&function(t,e){for(let r=0;r<e.length;r++)Fi(t,e[r])}(e,s)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),n}finally{e[2]&=-5,qe()}}function fi(t,e,r,n){const i=e[2];if(256==(256&i))return;Ge(e);const s=Ie();try{be(e),Ee.lFrame.bindingIndex=t.bindingStartIndex,null!==r&&gi(t,e,r,2,n);const a=3==(3&i);if(!s)if(a){const r=t.preOrderCheckHooks;null!==r&&Je(e,r,null)}else{const r=t.preOrderHooks;null!==r&&tr(e,r,0,null),er(e,0)}if(function(t){for(let e=vn(t);null!==e;e=yn(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const r=t[e],n=r[3];0==(1024&r[2])&&we(n,1),r[2]|=1024}}}(e),function(t){for(let e=vn(t);null!==e;e=yn(e))for(let t=10;t<e.length;t++){const r=e[t],n=r[1];ye(r)&&fi(n,r,n.template,r[8])}}(e),null!==t.contentQueries&&li(t,e),!s)if(a){const r=t.contentCheckHooks;null!==r&&Je(e,r)}else{const r=t.contentHooks;null!==r&&tr(e,r,1),er(e,1)}!function(t,e){const r=t.hostBindingOpCodes;if(null!==r)try{for(let t=0;t<r.length;t++){const n=r[t];if(n<0)Ye(~n);else{const i=n,s=r[++t],a=r[++t];Fe(s,i),a(2,e[i])}}}finally{Ye(-1)}}(t,e);const o=t.components;null!==o&&function(t,e){for(let r=0;r<e.length;r++)Pi(t,e[r])}(e,o);const l=t.viewQuery;if(null!==l&&Vi(2,l,n),!s)if(a){const r=t.viewCheckHooks;null!==r&&Je(e,r)}else{const r=t.viewHooks;null!==r&&tr(e,r,2),er(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,we(e[3],-1))}finally{qe()}}function pi(t,e,r,n){const i=e[10],s=!Ie(),a=ve(e);try{s&&!a&&i.begin&&i.begin(),a&&hi(t,e,n),fi(t,e,r,n)}finally{s&&!a&&i.end&&i.end()}}function gi(t,e,r,n,i){const s=We(),a=2&n;try{Ye(-1),a&&e.length>20&&ei(t,e,20,Ie()),r(n,i)}finally{Ye(s)}}function mi(t,e,r){Se()&&(function(t,e,r,n){const i=r.directiveStart,s=r.directiveEnd;t.firstCreatePass||mr(r,e),an(n,e);const a=r.initialInputs;for(let o=i;o<s;o++){const n=t.data[o],s=ee(n);s&&Di(e,r,n);const l=Ar(e,t,o,r);an(l,e),null!==a&&Ii(0,o-i,l,n,0,a),s&&(me(r.index,e)[8]=l)}}(t,e,r,pe(r,e)),128==(128&r.flags)&&function(t,e,r){const n=r.directiveStart,i=r.directiveEnd,s=r.index,a=Ee.lFrame.currentDirectiveIndex;try{Ye(s);for(let r=n;r<i;r++){const n=t.data[r],i=e[r];Ne(r),null===n.hostBindings&&0===n.hostVars&&null===n.hostAttrs||ki(n,i)}}finally{Ye(-1),Ne(a)}}(t,e,r))}function vi(t,e,r=pe){const n=e.localNames;if(null!==n){let i=e.index+1;for(let s=0;s<n.length;s+=2){const a=n[s+1],o=-1===a?r(e,t):t[a];t[i++]=o}}}function yi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=_i(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function _i(t,e,r,n,i,s,a,o,l,u){const c=20+n,d=c+i,h=function(t,e){const r=[];for(let n=0;n<e;n++)r.push(n<t?null:Jn);return r}(c,d),f="function"==typeof u?u():u;return h[1]={type:t,blueprint:h,template:r,queries:null,viewQuery:o,declTNode:e,data:h.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function bi(t,e,r,n){const i=Hi(e);null===r?i.push(n):(i.push(r),t.firstCreatePass&&Ki(t).push(n,i.length-1))}function wi(t,e,r){for(let n in t)if(t.hasOwnProperty(n)){const i=t[n];(r=null===r?{}:r).hasOwnProperty(n)?r[n].push(e,i):r[n]=[e,i]}return r}function Ei(t,e,r,n,i,s,a,o){const l=pe(e,r);let u,c=e.inputs;var d;!o&&null!=c&&(u=c[n])?(zi(t,r,u,n,i),Jt(e)&&function(t,e){const r=me(e,t);16&r[2]||(r[2]|=64)}(r,e.index)):3&e.type&&(n="class"===(d=n)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d,i=null!=a?a(i,e.value||"",n):i,ce(s)?s.setProperty(l,n,i):or(n)||(l.setProperty?l.setProperty(n,i):l[n]=i))}function Si(t,e,r,n){let i=!1;if(Se()){const s=function(t,e,r){const n=t.directiveRegistry;let i=null;if(n)for(let s=0;s<n.length;s++){const a=n[s];Yn(r,a.selectors,!1)&&(i||(i=[]),br(mr(r,e),t,a.type),ee(a)?(xi(t,r),i.unshift(a)):i.push(a))}return i}(t,e,r),a=null===n?null:{"":-1};if(null!==s){i=!0,Ai(r,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let n=!1,o=!1,l=di(t,e,s.length,null);for(let i=0;i<s.length;i++){const u=s[i];r.mergedAttrs=lr(r.mergedAttrs,u.hostAttrs),Ri(t,r,e,l,u),Ci(l,u,a),null!==u.contentQueries&&(r.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(r.flags|=128);const c=u.type.prototype;!n&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(r.index),n=!0),o||!c.ngOnChanges&&!c.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(r.index),o=!0),l++}!function(t,e){const r=e.directiveEnd,n=t.data,i=e.attrs,s=[];let a=null,o=null;for(let l=e.directiveStart;l<r;l++){const t=n[l],r=t.inputs,u=null===i||Kn(e)?null:Oi(r,i);s.push(u),a=wi(r,l,a),o=wi(t.outputs,l,o)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=a,e.outputs=o}(t,r)}a&&function(t,e,r){if(e){const n=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=r[e[t+1]];if(null==i)throw new at("301",`Export of name '${e[t+1]}' not found!`);n.push(e[t],i)}}}(r,n,a)}return r.mergedAttrs=lr(r.mergedAttrs,r.attrs),i}function Ti(t,e,r,n,i,s){const a=s.hostBindings;if(a){let r=t.hostBindingOpCodes;null===r&&(r=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const r=t[--e];if("number"==typeof r&&r<0)return r}return 0})(r)!=s&&r.push(s),r.push(n,i,a)}}function ki(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function xi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ci(t,e,r){if(r){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)r[e.exportAs[n]]=t;ee(e)&&(r[""]=t)}}function Ai(t,e,r){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+r,t.providerIndexes=e}function Ri(t,e,r,n,i){t.data[n]=i;const s=i.factory||(i.factory=re(i.type)),a=new ir(s,ee(i),null);t.blueprint[n]=a,r[n]=a,Ti(t,e,0,n,di(t,r,i.hostVars,Jn),i)}function Di(t,e,r){const n=pe(e,t),i=yi(r),s=t[10],a=Ni(t,ui(t,i,null,r.onPush?64:16,n,e,s,s.createRenderer(n,r),null,null));t[e.index]=a}function Ii(t,e,r,n,i,s){const a=s[e];if(null!==a){const t=n.setInput;for(let e=0;e<a.length;){const i=a[e++],s=a[e++],o=a[e++];null!==t?n.setInput(r,o,i,s):r[s]=o}}}function Oi(t,e){let r=null,n=0;for(;n<e.length;){const i=e[n];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===r&&(r=[]),r.push(i,t[i],e[n+1])),n+=2}else n+=2;else n+=4}return r}function Li(t,e,r,n){return new Array(t,!0,!1,e,null,0,n,r,null,null)}function Pi(t,e){const r=me(e,t);if(ye(r)){const t=r[1];80&r[2]?fi(t,r,t.template,r[8]):r[5]>0&&Mi(r)}}function Mi(t){for(let r=vn(t);null!==r;r=yn(r))for(let t=10;t<r.length;t++){const e=r[t];if(1024&e[2]){const t=e[1];fi(t,e,t.template,e[8])}else e[5]>0&&Mi(e)}const e=t[1].components;if(null!==e)for(let r=0;r<e.length;r++){const n=me(e[r],t);ye(n)&&n[5]>0&&Mi(n)}}function Fi(t,e){const r=me(e,t),n=r[1];!function(t,e){for(let r=e.length;r<t.blueprint.length;r++)e.push(t.blueprint[r])}(n,r),hi(n,r,r[8])}function Ni(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ui(t){for(;t;){t[2]|=64;const e=mn(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Bi(t,e,r){const n=e[10];n.begin&&n.begin();try{fi(t,e,t.template,r)}catch(i){throw $i(e,i),i}finally{n.end&&n.end()}}function ji(t){!function(t){for(let e=0;e<t.components.length;e++){const r=t.components[e],n=on(r),i=n[1];pi(i,n,i.template,r)}}(t[8])}function Vi(t,e,r){Be(0),e(t,r)}const Gi=(()=>Promise.resolve(null))();function Hi(t){return t[7]||(t[7]=[])}function Ki(t){return t.cleanup||(t.cleanup=[])}function $i(t,e){const r=t[9],n=r?r.get(dn,null):null;n&&n.handleError(e)}function zi(t,e,r,n,i){for(let s=0;s<r.length;){const a=r[s++],o=r[s++],l=e[a],u=t.data[a];null!==u.setInput?u.setInput(l,i,n,o):l[o]=i}}function qi(t,e,r){const n=fe(e,t);!function(t,e,r){ce(t)?t.setValue(e,r):e.textContent=r}(t[11],n,r)}function Wi(t,e,r){let n=r?t.styles:null,i=r?t.classes:null,s=0;if(null!==e)for(let a=0;a<e.length;a++){const t=e[a];"number"==typeof t?s=t:1==s?i=et(i,t):2==s&&(n=et(n,t+": "+e[++a]+";"))}r?t.styles=n:t.stylesWithoutHost=n,r?t.classes=i:t.classesWithoutHost=i}const Yi=new Mr("INJECTOR",-1);class Xi{get(t,e=zr){if(e===zr){const e=new Error(`NullInjectorError: No provider for ${tt(t)}!`);throw e.name="NullInjectorError",e}return e}}const Zi=new Mr("Set Injector scope."),Qi={},Ji={};let ts;function es(){return void 0===ts&&(ts=new Xi),ts}function rs(t,e=null,r=null,n){return new ns(t,r,e||es(),n)}class ns{constructor(t,e,r,n=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Br(e,r=>this.processProvider(r,t,e)),Br([t],t=>this.processInjectorType(t,[],i)),this.records.set(Yi,as(void 0,this));const s=this.records.get(Zi);this.scope=null!=s?s.value:null,this.source=n||("object"==typeof t?null:tt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=zr,r=_t.Default){this.assertNotDestroyed();const n=Xr(this);try{if(!(r&_t.SkipSelf)){let e=this.records.get(t);if(void 0===e){const r=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Mr)&&ht(t);e=r&&this.injectableDefInScope(r)?as(is(t),Qi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(r&_t.Self?es():this.parent).get(t,e=r&_t.Optional&&e===zr?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(tt(t)),n)throw s;return function(t,e,r,n){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,r,n=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=tt(e);if(Array.isArray(e))i=e.map(tt).join(" -> ");else if("object"==typeof e){let t=[];for(let r in e)if(e.hasOwnProperty(r)){let n=e[r];t.push(r+":"+("string"==typeof n?JSON.stringify(n):tt(n)))}i=`{${t.join(", ")}}`}return`${r}${n?"("+n+")":""}[${i}]: ${t.replace(qr,"\n  ")}`}("\n"+t.message,i,r,n),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{Xr(n)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,r)=>t.push(tt(r))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,r){if(!(t=it(t)))return!1;let n=pt(t);const i=null==n&&t.ngModule||void 0,s=void 0===i?t:i,a=-1!==r.indexOf(s);if(void 0!==i&&(n=pt(i)),null==n)return!1;if(null!=n.imports&&!a){let t;r.push(s);try{Br(n.imports,n=>{this.processInjectorType(n,e,r)&&(void 0===t&&(t=[]),t.push(n))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:r,providers:n}=t[e];Br(n,t=>this.processProvider(t,r,n||Ot))}}this.injectorDefTypes.add(s);const o=re(s)||(()=>new s);this.records.set(s,as(o,Qi));const l=n.providers;if(null!=l&&!a){const e=t;Br(l,t=>this.processProvider(t,e,l))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,r){let n=ls(t=it(t))?t:it(t&&t.provide);const i=function(t,e,r){return os(t)?as(void 0,t.useValue):as(ss(t),Qi)}(t);if(ls(t)||!0!==t.multi)this.records.get(n);else{let e=this.records.get(n);e||(e=as(void 0,Qi,!0),e.factory=()=>tn(e.multi),this.records.set(n,e)),n=t,e.multi.push(t)}this.records.set(n,i)}hydrate(t,e){var r;return e.value===Qi&&(e.value=Ji,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(r=e.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=it(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function is(t){const e=ht(t),r=null!==e?e.factory:re(t);if(null!==r)return r;if(t instanceof Mr)throw new Error(`Token ${tt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=Gr(e,"?");throw new Error(`Can't resolve all parameters for ${tt(t)}: (${r.join(", ")}).`)}const r=function(t){const e=t&&(t[gt]||t[vt]);if(e){const r=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),e}return null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new Error("unreachable")}function ss(t,e,r){let n;if(ls(t)){const e=it(t);return re(e)||is(e)}if(os(t))n=()=>it(t.useValue);else if((i=t)&&i.useFactory)n=()=>t.useFactory(...tn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))n=()=>Qr(it(t.useExisting));else{const e=it(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return re(e)||is(e);n=()=>new e(...tn(t.deps))}var i;return n}function as(t,e,r=!1){return{factory:t,value:e,multi:r?[]:void 0}}function os(t){return null!==t&&"object"==typeof t&&Wr in t}function ls(t){return"function"==typeof t}const us=function(t,e,r){return function(t,e=null,r=null,n){const i=rs(t,e,r,n);return i._resolveInjectorDefTypes(),i}({name:r},e,t,r)};let cs=(()=>{class t{static create(t,e){return Array.isArray(t)?us(t,e,""):us(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=zr,t.NULL=new Xi,t.\u0275prov=ct({token:t,providedIn:"any",factory:()=>Qr(Yi)}),t.__NG_ELEMENT_ID__=-1,t})();function ds(t,e){Qe(on(t)[1],xe())}function hs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,r=!0;const n=[t];for(;e;){let i;if(ee(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(r){n.push(i);const e=t;e.inputs=fs(t.inputs),e.declaredInputs=fs(t.declaredInputs),e.outputs=fs(t.outputs);const r=i.hostBindings;r&&ms(t,r);const s=i.viewQuery,a=i.contentQueries;if(s&&ps(t,s),a&&gs(t,a),J(t.inputs,i.inputs),J(t.declaredInputs,i.declaredInputs),J(t.outputs,i.outputs),ee(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let n=0;n<e.length;n++){const i=e[n];i&&i.ngInherit&&i(t),i===hs&&(r=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,r=null;for(let n=t.length-1;n>=0;n--){const i=t[n];i.hostVars=e+=i.hostVars,i.hostAttrs=lr(i.hostAttrs,r=lr(r,i.hostAttrs))}}(n)}function fs(t){return t===It?{}:t===Ot?[]:t}function ps(t,e){const r=t.viewQuery;t.viewQuery=r?(t,n)=>{e(t,n),r(t,n)}:e}function gs(t,e){const r=t.contentQueries;t.contentQueries=r?(t,n,i)=>{e(t,n,i),r(t,n,i)}:e}function ms(t,e){const r=t.hostBindings;t.hostBindings=r?(t,n)=>{e(t,n),r(t,n)}:e}let vs=null;function ys(){if(!vs){const t=Dt.Symbol;if(t&&t.iterator)vs=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const r=t[e];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(vs=r)}}}return vs}function _s(t){return!!bs(t)&&(Array.isArray(t)||!(t instanceof Map)&&ys()in t)}function bs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ws(t,e,r){return t[e]=r}function Es(t,e,r){return!Object.is(t[e],r)&&(t[e]=r,!0)}function Ss(t,e,r,n){const i=Te();return Es(i,Pe(),e)&&(ke(),function(t,e,r,n,i,s){const a=pe(t,e);!function(t,e,r,n,i,s,a){if(null==s)ce(t)?t.removeAttribute(e,i,r):e.removeAttribute(i);else{const o=null==a?ot(s):a(s,n||"",i);ce(t)?t.setAttribute(e,i,o,r):r?e.setAttributeNS(r,i,o):e.setAttribute(i,o)}}(e[11],a,s,t.value,r,n,i)}(Xe(),i,t,e,r,n)),Ss}function Ts(t,e,r,n,i,s,a,o){const l=Te(),u=ke(),c=t+20,d=u.firstCreatePass?function(t,e,r,n,i,s,a,o,l){const u=e.consts,c=ci(e,t,4,a||null,_e(u,o));Si(e,r,c,_e(u,l)),Qe(e,c);const d=c.tViews=_i(2,c,n,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,r,n,i,s,a):u.data[c];Ae(d,!1);const h=l[11].createComment("");Ln(u,l,h,d),an(h,l),Ni(l,l[c]=Li(h,l,h,d)),te(d)&&mi(u,l,d),null!=a&&vi(l,d,o)}function ks(t){return function(t,e){return t[e]}(Ee.lFrame.contextLView,20+t)}function xs(t,e=_t.Default){const r=Te();return null===r?Qr(t,e):Sr(xe(),r,it(t),e)}function Cs(t,e,r){const n=Te();return Es(n,Pe(),e)&&Ei(ke(),Xe(),n,t,e,n[11],r,!1),Cs}function As(t,e,r,n,i){const s=i?"class":"style";zi(t,r,e.inputs[s],s,n)}function Rs(t,e,r,n){const i=Te(),s=ke(),a=20+t,o=i[11],l=i[a]=wn(o,e,Ee.lFrame.currentNamespace),u=s.firstCreatePass?function(t,e,r,n,i,s,a){const o=e.consts,l=ci(e,t,2,i,_e(o,s));return Si(e,r,l,_e(o,a)),null!==l.attrs&&Wi(l,l.attrs,!1),null!==l.mergedAttrs&&Wi(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(a,s,i,0,e,r,n):s.data[a];Ae(u,!0);const c=u.mergedAttrs;null!==c&&sr(o,l,c);const d=u.classes;null!==d&&Vn(o,l,d);const h=u.styles;null!==h&&jn(o,l,h),64!=(64&u.flags)&&Ln(s,i,l,u),0===Ee.lFrame.elementDepthCount&&an(l,i),Ee.lFrame.elementDepthCount++,te(u)&&(mi(s,i,u),function(t,e,r){if(Qt(e)){const n=e.directiveEnd;for(let i=e.directiveStart;i<n;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,r[i],i)}}}(s,u,i)),null!==n&&vi(i,u)}function Ds(){let t=xe();Re()?De():(t=t.parent,Ae(t,!1));const e=t;Ee.lFrame.elementDepthCount--;const r=ke();r.firstCreatePass&&(Qe(r,t),Qt(t)&&r.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&As(r,e,Te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&As(r,e,Te(),e.stylesWithoutHost,!1)}function Is(t,e,r,n){Rs(t,e,r,n),Ds()}function Os(t){return!!t&&"function"==typeof t.then}const Ls=function(t){return!!t&&"function"==typeof t.subscribe};function Ps(t,e,r,n){const i=Te(),s=ke(),a=xe();return function(t,e,r,n,i,s,a,o){const l=te(n),u=t.firstCreatePass&&Ki(t),c=Hi(e);let d=!0;if(3&n.type){const h=pe(n,e),f=o?o(h):h,p=c.length,g=o?t=>o(he(t[n.index])):n.index;if(ce(r)){let a=null;if(!o&&l&&(a=function(t,e,r,n){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===r&&i[s+1]===n){const t=e[7],r=i[s+2];return t.length>r?t[r]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,n.index)),null!==a)(a.__ngLastListenerFn__||a).__ngNextListenerFn__=s,a.__ngLastListenerFn__=s,d=!1;else{s=Fs(n,e,0,s,!1);const t=r.listen(f,i,s);c.push(s,t),u&&u.push(i,g,p,p+1)}}else s=Fs(n,e,0,s,!0),f.addEventListener(i,s,a),c.push(s),u&&u.push(i,g,p,a)}else s=Fs(n,e,0,s,!1);const h=n.outputs;let f;if(d&&null!==h&&(f=h[i])){const t=f.length;if(t)for(let r=0;r<t;r+=2){const t=e[f[r]][f[r+1]].subscribe(s),a=c.length;c.push(s,t),u&&u.push(i,n.index,a,-(a+1))}}}(s,i,i[11],a,t,e,!!r,n),Ps}function Ms(t,e,r,n){try{return!1!==r(n)}catch(i){return $i(t,i),!1}}function Fs(t,e,r,n,i){return function r(s){if(s===Function)return n;const a=2&t.flags?me(t.index,e):e;0==(32&e[2])&&Ui(a);let o=Ms(e,0,n,s),l=r.__ngNextListenerFn__;for(;l;)o=Ms(e,0,l,s)&&o,l=l.__ngNextListenerFn__;return i&&!1===o&&(s.preventDefault(),s.returnValue=!1),o}}function Ns(t=1){return function(t){return(Ee.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ee.lFrame.contextLView))[8]}(t)}function Us(t,e){let r=null;const n=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===n?Yn(t,s,!0):Xn(n,s))return i}else r=i}return r}function Bs(t){const e=Te()[16][6];if(!e.projection){const r=e.projection=Gr(t?t.length:1,null),n=r.slice();let i=e.child;for(;null!==i;){const e=t?Us(i,t):0;null!==e&&(n[e]?n[e].projectionNext=i:r[e]=i,n[e]=i),i=i.next}}}function js(t,e=0,r){const n=Te(),i=ke(),s=ci(i,20+t,16,null,r||null);null===s.projection&&(s.projection=e),De(),64!=(64&s.flags)&&function(t,e,r){Bn(e[11],0,e,r,xn(t,r,e),In(r.parent||e[6],r,e))}(i,n,s)}function Vs(t,e,r,n,i){const s=t[r+1],a=null===e;let o=n?ni(s):si(s),l=!1;for(;0!==o&&(!1===l||a);){const r=t[o+1];Gs(t[o],e)&&(l=!0,t[o+1]=n?oi(r):ii(r)),o=n?ni(r):si(r)}l&&(t[r+1]=n?ii(s):oi(s))}function Gs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&$r(t,e)>=0}function Hs(t,e,r){return $s(t,e,r,!1),Hs}function Ks(t,e){return $s(t,e,null,!0),Ks}function $s(t,e,r,n){const i=Te(),s=ke(),a=Me(2);s.firstUpdatePass&&function(t,e,r,n){const i=t.data;if(null===i[r+1]){const s=i[We()],a=function(t,e){return e>=t.expandoStartIndex}(t,r);(function(t,e){return 0!=(t.flags&(e?16:32))})(s,n)&&null===e&&!a&&(e=!1),e=function(t,e,r,n){const i=function(t){const e=Ee.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=n?e.residualClasses:e.residualStyles;if(null===i)0===(n?e.classBindings:e.styleBindings)&&(r=qs(r=zs(null,t,e,r,n),e.attrs,n),s=null);else{const a=e.directiveStylingLast;if(-1===a||t[a]!==i)if(r=zs(i,t,e,r,n),null===s){let r=function(t,e,r){const n=r?e.classBindings:e.styleBindings;if(0!==si(n))return t[ni(n)]}(t,e,n);void 0!==r&&Array.isArray(r)&&(r=zs(null,t,e,r[1],n),r=qs(r,e.attrs,n),function(t,e,r,n){t[ni(r?e.classBindings:e.styleBindings)]=n}(t,e,n,r))}else s=function(t,e,r){let n;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)n=qs(n,t[s].hostAttrs,r);return qs(n,e.attrs,r)}(t,e,n)}return void 0!==s&&(n?e.residualClasses=s:e.residualStyles=s),r}(i,s,e,n),function(t,e,r,n,i,s){let a=s?e.classBindings:e.styleBindings,o=ni(a),l=si(a);t[n]=r;let u,c=!1;if(Array.isArray(r)){const t=r;u=t[1],(null===u||$r(t,u)>0)&&(c=!0)}else u=r;if(i)if(0!==l){const e=ni(t[o+1]);t[n+1]=ri(e,o),0!==e&&(t[e+1]=ai(t[e+1],n)),t[o+1]=131071&t[o+1]|n<<17}else t[n+1]=ri(o,0),0!==o&&(t[o+1]=ai(t[o+1],n)),o=n;else t[n+1]=ri(l,0),0===o?o=n:t[l+1]=ai(t[l+1],n),l=n;c&&(t[n+1]=ii(t[n+1])),Vs(t,u,n,!0),Vs(t,u,n,!1),function(t,e,r,n,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&$r(s,e)>=0&&(r[n+1]=oi(r[n+1]))}(e,u,t,n,s),a=ri(o,l),s?e.classBindings=a:e.styleBindings=a}(i,s,e,r,a,n)}}(s,t,a,n),e!==Jn&&Es(i,a,e)&&function(t,e,r,n,i,s,a,o){if(!(3&e.type))return;const l=t.data,u=l[o+1];Ys(1==(1&u)?Ws(l,e,r,i,si(u),a):void 0)||(Ys(s)||function(t){return 2==(2&t)}(u)&&(s=Ws(l,null,r,i,o,a)),function(t,e,r,n,i){const s=ce(t);if(e)i?s?t.addClass(r,n):r.classList.add(n):s?t.removeClass(r,n):r.classList.remove(n);else{let e=-1===n.indexOf("-")?void 0:pn.DashCase;if(null==i)s?t.removeStyle(r,n,e):r.style.removeProperty(n);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),e|=pn.Important),s?t.setStyle(r,n,i,e):r.style.setProperty(n,i,a?"important":"")}}}(n,a,fe(We(),r),i,s))}(s,s.data[We()],i,i[11],t,i[a+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=tt(function(t){return t instanceof class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,r),n,a)}function zs(t,e,r,n,i){let s=null;const a=r.directiveEnd;let o=r.directiveStylingLast;for(-1===o?o=r.directiveStart:o++;o<a&&(s=e[o],n=qs(n,s.hostAttrs,i),s!==t);)o++;return null!==t&&(r.directiveStylingLast=o),n}function qs(t,e,r){const n=r?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:i===n&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Hr(t,a,!!r||e[++s]))}return void 0===t?null:t}function Ws(t,e,r,n,i,s){const a=null===e;let o;for(;i>0;){const e=t[i],s=Array.isArray(e),l=s?e[1]:e,u=null===l;let c=r[i+1];c===Jn&&(c=u?Ot:void 0);let d=u?Kr(c,n):l===n?c:void 0;if(s&&!Ys(d)&&(d=Kr(e,n)),Ys(d)&&(o=d,a))return o;const h=t[i+1];i=a?ni(h):si(h)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(o=Kr(t,n))}return o}function Ys(t){return void 0!==t}function Xs(t,e=""){const r=Te(),n=ke(),i=t+20,s=n.firstCreatePass?ci(n,i,1,e,null):n.data[i],a=r[i]=function(t,e){return ce(t)?t.createText(e):t.createTextNode(e)}(r[11],e);Ln(n,r,a,s),Ae(s,!1)}function Zs(t){return Qs("",t,""),Zs}function Qs(t,e,r){const n=Te(),i=function(t,e,r,n){return Es(t,Pe(),r)?e+ot(r)+n:Jn}(n,t,e,r);return i!==Jn&&qi(n,We(),i),Qs}function Js(t,e,r,n,i){const s=Te(),a=function(t,e,r,n,i,s){const a=function(t,e,r,n){const i=Es(t,e,r);return Es(t,e+1,n)||i}(t,Ee.lFrame.bindingIndex,r,i);return Me(2),a?e+ot(r)+n+ot(i)+s:Jn}(s,t,e,r,n,i);return a!==Jn&&qi(s,We(),a),Js}function ta(t,e,r){const n=Te();return Es(n,Pe(),e)&&Ei(ke(),Xe(),n,t,e,n[11],r,!0),ta}const ea=void 0;var ra=["en",[["a","p"],["AM","PM"],ea],[["AM","PM"],ea,ea],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ea,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ea,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ea,"{1} 'at' {0}",ea],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===r?1:5}];let na={};function ia(t){return t in na||(na[t]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[t]),na[t]}var sa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let aa="en-US";function oa(t){var e,r;r="Expected localeId to be defined",null==(e=t)&&function(t,e,r,n){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(r,e),"string"==typeof t&&(aa=t.toLowerCase().replace(/_/g,"-"))}function la(t,e,r,n,i){if(t=it(t),Array.isArray(t))for(let s=0;s<t.length;s++)la(t[s],e,r,n,i);else{const s=ke(),a=Te();let o=ls(t)?t:it(t.provide),l=ss(t);const u=xe(),c=1048575&u.providerIndexes,d=u.directiveStart,h=u.providerIndexes>>20;if(ls(t)||!t.multi){const n=new ir(l,i,xs),f=da(o,e,i?c:c+h,d);-1===f?(br(mr(u,a),s,o),ua(s,t,e.length),e.push(o),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),r.push(n),a.push(n)):(r[f]=n,a[f]=n)}else{const f=da(o,e,c+h,d),p=da(o,e,c,c+h),g=f>=0&&r[f],m=p>=0&&r[p];if(i&&!m||!i&&!g){br(mr(u,a),s,o);const c=function(t,e,r,n,i){const s=new ir(t,r,xs);return s.multi=[],s.index=e,s.componentProviders=0,ca(s,i,n&&!r),s}(i?fa:ha,r.length,i,n,l);!i&&m&&(r[p].providerFactory=c),ua(s,t,e.length,0),e.push(o),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),r.push(c),a.push(c)}else ua(s,t,f>-1?f:p,ca(r[i?p:f],l,!i&&n));!i&&n&&m&&r[p].componentProviders++}}}function ua(t,e,r,n){const i=ls(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const a=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=a.indexOf(r);-1===t?a.push(r,[n,s]):a[t+1].push(n,s)}else a.push(r,s)}}}function ca(t,e,r){return r&&t.componentProviders++,t.multi.push(e)-1}function da(t,e,r,n){for(let i=r;i<n;i++)if(e[i]===t)return i;return-1}function ha(t,e,r,n){return pa(this.multi,[])}function fa(t,e,r,n){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ar(r,r[1],this.providerFactory.index,n);s=e.slice(0,t),pa(i,s);for(let r=t;r<e.length;r++)s.push(e[r])}else s=[],pa(i,s);return s}function pa(t,e){for(let r=0;r<t.length;r++)e.push((0,t[r])());return e}function ga(t,e=[]){return r=>{r.providersResolver=(r,n)=>function(t,e,r){const n=ke();if(n.firstCreatePass){const i=ee(t);la(r,n.data,n.blueprint,i,!0),la(e,n.data,n.blueprint,i,!1)}}(r,n?n(t):t,e)}}class ma{}class va{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${tt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ya=(()=>{class t{}return t.NULL=new va,t})();function _a(...t){}function ba(t,e){return new Ea(pe(t,e))}const wa=function(){return ba(xe(),Te())};let Ea=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=wa,t})();function Sa(t){return t instanceof Ea?t.nativeElement:t}class Ta{}let ka=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>xa(),t})();const xa=function(){const t=Te(),e=me(xe().index,t);return function(t){return t[11]}(Xt(e)?e:t)};let Ca=(()=>{class t{}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>null}),t})();class Aa{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ra=new Aa("12.0.0");class Da{constructor(){}supports(t){return _s(t)}create(t){return new Oa(t)}}const Ia=(t,e)=>e;class Oa{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ia}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,n=0,i=null;for(;e||r;){const s=!r||e&&e.currentIndex<Fa(r,n,i)?e:r,a=Fa(s,n,i),o=s.currentIndex;if(s===r)n--,r=r._nextRemoved;else if(e=e._next,null==s.previousIndex)n++;else{i||(i=[]);const t=a-n,e=o-n;if(t!=e){for(let r=0;r<t;r++){const n=r<i.length?i[r]:i[r]=0,s=n+r;e<=s&&s<t&&(i[r]=n+1)}i[s.previousIndex]=e-t}}a!==o&&t(s,a,o)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!_s(t))throw new Error(`Error trying to diff '${tt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,r,n,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)r=t[e],n=this._trackByFn(e,r),null!==i&&Object.is(i.trackById,n)?(s&&(i=this._verifyReinsertion(i,r,n,e)),Object.is(i.item,r)||this._addIdentityChange(i,r)):(i=this._mismatch(i,r,n,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let r=0;r<t.length;r++)e(t[r]);else{const r=t[ys()]();let n;for(;!(n=r.next()).done;)e(n.value)}}(t,t=>{n=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,n)?(s&&(i=this._verifyReinsertion(i,t,n,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,n,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,n){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,n)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,n))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,n)):t=this._addAfter(new La(e,r),i,n),t}_verifyReinsertion(t,e,r,n){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?t=this._reinsertAfter(i,t._prev,n):t.currentIndex!=n&&(t.currentIndex=n,this._addToMoves(t,n)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const n=t._prevRemoved,i=t._nextRemoved;return null===n?this._removalsHead=i:n._nextRemoved=i,null===i?this._removalsTail=n:i._prevRemoved=n,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const n=null===e?this._itHead:e._next;return t._next=n,t._prev=e,null===n?this._itTail=t:n._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ma),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ma),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class La{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Pa{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class Ma{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new Pa,this.map.set(e,r)),r.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fa(t,e,r){const n=t.previousIndex;if(null===n)return n;let i=0;return r&&n<r.length&&(i=r[n]),n+e+i}class Na{constructor(){}supports(t){return t instanceof Map||bs(t)}create(){return new Ua}}class Ua{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||bs(t)))throw new Error(`Error trying to diff '${tt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const n=this._getOrCreateRecordForKey(r,t);e=this._insertBeforeOrAppend(e,n)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const n=r._prev,i=r._next;return n&&(n._next=i),i&&(i._prev=n),r._next=null,r._prev=null,r}const r=new Ba(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class Ba{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ja(){return new Va([new Da])}let Va=(()=>{class t{constructor(t){this.factories=t}static create(e,r){if(null!=r){const t=r.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||ja()),deps:[[t,new sn,new nn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${r=t,r.name||typeof r}'`);var r}}return t.\u0275prov=ct({token:t,providedIn:"root",factory:ja}),t})();function Ga(){return new Ha([new Na])}let Ha=(()=>{class t{constructor(t){this.factories=t}static create(e,r){if(r){const t=r.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:r=>t.create(e,r||Ga()),deps:[[t,new sn,new nn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ct({token:t,providedIn:"root",factory:Ga}),t})();function Ka(t,e,r,n,i=!1){for(;null!==r;){const s=e[r.index];if(null!==s&&n.push(he(s)),Zt(s))for(let t=10;t<s.length;t++){const e=s[t],r=e[1].firstChild;null!==r&&Ka(e[1],e,r,n)}const a=r.type;if(8&a)Ka(t,e,r.child,n);else if(32&a){const t=gn(r,e);let i;for(;i=t();)n.push(i)}else if(16&a){const t=Mn(e,r);if(Array.isArray(t))n.push(...t);else{const r=mn(e[16]);Ka(r[1],r,t,n,!0)}}r=i?r.projectionNext:r.next}return n}class $a{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ka(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Zt(t)){const e=t[8],r=e?e.indexOf(this):-1;r>-1&&(Sn(t,r),Vr(e,r))}this._attachedToViewContainer=!1}Tn(this._lView[1],this._lView)}onDestroy(t){bi(this._lView[1],this._lView,null,t)}markForCheck(){Ui(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,r){Oe(!0);try{Bi(t,e,r)}finally{Oe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Un(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class za extends $a{constructor(t){super(t),this._view=t}detectChanges(){ji(this._view)}checkNoChanges(){!function(t){Oe(!0);try{ji(t)}finally{Oe(!1)}}(this._view)}get context(){return null}}const qa=function(t){return function(t,e,r){if(Jt(t)&&!r){const r=me(t.index,e);return new $a(r,r)}return 47&t.type?new $a(e[16],e):null}(xe(),Te(),16==(16&t))};let Wa=(()=>{class t{}return t.__NG_ELEMENT_ID__=qa,t})();const Ya=[new Na],Xa=new Va([new Da]),Za=new Ha(Ya),Qa=function(){return ro(xe(),Te())};let Ja=(()=>{class t{}return t.__NG_ELEMENT_ID__=Qa,t})();const to=Ja,eo=class extends to{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t){const e=this._declarationTContainer.tViews,r=ui(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const n=this._declarationLView[19];return null!==n&&(r[19]=n.createEmbeddedView(e)),hi(e,r,t),new $a(r)}};function ro(t,e){return 4&t.type?new eo(e,t,ba(t,e)):null}class no{}class io{}const so=function(){return ho(xe(),Te())};let ao=(()=>{class t{}return t.__NG_ELEMENT_ID__=so,t})();const oo=ao,lo=class extends oo{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return ba(this._hostTNode,this._hostLView)}get injector(){return new Ir(this._hostTNode,this._hostLView)}get parentInjector(){const t=_r(this._hostTNode,this._hostLView);if(cr(t)){const e=hr(t,this._hostLView),r=dr(t);return new Ir(e[1].data[r+8],e)}return new Ir(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=uo(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,r){const n=t.createEmbeddedView(e||{});return this.insert(n,r),n}createComponent(t,e,r,n,i){const s=r||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(no,null);t&&(i=t)}const a=t.create(s,n,void 0,i);return this.insert(a.hostView,e),a}insert(t,e){const r=t._lView,n=r[1];if(Zt(r[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=r[3],n=new lo(e,e[6],e[3]);n.detach(n.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,r,n){const i=10+n,s=r.length;n>0&&(r[i-1][4]=e),n<s-10?(e[4]=r[i],jr(r,10+n,e)):(r.push(e),e[4]=null),e[3]=r;const a=e[17];null!==a&&r!==a&&function(t,e){const r=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===r?t[9]=[e]:r.push(e)}(a,e);const o=e[19];null!==o&&o.insertView(t),e[2]|=128}(n,r,s,i);const a=Fn(i,s),o=r[11],l=Dn(o,s[7]);return null!==l&&function(t,e,r,n,i,s){n[0]=i,n[6]=e,Un(t,n,r,1,i,s)}(n,s[6],o,r,l,a),t.attachToViewContainerRef(),jr(co(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=uo(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=Sn(this._lContainer,e);r&&(Vr(co(this._lContainer),e),Tn(r[1],r))}detach(t){const e=this._adjustIndex(t,-1),r=Sn(this._lContainer,e);return r&&null!=Vr(co(this._lContainer),e)?new $a(r):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function uo(t){return t[8]}function co(t){return t[8]||(t[8]=[])}function ho(t,e){let r;const n=e[t.index];if(Zt(n))r=n;else{let i;if(8&t.type)i=he(n);else{const r=e[11];i=r.createComment("");const n=pe(t,e);Cn(r,Dn(r,n),i,function(t,e){return ce(t)?t.nextSibling(e):e.nextSibling}(r,n),!1)}e[t.index]=r=Li(n,e,i,t),Ni(e,r)}return new lo(r,t,e)}const fo={};class po extends ya{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Wt(t);return new vo(e,this.ngModule)}}function go(t){const e=[];for(let r in t)t.hasOwnProperty(r)&&e.push({propName:t[r],templateName:r});return e}const mo=new Mr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>hn});class vo extends ma{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Qn).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return go(this.componentDef.inputs)}get outputs(){return go(this.componentDef.outputs)}create(t,e,r,n){const i=(n=n||this.ngModule)?function(t,e){return{get:(r,n,i)=>{const s=t.get(r,fo,i);return s!==fo||n===fo?s:e.get(r,n,i)}}}(t,n.injector):t,s=i.get(Ta,de),a=i.get(Ca,null),o=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=r?function(t,e,r){if(ce(t))return t.selectRootElement(e,r===kt.ShadowDom);let n="string"==typeof e?t.querySelector(e):e;return n.textContent="",n}(o,r,this.componentDef.encapsulation):wn(s.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),c=this.componentDef.onPush?576:528,d={components:[],scheduler:hn,clean:Gi,playerHandler:null,flags:0},h=_i(0,null,null,1,0,null,null,null,null,null),f=ui(null,h,d,c,null,null,s,o,a,i);let p,g;Ge(f);try{const t=function(t,e,r,n,i,s){const a=r[1];r[20]=t;const o=ci(a,20,2,"#host",null),l=o.mergedAttrs=e.hostAttrs;null!==l&&(Wi(o,l,!0),null!==t&&(sr(i,t,l),null!==o.classes&&Vn(i,t,o.classes),null!==o.styles&&jn(i,t,o.styles)));const u=n.createRenderer(t,e),c=ui(r,yi(e),null,e.onPush?64:16,r[20],o,n,u,null,null);return a.firstCreatePass&&(br(mr(o,r),a,e.type),xi(a,o),Ai(o,r.length,1)),Ni(r,c),r[20]=c}(u,this.componentDef,f,s,o);if(u)if(r)sr(o,u,["ng-version",Ra.full]);else{const{attrs:t,classes:e}=function(t){const e=[],r=[];let n=1,i=2;for(;n<t.length;){let s=t[n];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++n]):8===i&&r.push(s);else{if(!qn(i))break;i=s}n++}return{attrs:e,classes:r}}(this.componentDef.selectors[0]);t&&sr(o,u,t),e&&e.length>0&&Vn(o,u,e.join(" "))}if(g=ge(h,20),void 0!==e){const t=g.projection=[];for(let r=0;r<this.ngContentSelectors.length;r++){const n=e[r];t.push(null!=n?Array.from(n):null)}}p=function(t,e,r,n,i){const s=r[1],a=function(t,e,r){const n=xe();t.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),Ri(t,n,e,di(t,e,1,null),r));const i=Ar(e,t,n.directiveStart,n);an(i,e);const s=pe(n,e);return s&&an(s,e),i}(s,r,e);if(n.components.push(a),t[8]=a,i&&i.forEach(t=>t(a,e)),e.contentQueries){const t=xe();e.contentQueries(1,a,t.directiveStart)}const o=xe();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ye(o.index),Ti(r[1],o,0,o.directiveStart,o.directiveEnd,e),ki(e,a)),a}(t,this.componentDef,f,d,[ds]),hi(h,f,null)}finally{qe()}return new yo(this.componentType,p,ba(g,f),f,g)}}class yo extends class{}{constructor(t,e,r,n,i){super(),this.location=r,this._rootLView=n,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new za(n),this.componentType=t}get injector(){return new Ir(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const _o=new Map;class bo extends no{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new po(this);const r=Yt(t),n=t[Nt]||null;n&&oa(n),this._bootstrapComponents=fn(r.bootstrap),this._r3Injector=rs(t,e,[{provide:no,useValue:this},{provide:ya,useValue:this.componentFactoryResolver}],tt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=cs.THROW_IF_NOT_FOUND,r=_t.Default){return t===cs||t===no||t===Yi?this:this._r3Injector.get(t,e,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class wo extends io{constructor(t){super(),this.moduleType=t,null!==Yt(t)&&function(t){const e=new Set;!function t(r){const n=Yt(r,!0),i=n.id;null!==i&&(function(t,e,r){if(e&&e!==r)throw new Error(`Duplicate module registered for ${t} - ${tt(e)} vs ${tt(e.name)}`)}(i,_o.get(i),r),_o.set(i,r));const s=fn(n.imports);for(const a of s)e.has(a)||(e.add(a),t(a))}(t)}(t)}create(t){return new bo(this.moduleType,t)}}function Eo(t){return e=>{setTimeout(t,void 0,e)}}const So=class extends S{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){var n,i,s;let a=t,o=e||(()=>null),l=r;if(t&&"object"==typeof t){const e=t;a=null===(n=e.next)||void 0===n?void 0:n.bind(e),o=null===(i=e.error)||void 0===i?void 0:i.bind(e),l=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(o=Eo(o),a&&(a=Eo(a)),l&&(l=Eo(l)));const u=super.subscribe({next:a,error:o,complete:l});return t instanceof d&&t.add(u),u}};function To(){return this._results[ys()]()}class ko{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=ys(),r=ko.prototype;r[e]||(r[e]=To)}get changes(){return this._changes||(this._changes=new So)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;const r=Ur(t);(this._changesDetected=!function(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],s=e[n];if(r&&(i=r(i),s=r(s)),s!==i)return!1}return!0}(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class xo{constructor(t){this.queryList=t,this.matches=null}clone(){return new xo(this.queryList)}setDirty(){this.queryList.setDirty()}}class Co{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,n=[];for(let t=0;t<r;t++){const r=e.getByIndex(t);n.push(this.queries[r.indexInDeclarationView].clone())}return new Co(n)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Vo(t,e).matches&&this.queries[e].setDirty()}}class Ao{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class Ro{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const n=null!==e?e.length:0,i=this.getByIndex(r).embeddedTView(t,n);i&&(i.indexInDeclarationView=r,null!==e?e.push(i):e=[i])}return null!==e?new Ro(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Do{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Do(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let n=0;n<r.length;n++){const i=r[n];this.matchTNodeWithReadOption(t,e,Io(e,i)),this.matchTNodeWithReadOption(t,e,Cr(e,t,i,!1,!1))}else r===Ja?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Cr(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const n=this.metadata.read;if(null!==n)if(n===Ea||n===ao||n===Ja&&4&e.type)this.addMatch(e.index,-2);else{const r=Cr(e,t,n,!1,!1);null!==r&&this.addMatch(e.index,r)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Io(t,e){const r=t.localNames;if(null!==r)for(let n=0;n<r.length;n+=2)if(r[n]===e)return r[n+1];return null}function Oo(t,e,r,n){return-1===r?function(t,e){return 11&t.type?ba(t,e):4&t.type?ro(t,e):null}(e,t):-2===r?function(t,e,r){return r===Ea?ba(e,t):r===Ja?ro(e,t):r===ao?ho(e,t):void 0}(t,e,n):Ar(t,t[1],r,e)}function Lo(t,e,r,n){const i=e[19].queries[n];if(null===i.matches){const n=t.data,s=r.matches,a=[];for(let t=0;t<s.length;t+=2){const i=s[t];a.push(i<0?null:Oo(e,n[i],s[t+1],r.metadata.read))}i.matches=a}return i.matches}function Po(t,e,r,n){const i=t.queries.getByIndex(r),s=i.matches;if(null!==s){const a=Lo(t,e,i,r);for(let t=0;t<s.length;t+=2){const r=s[t];if(r>0)n.push(a[t/2]);else{const i=s[t+1],a=e[-r];for(let t=10;t<a.length;t++){const e=a[t];e[17]===e[3]&&Po(e[1],e,i,n)}if(null!==a[9]){const t=a[9];for(let e=0;e<t.length;e++){const r=t[e];Po(r[1],r,i,n)}}}}}return n}function Mo(t){const e=Te(),r=ke(),n=Ue();Be(n+1);const i=Vo(r,n);if(t.dirty&&ve(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Po(r,e,n,[]):Lo(r,e,i,n);t.reset(s,Sa),t.notifyOnChanges()}return!0}return!1}function Fo(t,e,r){const n=ke();n.firstCreatePass&&(jo(n,new Ao(t,e,r),-1),2==(2&e)&&(n.staticViewQueries=!0)),Bo(n,Te(),e)}function No(t,e,r,n){const i=ke();if(i.firstCreatePass){const s=xe();jo(i,new Ao(e,r,n),s.index),function(t,e){const r=t.contentQueries||(t.contentQueries=[]);e!==(r.length?r[r.length-1]:-1)&&r.push(t.queries.length-1,e)}(i,t),2==(2&r)&&(i.staticContentQueries=!0)}Bo(i,Te(),r)}function Uo(){return t=Te(),e=Ue(),t[19].queries[e].queryList;var t,e}function Bo(t,e,r){const n=new ko(4==(4&r));bi(t,e,n,n.destroy),null===e[19]&&(e[19]=new Co),e[19].queries.push(new xo(n))}function jo(t,e,r){null===t.queries&&(t.queries=new Ro),t.queries.track(new Do(e,r))}function Vo(t,e){return t.queries.getByIndex(e)}const Go=new Mr("Application Initializer");let Ho=(()=>{class t{constructor(t){this.appInits=t,this.resolve=_a,this.reject=_a,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const e=this.appInits[r]();if(Os(e))t.push(e);else if(Ls(e)){const r=new Promise((t,r)=>{e.subscribe({complete:t,error:r})});t.push(r)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Qr(Go,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Ko=new Mr("AppId"),$o={provide:Ko,useFactory:function(){return`${zo()}${zo()}${zo()}`},deps:[]};function zo(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qo=new Mr("Platform Initializer"),Wo=new Mr("Platform ID"),Yo=new Mr("appBootstrapListener");let Xo=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Zo=new Mr("LocaleId"),Qo=new Mr("DefaultCurrencyCode");class Jo{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const tl=function(t){return new wo(t)},el=tl,rl=function(t){return Promise.resolve(tl(t))},nl=function(t){const e=tl(t),r=fn(Yt(t).declarations).reduce((t,e)=>{const r=Wt(e);return r&&t.push(new vo(r)),t},[]);return new Jo(e,r)},il=nl,sl=function(t){return Promise.resolve(nl(t))};let al=(()=>{class t{constructor(){this.compileModuleSync=el,this.compileModuleAsync=rl,this.compileModuleAndAllComponentsSync=il,this.compileModuleAndAllComponentsAsync=sl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const ol=(()=>Promise.resolve(0))();function ll(t){"undefined"==typeof Zone?ol.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ul{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new So(!1),this.onMicrotaskEmpty=new So(!1),this.onStable=new So(!1),this.onError=new So(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!r&&e,this.shouldCoalesceRunChangeDetection=r,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=Dt.requestAnimationFrame,e=Dt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Dt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,hl(t),t.isCheckStableRunning=!0,dl(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),hl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,n,i,s,a,o)=>{try{return fl(t),r.invokeTask(i,s,a,o)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),pl(t)}},onInvoke:(r,n,i,s,a,o,l)=>{try{return fl(t),r.invoke(i,s,a,o,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),pl(t)}},onHasTask:(e,r,n,i)=>{e.hasTask(n,i),r===n&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,hl(t),dl(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,r,n,i)=>(e.handleError(n,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ul.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ul.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,n){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+n,t,cl,_a,_a);try{return i.runTask(s,e,r)}finally{i.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const cl={};function dl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function fl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pl(t){t._nesting--,dl(t)}class gl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new So,this.onMicrotaskEmpty=new So,this.onStable=new So,this.onError=new So}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,n){return t.apply(e,r)}}let ml=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ul.assertNotInAngularZone(),ll(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ll(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,r){let n=-1;e&&e>0&&(n=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==n),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:n,updateCb:r})}whenStable(t,e,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,r){return[]}}return t.\u0275fac=function(e){return new(e||t)(Qr(ul))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),vl=(()=>{class t{constructor(){this._applications=new Map,bl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return bl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class yl{addToWindow(t){}findTestabilityInTree(t,e,r){return null}}let _l,bl=new yl,wl=!0,El=!1;function Sl(){return El=!0,wl}const Tl=new Mr("AllowMultipleToken");class kl{constructor(t,e){this.name=t,this.token=e}}function xl(t,e,r=[]){const n=`Platform: ${e}`,i=new Mr(n);return(e=[])=>{let s=Cl();if(!s||s.injector.get(Tl,!1))if(t)t(r.concat(e).concat({provide:i,useValue:!0}));else{const t=r.concat(e).concat({provide:i,useValue:!0},{provide:Zi,useValue:"platform"});!function(t){if(_l&&!_l.destroyed&&!_l.injector.get(Tl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_l=t.get(Al);const e=t.get(qo,null);e&&e.forEach(t=>t())}(cs.create({providers:t,name:n}))}return function(t){const e=Cl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Cl(){return _l&&!_l.destroyed?_l:null}let Al=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const r=function(t,e){let r;return r="noop"===t?new gl:("zone.js"===t?void 0:t)||new ul({enableLongStackTrace:Sl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),r}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),n=[{provide:ul,useValue:r}];return r.run(()=>{const e=cs.create({providers:n,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(dn,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.runOutsideAngular(()=>{const t=r.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Il(this._modules,i),t.unsubscribe()})}),function(t,e,r){try{const n=r();return Os(n)?n.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>t.handleError(n)),n}}(s,r,()=>{const t=i.injector.get(Ho);return t.runInitializers(),t.donePromise.then(()=>(oa(i.injector.get(Zo,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const r=Rl({},e);return function(t,e,r){const n=new wo(r);return Promise.resolve(n)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,r))}_moduleDoBootstrap(t){const e=t.injector.get(Dl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${tt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Qr(cs))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Rl(t,e){return Array.isArray(e)?e.reduce(Rl,t):Object.assign(Object.assign({},t),e)}let Dl=(()=>{class t{constructor(t,e,r,n,i){this._zone=t,this._injector=e,this._exceptionHandler=r,this._componentFactoryResolver=n,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ul.assertNotInAngularZone(),ll(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const r=this._zone.onUnstable.subscribe(()=>{ul.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),r.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,r=null,n=t[t.length-1];return k(n)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof n&&(e=t.pop()),null===r&&1===t.length&&t[0]instanceof y?t[0]:H(e)(K(t,r))}(s,a.pipe(t=>{return $()((e=Z,function(t){let r;r="function"==typeof e?e:function(){return e};const n=Object.create(t,Y);return n.source=t,n.subjectFactory=r,n})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=t instanceof ma?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const n=r.isBoundToModule?void 0:this._injector.get(no),i=r.create(cs.NULL,[],e||r.selector,n),s=i.location.nativeElement,a=i.injector.get(ml,null),o=a&&i.injector.get(vl);return a&&o&&o.registerApplication(s,a),i.onDestroy(()=>{this.detachView(i.hostView),Il(this.components,i),o&&o.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Il(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Yo,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Qr(ul),Qr(cs),Qr(dn),Qr(ya),Qr(Ho))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Il(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Ol{}class Ll{}const Pl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ml=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Pl}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,n]=t.split("#");return void 0===n&&(n="default"),r(8255)(e).then(t=>t[n]).then(t=>Fl(t,e,n)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,n]=t.split("#"),i="NgFactory";return void 0===n&&(n="default",i=""),r(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[n+i]).then(t=>Fl(t,e,n))}}return t.\u0275fac=function(e){return new(e||t)(Qr(al),Qr(Ll,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Fl(t,e,r){if(!t)throw new Error(`Cannot find '${r}' in '${e}'`);return t}const Nl=xl(null,"core",[{provide:Wo,useValue:"unknown"},{provide:Al,deps:[cs]},{provide:vl,deps:[]},{provide:Xo,deps:[]}]),Ul=[{provide:Dl,useClass:Dl,deps:[ul,cs,dn,ya,Ho]},{provide:mo,deps:[ul],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ho,useClass:Ho,deps:[[new nn,Go]]},{provide:al,useClass:al,deps:[]},$o,{provide:Va,useFactory:function(){return Xa},deps:[]},{provide:Ha,useFactory:function(){return Za},deps:[]},{provide:Zo,useFactory:function(t){return oa(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new rn(Zo),new nn,new sn]]},{provide:Qo,useValue:"USD"}];let Bl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Qr(Dl))},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:Ul}),t})(),jl=null;function Vl(){return jl}const Gl=new Mr("DocumentToken");let Hl=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:Kl,token:t,providedIn:"platform"}),t})();function Kl(){return Qr(zl)}const $l=new Mr("Location Initialized");let zl=(()=>{class t extends Hl{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vl().getBaseHref(this._doc)}onPopState(t){const e=Vl().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=Vl().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,r){ql()?this._history.pushState(t,e,r):this.location.hash=r}replaceState(t,e,r){ql()?this._history.replaceState(t,e,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Qr(Gl))},t.\u0275prov=ct({factory:Wl,token:t,providedIn:"platform"}),t})();function ql(){return!!window.history.pushState}function Wl(){return new zl(Qr(Gl))}function Yl(t,e){if(0==t.length)return e;if(0==e.length)return t;let r=0;return t.endsWith("/")&&r++,e.startsWith("/")&&r++,2==r?t+e.substring(1):1==r?t+e:t+"/"+e}function Xl(t){const e=t.match(/#|\?|$/),r=e&&e.index||t.length;return t.slice(0,r-("/"===t[r-1]?1:0))+t.slice(r)}function Zl(t){return t&&"?"!==t[0]?"?"+t:t}let Ql=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:Jl,token:t,providedIn:"root"}),t})();function Jl(t){const e=Qr(Gl).location;return new eu(Qr(Hl),e&&e.origin||"")}const tu=new Mr("appBaseHref");let eu=(()=>{class t extends Ql{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Yl(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Zl(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${e}${r}`:e}pushState(t,e,r,n){const i=this.prepareExternalUrl(r+Zl(n));this._platformLocation.pushState(t,e,i)}replaceState(t,e,r,n){const i=this.prepareExternalUrl(r+Zl(n));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,r;null===(r=(e=this._platformLocation).historyGo)||void 0===r||r.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(Qr(Hl),Qr(tu,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),ru=(()=>{class t extends Ql{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Yl(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,r,n){let i=this.prepareExternalUrl(r+Zl(n));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,r,n){let i=this.prepareExternalUrl(r+Zl(n));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,r;null===(r=(e=this._platformLocation).historyGo)||void 0===r||r.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(Qr(Hl),Qr(tu,8))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),nu=(()=>{class t{constructor(t,e){this._subject=new So,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Xl(su(r)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Zl(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,su(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",r=null){this._platformStrategy.pushState(r,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zl(e)),r)}replaceState(t,e="",r=null){this._platformStrategy.replaceState(r,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zl(e)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,r;null===(r=(e=this._platformStrategy).historyGo)||void 0===r||r.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(r=>r(t,e))}subscribe(t,e,r){return this._subject.subscribe({next:t,error:e,complete:r})}}return t.\u0275fac=function(e){return new(e||t)(Qr(Ql),Qr(Hl))},t.normalizeQueryParams=Zl,t.joinWithSlash=Yl,t.stripTrailingSlash=Xl,t.\u0275prov=ct({factory:iu,token:t,providedIn:"root"}),t})();function iu(){return new nu(Qr(Ql),Qr(Hl))}function su(t){return t.replace(/\/index.html$/,"")}var au=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class ou{}let lu=(()=>{class t extends ou{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let r=ia(e);if(r)return r;const n=e.split("-")[0];if(r=ia(n),r)return r;if("en"===n)return ra;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[sa.PluralCase]}(e||this.locale)(t)){case au.Zero:return"zero";case au.One:return"one";case au.Two:return"two";case au.Few:return"few";case au.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Qr(Zo))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),uu=(()=>{class t{constructor(t,e,r,n){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=r,this._renderer=n,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(_s(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${tt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(xs(Va),xs(Ha),xs(Ea),xs(ka))},t.\u0275dir=qt({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class cu{constructor(t,e,r,n){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=n}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let du=(()=>{class t{constructor(t,e,r){this._viewContainer=t,this._template=e,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${r}' of type '${t=r,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,r,n)=>{if(null==t.previousIndex){const r=this._viewContainer.createEmbeddedView(this._template,new cu(null,this._ngForOf,-1,-1),null===n?void 0:n),i=new hu(t,r);e.push(i)}else if(null==n)this._viewContainer.remove(null===r?void 0:r);else if(null!==r){const i=this._viewContainer.get(r);this._viewContainer.move(i,n);const s=new hu(t,i);e.push(s)}});for(let r=0;r<e.length;r++)this._perViewChange(e[r].view,e[r].record);for(let r=0,n=this._viewContainer.length;r<n;r++){const t=this._viewContainer.get(r);t.context.index=r,t.context.count=n,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(xs(ao),xs(Ja),xs(Va))},t.\u0275dir=qt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class hu{constructor(t,e){this.record=t,this.view=e}}let fu=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new pu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(xs(ao),xs(Ja))},t.\u0275dir=qt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class pu{constructor(){this.$implicit=null,this.ngIf=null}}function gu(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${tt(e)}'.`)}class mu{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let vu=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=qt({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),yu=(()=>{class t{constructor(t,e,r){this.ngSwitch=r,r._addCase(),this._view=new mu(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(xs(ao),xs(Ja),xs(vu,9))},t.\u0275dir=qt({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),_u=(()=>{class t{constructor(t,e,r){this._ngEl=t,this._differs=e,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[r,n]=t.split(".");null!=(e=null!=e&&n?`${e}${n}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,r,e):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(xs(Ea),xs(Ha),xs(ka))},t.\u0275dir=qt({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),bu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[{provide:ou,useClass:lu}]}),t})(),wu=(()=>{class t{}return t.\u0275prov=ct({token:t,providedIn:"root",factory:()=>new Eu(Qr(Gl),window)}),t})();class Eu{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const r=t.getElementById(e)||t.getElementsByName(e)[0];if(r)return r;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let n=r.currentNode;for(;n;){const t=n.shadowRoot;if(t){const r=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(r)return r}n=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,n=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],n-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Su(this.window.history)||Su(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Su(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Tu extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new Tu,jl||(jl=t)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(xu=xu||document.querySelector("base"),xu?xu.getAttribute("href"):null);return null==e?null:function(t){ku=ku||document.createElement("a"),ku.setAttribute("href",t);const e=ku.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){xu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const r of t.split(";")){const t=r.indexOf("="),[n,i]=-1==t?[r,""]:[r.slice(0,t),r.slice(t+1)];if(n.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let ku,xu=null;const Cu=new Mr("TRANSITION_ID"),Au=[{provide:Go,useFactory:function(t,e,r){return()=>{r.get(Ho).donePromise.then(()=>{const r=Vl();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>r.remove(t))})}},deps:[Cu,Gl,cs],multi:!0}];class Ru{static init(){var t;t=new Ru,bl=t}addToWindow(t){Dt.getAngularTestability=(e,r=!0)=>{const n=t.findTestabilityInTree(e,r);if(null==n)throw new Error("Could not find testability for element.");return n},Dt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Dt.getAllAngularRootElements=()=>t.getAllRootElements(),Dt.frameworkStabilizers||(Dt.frameworkStabilizers=[]),Dt.frameworkStabilizers.push(t=>{const e=Dt.getAllAngularTestabilities();let r=e.length,n=!1;const i=function(e){n=n||e,r--,0==r&&t(n)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const n=t.getTestability(e);return null!=n?n:r?Vl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Du=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Iu=new Mr("EventManagerPlugins");let Ou=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,r){return this._findPluginFor(e).addEventListener(t,e,r)}addGlobalEventListener(t,e,r){return this._findPluginFor(e).addGlobalEventListener(t,e,r)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const r=this._plugins;for(let n=0;n<r.length;n++){const e=r[n];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(Qr(Iu),Qr(ul))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class Lu{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const n=Vl().getGlobalEventTarget(this._doc,t);if(!n)throw new Error(`Unsupported event target ${n} for event ${e}`);return this.addEventListener(n,e,r)}}let Pu=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Mu=(()=>{class t extends Pu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,r){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,r.push(e.appendChild(n))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Fu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,r)=>{this._addStylesToHost(t,r,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Fu))}}return t.\u0275fac=function(e){return new(e||t)(Qr(Gl))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function Fu(t){Vl().remove(t)}const Nu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Uu=/%COMP%/g;function Bu(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?Bu(t,i,r):(i=i.replace(Uu,t),r.push(i))}return r}function ju(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Vu=(()=>{class t{constructor(t,e,r){this.eventManager=t,this.sharedStylesHost=e,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Gu(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case kt.Emulated:{let r=this.rendererByCompId.get(e.id);return r||(r=new Hu(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,r)),r.applyToHost(t),r}case 1:case kt.ShadowDom:return new Ku(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Bu(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Qr(Ou),Qr(Mu),Qr(Ko))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();class Gu{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Nu[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,n){if(n){e=n+":"+e;const i=Nu[n];i?t.setAttributeNS(i,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const n=Nu[r];n?t.removeAttributeNS(n,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,n){n&(pn.DashCase|pn.Important)?t.style.setProperty(e,r,n&pn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&pn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ju(r)):this.eventManager.addEventListener(t,e,ju(r))}}class Hu extends Gu{constructor(t,e,r,n){super(t),this.component=r;const i=Bu(n+"-"+r.id,r.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Uu,n+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(Uu,n+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class Ku extends Gu{constructor(t,e,r,n){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Bu(n.id,n.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let $u=(()=>{class t extends Lu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,r){return t.addEventListener(e,r,!1),()=>this.removeEventListener(t,e,r)}removeEventListener(t,e,r){return t.removeEventListener(e,r)}}return t.\u0275fac=function(e){return new(e||t)(Qr(Gl))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const zu=["alt","control","meta","shift"],qu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Yu={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Xu=(()=>{class t extends Lu{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,r,n){const i=t.parseEventName(r),s=t.eventCallback(i.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vl().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const r=e.toLowerCase().split("."),n=r.shift();if(0===r.length||"keydown"!==n&&"keyup"!==n)return null;const i=t._normalizeKey(r.pop());let s="";if(zu.forEach(t=>{const e=r.indexOf(t);e>-1&&(r.splice(e,1),s+=t+".")}),s+=i,0!=r.length||0===i.length)return null;const a={};return a.domEventName=n,a.fullKey=s,a}static getEventFullKey(t){let e="",r=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Wu.hasOwnProperty(e)&&(e=Wu[e]))}return qu[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),zu.forEach(n=>{n!=r&&(0,Yu[n])(t)&&(e+=n+".")}),e+=r,e}static eventCallback(e,r,n){return i=>{t.getEventFullKey(i)===e&&n.runGuarded(()=>r(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Qr(Gl))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Zu=xl(Nl,"browser",[{provide:Wo,useValue:"browser"},{provide:qo,useValue:function(){Tu.makeCurrent(),Ru.init()},multi:!0},{provide:Gl,useFactory:function(){return function(t){ue=t}(document),document},deps:[]}]),Qu=[[],{provide:Zi,useValue:"root"},{provide:dn,useFactory:function(){return new dn},deps:[]},{provide:Iu,useClass:$u,multi:!0,deps:[Gl,ul,Wo]},{provide:Iu,useClass:Xu,multi:!0,deps:[Gl]},[],{provide:Vu,useClass:Vu,deps:[Ou,Mu,Ko]},{provide:Ta,useExisting:Vu},{provide:Pu,useExisting:Mu},{provide:Mu,useClass:Mu,deps:[Gl]},{provide:ml,useClass:ml,deps:[ul]},{provide:Ou,useClass:Ou,deps:[Iu,ul]},{provide:class{},useClass:Du,deps:[]},[]];let Ju=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Ko,useValue:e.appId},{provide:Cu,useExisting:Ko},Au]}}}return t.\u0275fac=function(e){return new(e||t)(Qr(t,12))},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:Qu,imports:[bu,Bl]}),t})();function tc(...t){let e=t[t.length-1];return k(e)?(t.pop(),M(t,e)):K(t)}"undefined"!=typeof window&&window;class ec extends S{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(t){super.next(this._value=t)}}class rc extends p{notifyNext(t,e,r,n,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class nc extends p{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function ic(t,e,r,n,i=new nc(t,r,n)){if(!i.closed)return e instanceof y?e.subscribe(i):P(e)(i)}const sc={};class ac{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new oc(t,this.resultSelector))}}class oc extends rc{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(sc),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(ic(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const n=this.values,i=this.toRespond?n[r]===sc?--this.toRespond:this.toRespond:0;n[r]=e,0===i&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const lc=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function uc(...t){return H(1)(tc(...t))}const cc=new y(t=>t.complete());function dc(t){return t?function(t){return new y(e=>t.schedule(()=>e.complete()))}(t):cc}function hc(t){return new y(e=>{let r;try{r=t()}catch(n){return void e.error(n)}return(r?F(r):dc()).subscribe(e)})}function fc(t,e){return"function"==typeof e?r=>r.pipe(fc((r,n)=>F(t(r,n)).pipe(x((t,i)=>e(r,t,n,i))))):e=>e.lift(new pc(t))}class pc{constructor(t){this.project=t}call(t,e){return e.subscribe(new gc(t,this.project))}}class gc extends U{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(n){return void this.destination.error(n)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new N(this),n=this.destination;n.add(r),this.innerSubscription=B(t,r),this.innerSubscription!==r&&n.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const mc=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function vc(t){return e=>0===t?dc():e.lift(new yc(t))}class yc{constructor(t){if(this.total=t,this.total<0)throw new mc}call(t,e){return e.subscribe(new _c(t,this.total))}}class _c extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function bc(...t){const e=t[t.length-1];return k(e)?(t.pop(),r=>uc(t,r,e)):e=>uc(t,e)}function wc(t,e){let r=!1;return arguments.length>=2&&(r=!0),function(n){return n.lift(new Ec(t,e,r))}}class Ec{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new Sc(t,this.accumulator,this.seed,this.hasSeed))}}class Sc extends p{constructor(t,e,r,n){super(t),this.accumulator=e,this._seed=r,this.hasSeed=n,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(n){this.destination.error(n)}this.seed=r,this.destination.next(r)}}function Tc(t,e){return function(r){return r.lift(new kc(t,e))}}class kc{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new xc(t,this.predicate,this.thisArg))}}class xc extends p{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}function Cc(t){return function(e){const r=new Ac(t),n=e.lift(r);return r.caught=n}}class Ac{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Rc(t,this.selector,this.caught))}}class Rc extends U{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let r;try{r=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const n=new N(this);this.add(n);const i=B(r,n);i!==n&&this.add(i)}}}function Dc(t,e){return j(t,e,1)}function Ic(t){return function(e){return 0===t?dc():e.lift(new Oc(t))}}class Oc{constructor(t){if(this.total=t,this.total<0)throw new mc}call(t,e){return e.subscribe(new Lc(t,this.total))}}class Lc extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,n=this.count++;e.length<r?e.push(t):e[n%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,n=this.ring;for(let i=0;i<r;i++){const i=e++%r;t.next(n[i])}}t.complete()}}function Pc(t=Nc){return e=>e.lift(new Mc(t))}class Mc{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Fc(t,this.errorFactory))}}class Fc extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Nc(){return new lc}function Uc(t=null){return e=>e.lift(new Bc(t))}class Bc{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new jc(t,this.defaultValue))}}class jc extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Vc(t,e){const r=arguments.length>=2;return n=>n.pipe(t?Tc((e,r)=>t(e,r,n)):v,vc(1),r?Uc(e):Pc(()=>new lc))}function Gc(){}function Hc(t,e,r){return function(n){return n.lift(new Kc(t,e,r))}}class Kc{constructor(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}call(t,e){return e.subscribe(new $c(t,this.nextOrObserver,this.error,this.complete))}}class $c extends p{constructor(t,e,r,i){super(t),this._tapNext=Gc,this._tapError=Gc,this._tapComplete=Gc,this._tapError=r||Gc,this._tapComplete=i||Gc,n(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Gc,this._tapError=e.error||Gc,this._tapComplete=e.complete||Gc)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class zc{constructor(t){this.callback=t}call(t,e){return e.subscribe(new qc(t,this.callback))}}class qc extends p{constructor(t,e){super(t),this.add(new d(e))}}class Wc{constructor(t,e){this.id=t,this.url=e}}class Yc extends Wc{constructor(t,e,r="imperative",n=null){super(t,e),this.navigationTrigger=r,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xc extends Wc{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zc extends Wc{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qc extends Wc{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Jc extends Wc{constructor(t,e,r,n){super(t,e),this.urlAfterRedirects=r,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class td extends Wc{constructor(t,e,r,n){super(t,e),this.urlAfterRedirects=r,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ed extends Wc{constructor(t,e,r,n,i){super(t,e),this.urlAfterRedirects=r,this.state=n,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rd extends Wc{constructor(t,e,r,n){super(t,e),this.urlAfterRedirects=r,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nd extends Wc{constructor(t,e,r,n){super(t,e),this.urlAfterRedirects=r,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class id{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sd{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ad{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class od{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ld{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ud{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cd{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class dd{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function hd(t){return new dd(t)}function fd(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function pd(t,e,r){const n=r.path.split("/");if(n.length>t.length)return null;if("full"===r.pathMatch&&(e.hasChildren()||n.length<t.length))return null;const i={};for(let s=0;s<n.length;s++){const e=n[s],r=t[s];if(e.startsWith(":"))i[e.substring(1)]=r;else if(e!==r.path)return null}return{consumed:t.slice(0,n.length),posParams:i}}function gd(t,e){const r=t?Object.keys(t):void 0,n=e?Object.keys(e):void 0;if(!r||!n||r.length!=n.length)return!1;let i;for(let s=0;s<r.length;s++)if(i=r[s],!md(t[i],e[i]))return!1;return!0}function md(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const r=[...t].sort(),n=[...e].sort();return r.every((t,e)=>n[e]===t)}return t===e}function vd(t){return Array.prototype.concat.apply([],t)}function yd(t){return t.length>0?t[t.length-1]:null}function _d(t,e){for(const r in t)t.hasOwnProperty(r)&&e(t[r],r)}function bd(t){return Ls(t)?t:Os(t)?F(Promise.resolve(t)):tc(t)}const wd={exact:function t(e,r,n){if(!Dd(e.segments,r.segments))return!1;if(!xd(e.segments,r.segments,n))return!1;if(e.numberOfChildren!==r.numberOfChildren)return!1;for(const i in r.children){if(!e.children[i])return!1;if(!t(e.children[i],r.children[i],n))return!1}return!0},subset:Td},Ed={exact:function(t,e){return gd(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(r=>md(t[r],e[r]))},ignored:()=>!0};function Sd(t,e,r){return wd[r.paths](t.root,e.root,r.matrixParams)&&Ed[r.queryParams](t.queryParams,e.queryParams)&&!("exact"===r.fragment&&t.fragment!==e.fragment)}function Td(t,e,r){return kd(t,e,e.segments,r)}function kd(t,e,r,n){if(t.segments.length>r.length){const i=t.segments.slice(0,r.length);return!!Dd(i,r)&&!e.hasChildren()&&!!xd(i,r,n)}if(t.segments.length===r.length){if(!Dd(t.segments,r))return!1;if(!xd(t.segments,r,n))return!1;for(const r in e.children){if(!t.children[r])return!1;if(!Td(t.children[r],e.children[r],n))return!1}return!0}{const i=r.slice(0,t.segments.length),s=r.slice(t.segments.length);return!!Dd(t.segments,i)&&!!xd(t.segments,i,n)&&!!t.children.primary&&kd(t.children.primary,e,s,n)}}function xd(t,e,r){return e.every((e,n)=>Ed[r](t[n].parameters,e.parameters))}class Cd{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hd(this.queryParams)),this._queryParamMap}toString(){return Ld.serialize(this)}}class Ad{constructor(t,e){this.segments=t,this.children=e,this.parent=null,_d(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pd(this)}}class Rd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=hd(this.parameters)),this._parameterMap}toString(){return Vd(this)}}function Dd(t,e){return t.length===e.length&&t.every((t,r)=>t.path===e[r].path)}class Id{}class Od{parse(t){const e=new zd(t);return new Cd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Md(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const r=t[e];return Array.isArray(r)?r.map(t=>`${Nd(e)}=${Nd(t)}`).join("&"):`${Nd(e)}=${Nd(r)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Ld=new Od;function Pd(t){return t.segments.map(t=>Vd(t)).join("/")}function Md(t,e){if(!t.hasChildren())return Pd(t);if(e){const e=t.children.primary?Md(t.children.primary,!1):"",r=[];return _d(t.children,(t,e)=>{"primary"!==e&&r.push(`${e}:${Md(t,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(t,e){let r=[];return _d(t.children,(t,n)=>{"primary"===n&&(r=r.concat(e(t,n)))}),_d(t.children,(t,n)=>{"primary"!==n&&(r=r.concat(e(t,n)))}),r}(t,(e,r)=>"primary"===r?[Md(t.children.primary,!1)]:[`${r}:${Md(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Pd(t)}/${e[0]}`:`${Pd(t)}/(${e.join("//")})`}}function Fd(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nd(t){return Fd(t).replace(/%3B/gi,";")}function Ud(t){return Fd(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bd(t){return decodeURIComponent(t)}function jd(t){return Bd(t.replace(/\+/g,"%20"))}function Vd(t){return`${Ud(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Ud(t)}=${Ud(e[t])}`).join("")}`;var e}const Gd=/^[^\/()?;=#]+/;function Hd(t){const e=t.match(Gd);return e?e[0]:""}const Kd=/^[^=?&#]+/,$d=/^[^?&#]+/;class zd{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ad([],{}):new Ad([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r.primary=new Ad(t,e)),r}parseSegment(){const t=Hd(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Rd(Bd(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Hd(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const t=Hd(this.remaining);t&&(r=t,this.capture(r))}t[Bd(e)]=Bd(r)}parseQueryParam(t){const e=function(t){const e=t.match(Kd);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const t=function(t){const e=t.match($d);return e?e[0]:""}(this.remaining);t&&(r=t,this.capture(r))}const n=jd(e),i=jd(r);if(t.hasOwnProperty(n)){let e=t[n];Array.isArray(e)||(e=[e],t[n]=e),e.push(i)}else t[n]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Hd(this.remaining),n=this.remaining[r.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error(`Cannot parse url '${this.url}'`);let i;r.indexOf(":")>-1?(i=r.substr(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new Ad([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class qd{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Wd(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Wd(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Yd(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Yd(t,this._root).map(t=>t.value)}}function Wd(t,e){if(t===e.value)return e;for(const r of e.children){const e=Wd(t,r);if(e)return e}return null}function Yd(t,e){if(t===e.value)return[e];for(const r of e.children){const n=Yd(t,r);if(n.length)return n.unshift(e),n}return[]}class Xd{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Zd(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Qd extends qd{constructor(t,e){super(t),this.snapshot=e,ih(this,t)}toString(){return this.snapshot.toString()}}function Jd(t,e){const r=function(t,e){const r=new rh([],{},{},"",{},"primary",e,null,t.root,-1,{});return new nh("",new Xd(r,[]))}(t,e),n=new ec([new Rd("",{})]),i=new ec({}),s=new ec({}),a=new ec({}),o=new ec(""),l=new th(n,i,a,o,s,"primary",e,r.root);return l.snapshot=r.root,new Qd(new Xd(l,[]),r)}class th{constructor(t,e,r,n,i,s,a,o){this.url=t,this.params=e,this.queryParams=r,this.fragment=n,this.data=i,this.outlet=s,this.component=a,this._futureSnapshot=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(x(t=>hd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(x(t=>hd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function eh(t,e="emptyOnly"){const r=t.pathFromRoot;let n=0;if("always"!==e)for(n=r.length-1;n>=1;){const t=r[n],e=r[n-1];if(t.routeConfig&&""===t.routeConfig.path)n--;else{if(e.component)break;n--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(n))}class rh{constructor(t,e,r,n,i,s,a,o,l,u,c){this.url=t,this.params=e,this.queryParams=r,this.fragment=n,this.data=i,this.outlet=s,this.component=a,this.routeConfig=o,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class nh extends qd{constructor(t,e){super(e),this.url=t,ih(this,e)}toString(){return sh(this._root)}}function ih(t,e){e.value._routerState=t,e.children.forEach(e=>ih(t,e))}function sh(t){const e=t.children.length>0?` { ${t.children.map(sh).join(", ")} } `:"";return`${t.value}${e}`}function ah(t){if(t.snapshot){const e=t.snapshot,r=t._futureSnapshot;t.snapshot=r,gd(e.queryParams,r.queryParams)||t.queryParams.next(r.queryParams),e.fragment!==r.fragment&&t.fragment.next(r.fragment),gd(e.params,r.params)||t.params.next(r.params),function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!gd(t[r],e[r]))return!1;return!0}(e.url,r.url)||t.url.next(r.url),gd(e.data,r.data)||t.data.next(r.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function oh(t,e){var r,n;return gd(t.params,e.params)&&Dd(r=t.url,n=e.url)&&r.every((t,e)=>gd(t.parameters,n[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||oh(t.parent,e.parent))}function lh(t,e,r){if(r&&t.shouldReuseRoute(e.value,r.value.snapshot)){const n=r.value;n._futureSnapshot=e.value;const i=function(t,e,r){return e.children.map(e=>{for(const n of r.children)if(t.shouldReuseRoute(e.value,n.value.snapshot))return lh(t,e,n);return lh(t,e)})}(t,e,r);return new Xd(n,i)}{if(t.shouldAttach(e.value)){const r=t.retrieve(e.value);if(null!==r){const t=r.route;return uh(e,t),t}}const r=new th(new ec((n=e.value).url),new ec(n.params),new ec(n.queryParams),new ec(n.fragment),new ec(n.data),n.outlet,n.component,n),i=e.children.map(e=>lh(t,e));return new Xd(r,i)}var n}function uh(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let r=0;r<t.children.length;++r)uh(t.children[r],e.children[r])}function ch(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function dh(t){return"object"==typeof t&&null!=t&&t.outlets}function hh(t,e,r,n,i){let s={};return n&&_d(n,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Cd(r.root===t?e:fh(r.root,t,e),s,i)}function fh(t,e,r){const n={};return _d(t.children,(t,i)=>{n[i]=t===e?r:fh(t,e,r)}),new Ad(t.segments,n)}class ph{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ch(r[0]))throw new Error("Root segment cannot have matrix parameters");const n=r.find(dh);if(n&&n!==yd(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gh{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function mh(t,e,r){if(t||(t=new Ad([],{})),0===t.segments.length&&t.hasChildren())return vh(t,e,r);const n=function(t,e,r){let n=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(n>=r.length)return s;const e=t.segments[i],a=r[n];if(dh(a))break;const o=`${a}`,l=n<r.length-1?r[n+1]:null;if(i>0&&void 0===o)break;if(o&&l&&"object"==typeof l&&void 0===l.outlets){if(!wh(o,l,e))return s;n+=2}else{if(!wh(o,{},e))return s;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}(t,e,r),i=r.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){const e=new Ad(t.segments.slice(0,n.pathIndex),{});return e.children.primary=new Ad(t.segments.slice(n.pathIndex),t.children),vh(e,0,i)}return n.match&&0===i.length?new Ad(t.segments,{}):n.match&&!t.hasChildren()?yh(t,e,r):n.match?vh(t,0,i):yh(t,e,r)}function vh(t,e,r){if(0===r.length)return new Ad(t.segments,{});{const n=function(t){return dh(t[0])?t[0].outlets:{primary:t}}(r),i={};return _d(n,(r,n)=>{"string"==typeof r&&(r=[r]),null!==r&&(i[n]=mh(t.children[n],e,r))}),_d(t.children,(t,e)=>{void 0===n[e]&&(i[e]=t)}),new Ad(t.segments,i)}}function yh(t,e,r){const n=t.segments.slice(0,e);let i=0;for(;i<r.length;){const s=r[i];if(dh(s)){const t=_h(s.outlets);return new Ad(n,t)}if(0===i&&ch(r[0])){n.push(new Rd(t.segments[e].path,bh(r[0]))),i++;continue}const a=dh(s)?s.outlets.primary:`${s}`,o=i<r.length-1?r[i+1]:null;a&&o&&ch(o)?(n.push(new Rd(a,bh(o))),i+=2):(n.push(new Rd(a,{})),i++)}return new Ad(n,{})}function _h(t){const e={};return _d(t,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=yh(new Ad([],{}),0,t))}),e}function bh(t){const e={};return _d(t,(t,r)=>e[r]=`${t}`),e}function wh(t,e,r){return t==r.path&&gd(e,r.parameters)}class Eh{constructor(t,e,r,n){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=n}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),ah(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const n=Zd(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,n[e],r),delete n[e]}),_d(n,(t,e)=>{this.deactivateRouteAndItsChildren(t,r)})}deactivateRoutes(t,e,r){const n=t.value,i=e?e.value:null;if(n===i)if(n.component){const i=r.getContext(n.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const e=r.outlet.detach(),n=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:n})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),n=r&&t.value.component?r.children:e,i=Zd(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],n);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const n=Zd(e);t.children.forEach(t=>{this.activateRoutes(t,n[t.value.outlet],r),this.forwardEvent(new ud(t.value.snapshot))}),t.children.length&&this.forwardEvent(new od(t.value.snapshot))}activateRoutes(t,e,r){const n=t.value,i=e?e.value:null;if(ah(n),n===i)if(n.component){const i=r.getOrCreateContext(n.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,r);else if(n.component){const e=r.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){const t=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Sh(t.route)}else{const r=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(n.snapshot),i=r?r.module.componentFactoryResolver:null;e.attachRef=null,e.route=n,e.resolver=i,e.outlet&&e.outlet.activateWith(n,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,r)}}function Sh(t){ah(t.value),t.children.forEach(Sh)}class Th{constructor(t,e){this.routes=t,this.module=e}}function kh(t){return"function"==typeof t}function xh(t){return t instanceof Cd}const Ch=Symbol("INITIAL_VALUE");function Ah(){return fc(t=>function(...t){let e,r;return k(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),K(t,r).lift(new ac(e))}(t.map(t=>t.pipe(vc(1),bc(Ch)))).pipe(wc((t,e)=>{let r=!1;return e.reduce((t,n,i)=>{if(t!==Ch)return t;if(n===Ch&&(r=!0),!r){if(!1===n)return n;if(i===e.length-1||xh(n))return n}return t},t)},Ch),Tc(t=>t!==Ch),x(t=>xh(t)?t:!0===t),vc(1)))}let Rh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Is(0,"router-outlet")},directives:function(){return[Tf]},encapsulation:2}),t})();function Dh(t,e=""){for(let r=0;r<t.length;r++){const n=t[r];Ih(n,Oh(e,n))}}function Ih(t,e){t.children&&Dh(t.children,e)}function Oh(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Lh(t){const e=t.children&&t.children.map(Lh),r=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!r.component&&(e||r.loadChildren)&&r.outlet&&"primary"!==r.outlet&&(r.component=Rh),r}function Ph(t){return t.outlet||"primary"}function Mh(t,e){const r=t.filter(t=>Ph(t)===e);return r.push(...t.filter(t=>Ph(t)!==e)),r}const Fh={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Nh(t,e,r){var n;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||r.length>0)?Object.assign({},Fh):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||pd)(r,t,e);if(!i)return Object.assign({},Fh);const s={};_d(i.posParams,(t,e)=>{s[e]=t.path});const a=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a,positionalParamSegments:null!==(n=i.posParams)&&void 0!==n?n:{}}}function Uh(t,e,r,n,i="corrected"){if(r.length>0&&function(t,e,r){return r.some(r=>Bh(t,e,r)&&"primary"!==Ph(r))}(t,r,n)){const i=new Ad(e,function(t,e,r,n){const i={};i.primary=n,n._sourceSegment=t,n._segmentIndexShift=e.length;for(const s of r)if(""===s.path&&"primary"!==Ph(s)){const r=new Ad([],{});r._sourceSegment=t,r._segmentIndexShift=e.length,i[Ph(s)]=r}return i}(t,e,n,new Ad(r,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===r.length&&function(t,e,r){return r.some(r=>Bh(t,e,r))}(t,r,n)){const s=new Ad(t.segments,function(t,e,r,n,i,s){const a={};for(const o of n)if(Bh(t,r,o)&&!i[Ph(o)]){const r=new Ad([],{});r._sourceSegment=t,r._segmentIndexShift="legacy"===s?t.segments.length:e.length,a[Ph(o)]=r}return Object.assign(Object.assign({},i),a)}(t,e,r,n,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:r}}const s=new Ad(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:r}}function Bh(t,e,r){return(!(t.hasChildren()||e.length>0)||"full"!==r.pathMatch)&&""===r.path}function jh(t,e,r,n){return!!(Ph(t)===n||"primary"!==n&&Bh(e,r,t))&&("**"===t.path||Nh(e,t,r).matched)}function Vh(t,e,r){return 0===e.length&&!t.children[r]}class Gh{constructor(t){this.segmentGroup=t||null}}class Hh{constructor(t){this.urlTree=t}}function Kh(t){return new y(e=>e.error(new Gh(t)))}function $h(t){return new y(e=>e.error(new Hh(t)))}function zh(t){return new y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class qh{constructor(t,e,r,n,i){this.configLoader=e,this.urlSerializer=r,this.urlTree=n,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(no)}apply(){const t=Uh(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ad(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,"primary").pipe(x(t=>this.createUrlTree(Wh(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Cc(t=>{if(t instanceof Hh)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Gh)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(x(e=>this.createUrlTree(Wh(e),t.queryParams,t.fragment))).pipe(Cc(t=>{if(t instanceof Gh)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const n=t.segments.length>0?new Ad([],{primary:t}):t;return new Cd(n,e,r)}expandSegmentGroup(t,e,r,n){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(x(t=>new Ad([],t))):this.expandSegment(t,r,e,r.segments,n,!0)}expandChildren(t,e,r){const n=[];for(const i of Object.keys(r.children))"primary"===i?n.unshift(i):n.push(i);return F(n).pipe(Dc(n=>{const i=r.children[n],s=Mh(e,n);return this.expandSegmentGroup(t,s,i,n).pipe(x(t=>({segment:t,outlet:n})))}),wc((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const r=arguments.length>=2;return n=>n.pipe(t?Tc((e,r)=>t(e,r,n)):v,Ic(1),r?Uc(e):Pc(()=>new lc))}())}expandSegment(t,e,r,n,i,s){return F(r).pipe(Dc(a=>this.expandSegmentAgainstRoute(t,e,r,a,n,i,s).pipe(Cc(t=>{if(t instanceof Gh)return tc(null);throw t}))),Vc(t=>!!t),Cc((t,r)=>{if(t instanceof lc||"EmptyError"===t.name){if(Vh(e,n,i))return tc(new Ad([],{}));throw new Gh(e)}throw t}))}expandSegmentAgainstRoute(t,e,r,n,i,s,a){return jh(n,e,i,s)?void 0===n.redirectTo?this.matchSegmentAgainstRoute(t,e,n,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,n,i,s):Kh(e):Kh(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,n,i,s){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,n,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,n,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,n){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$h(i):this.lineralizeSegments(r,i).pipe(j(r=>{const i=new Ad(r,{});return this.expandSegment(t,i,e,r,n,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,n,i,s){const{matched:a,consumedSegments:o,lastChild:l,positionalParamSegments:u}=Nh(e,n,i);if(!a)return Kh(e);const c=this.applyRedirectCommands(o,n.redirectTo,u);return n.redirectTo.startsWith("/")?$h(c):this.lineralizeSegments(n,c).pipe(j(n=>this.expandSegment(t,e,r,n.concat(i.slice(l)),s,!1)))}matchSegmentAgainstRoute(t,e,r,n,i){if("**"===r.path)return r.loadChildren?(r._loadedConfig?tc(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe(x(t=>(r._loadedConfig=t,new Ad(n,{})))):tc(new Ad(n,{}));const{matched:s,consumedSegments:a,lastChild:o}=Nh(e,r,n);if(!s)return Kh(e);const l=n.slice(o);return this.getChildConfig(t,r,n).pipe(j(t=>{const n=t.module,s=t.routes,{segmentGroup:o,slicedSegments:u}=Uh(e,a,l,s),c=new Ad(o.segments,o.children);if(0===u.length&&c.hasChildren())return this.expandChildren(n,s,c).pipe(x(t=>new Ad(a,t)));if(0===s.length&&0===u.length)return tc(new Ad(a,{}));const d=Ph(r)===i;return this.expandSegment(n,c,s,u,d?"primary":i,!0).pipe(x(t=>new Ad(a.concat(t.segments),t.children)))}))}getChildConfig(t,e,r){return e.children?tc(new Th(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?tc(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe(j(r=>r?this.configLoader.load(t.injector,e).pipe(x(t=>(e._loadedConfig=t,t))):function(t){return new y(e=>e.error(fd(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):tc(new Th([],t))}runCanLoadGuards(t,e,r){const n=e.canLoad;return n&&0!==n.length?tc(n.map(n=>{const i=t.get(n);let s;if(function(t){return t&&kh(t.canLoad)}(i))s=i.canLoad(e,r);else{if(!kh(i))throw new Error("Invalid CanLoad guard");s=i(e,r)}return bd(s)})).pipe(Ah(),Hc(t=>{if(!xh(t))return;const e=fd(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),x(t=>!0===t)):tc(!0)}lineralizeSegments(t,e){let r=[],n=e.root;for(;;){if(r=r.concat(n.segments),0===n.numberOfChildren)return tc(r);if(n.numberOfChildren>1||!n.children.primary)return zh(t.redirectTo);n=n.children.primary}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,n){const i=this.createSegmentGroup(t,e.root,r,n);return new Cd(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return _d(t,(t,n)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);r[n]=e[i]}else r[n]=t}),r}createSegmentGroup(t,e,r,n){const i=this.createSegments(t,e.segments,r,n);let s={};return _d(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,r,n)}),new Ad(i,s)}createSegments(t,e,r,n){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,n):this.findOrReturn(e,r))}findPosParam(t,e,r){const n=r[e.path.substring(1)];if(!n)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return n}findOrReturn(t,e){let r=0;for(const n of e){if(n.path===t.path)return e.splice(r),n;r++}return t}}function Wh(t){const e={};for(const r of Object.keys(t.children)){const n=Wh(t.children[r]);(n.segments.length>0||n.hasChildren())&&(e[r]=n)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ad(t.segments.concat(e.segments),e.children)}return t}(new Ad(t.segments,e))}class Yh{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Xh{constructor(t,e){this.component=t,this.route=e}}function Zh(t,e,r){const n=t._root;return Jh(n,e?e._root:null,r,[n.value])}function Qh(t,e,r){const n=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(n?n.module.injector:r).get(t)}function Jh(t,e,r,n,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Zd(e);return t.children.forEach(t=>{!function(t,e,r,n,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,a=e?e.value:null,o=r?r.getContext(t.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const l=function(t,e,r){if("function"==typeof r)return r(t,e);switch(r){case"pathParamsChange":return!Dd(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Dd(t.url,e.url)||!gd(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oh(t,e)||!gd(t.queryParams,e.queryParams);case"paramsChange":default:return!oh(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Yh(n)):(s.data=a.data,s._resolvedData=a._resolvedData),Jh(t,e,s.component?o?o.children:null:r,n,i),l&&o&&o.outlet&&o.outlet.isActivated&&i.canDeactivateChecks.push(new Xh(o.outlet.component,a))}else a&&tf(e,o,i),i.canActivateChecks.push(new Yh(n)),Jh(t,null,s.component?o?o.children:null:r,n,i)}(t,s[t.value.outlet],r,n.concat([t.value]),i),delete s[t.value.outlet]}),_d(s,(t,e)=>tf(t,r.getContext(e),i)),i}function tf(t,e,r){const n=Zd(t),i=t.value;_d(n,(t,n)=>{tf(t,i.component?e?e.children.getContext(n):null:e,r)}),r.canDeactivateChecks.push(new Xh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ef{}function rf(t){return new y(e=>e.error(t))}class nf{constructor(t,e,r,n,i,s){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=n,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=Uh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary");if(null===e)return null;const r=new rh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),n=new Xd(r,e),i=new nh(this.url,n);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,r=eh(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const i of Object.keys(e.children)){const n=e.children[i],s=Mh(t,i),a=this.processSegmentGroup(s,n,i);if(null===a)return null;r.push(...a)}const n=af(r);return n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,r,n){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,r,n);if(null!==t)return t}return Vh(e,r,n)?[]:null}processSegmentAgainstRoute(t,e,r,n){if(t.redirectTo||!jh(t,e,r,n))return null;let i,s=[],a=[];if("**"===t.path){const n=r.length>0?yd(r).parameters:{};i=new rh(r,n,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uf(t),Ph(t),t.component,t,of(e),lf(e)+r.length,cf(t))}else{const n=Nh(e,t,r);if(!n.matched)return null;s=n.consumedSegments,a=r.slice(n.lastChild),i=new rh(s,n.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uf(t),Ph(t),t.component,t,of(e),lf(e)+s.length,cf(t))}const o=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:u}=Uh(e,s,a,o.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const t=this.processChildren(o,l);return null===t?null:[new Xd(i,t)]}if(0===o.length&&0===u.length)return[new Xd(i,[])];const c=Ph(t)===n,d=this.processSegment(o,l,u,c?"primary":n);return null===d?null:[new Xd(i,d)]}}function sf(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function af(t){const e=[],r=new Set;for(const n of t){if(!sf(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...n.children),r.add(t)):e.push(n)}for(const n of r){const t=af(n.children);e.push(new Xd(n.value,t))}return e.filter(t=>!r.has(t))}function of(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function lf(t){let e=t,r=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,r+=e._segmentIndexShift?e._segmentIndexShift:0;return r-1}function uf(t){return t.data||{}}function cf(t){return t.resolve||{}}function df(t){return fc(e=>{const r=t(e);return r?F(r).pipe(x(()=>e)):tc(e)})}class hf extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const ff=new Mr("ROUTES");class pf{constructor(t,e,r,n){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=n}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe(x(r=>{this.onLoadEndListener&&this.onLoadEndListener(e);const n=r.create(t);return new Th(vd(n.injector.get(ff,void 0,_t.Self|_t.Optional)).map(Lh),n)}),Cc(t=>{throw e._loader$=void 0,t}));return e._loader$=new W(r,()=>new S).pipe($()),e._loader$}loadModuleFactory(t){return"string"==typeof t?F(this.loader.load(t)):bd(t()).pipe(j(t=>t instanceof io?tc(t):F(this.compiler.compileModuleAsync(t))))}}class gf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new mf,this.attachRef=null}}class mf{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new gf,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class vf{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function yf(t){throw t}function _f(t,e,r){return e.parse("/")}function bf(t,e){return tc(null)}const wf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ef={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sf=(()=>{class t{constructor(t,e,r,n,i,s,a,o){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=r,this.location=n,this.config=o,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new S,this.errorHandler=yf,this.malformedUriErrorHandler=_f,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:bf,afterPreactivation:bf},this.urlHandlingStrategy=new vf,this.routeReuseStrategy=new hf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=i.get(no),this.console=i.get(Xo);const l=i.get(ul);this.isNgZoneEnabled=l instanceof ul&&ul.isInAngularZone(),this.resetConfig(o),this.currentUrlTree=new Cd(new Ad([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pf(s,a,t=>this.triggerEvent(new id(t)),t=>this.triggerEvent(new sd(t))),this.routerState=Jd(this.currentUrlTree,this.rootComponentType),this.transitions=new ec({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Tc(t=>0!==t.id),x(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),fc(t=>{let r=!1,n=!1;return tc(t).pipe(Hc(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),fc(t=>{const r=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||r)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return tc(t).pipe(fc(t=>{const r=this.transitions.getValue();return e.next(new Yc(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==this.transitions.getValue()?cc:Promise.resolve(t)}),function(t,e,r,n){return fc(i=>function(t,e,r,n,i){return new qh(t,e,r,n,i).apply()}(t,e,r,i.extractedUrl,n).pipe(x(t=>Object.assign(Object.assign({},i),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Hc(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,r,n,i){return j(s=>function(t,e,r,n,i="emptyOnly",s="legacy"){try{const a=new nf(t,e,r,n,i,s).recognize();return null===a?rf(new ef):tc(a)}catch(a){return rf(a)}}(t,e,s.urlAfterRedirects,r(s.urlAfterRedirects),n,i).pipe(x(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Hc(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const r=new Jc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(r)}));if(r&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:r,extractedUrl:n,source:i,restoredState:s,extras:a}=t,o=new Yc(r,this.serializeUrl(n),i,s);e.next(o);const l=Jd(n,this.rootComponentType).snapshot;return tc(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:n,extras:Object.assign(Object.assign({},a),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),cc}),df(t=>{const{targetSnapshot:e,id:r,extractedUrl:n,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:a}}=t;return this.hooks.beforePreactivation(e,{navigationId:r,appliedUrlTree:n,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!a})}),Hc(t=>{const e=new td(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),x(t=>Object.assign(Object.assign({},t),{guards:Zh(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return j(r=>{const{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=r;return 0===a.length&&0===s.length?tc(Object.assign(Object.assign({},r),{guardsResult:!0})):function(t,e,r,n){return F(t).pipe(j(t=>function(t,e,r,n,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?tc(s.map(s=>{const a=Qh(s,e,i);let o;if(function(t){return t&&kh(t.canDeactivate)}(a))o=bd(a.canDeactivate(t,e,r,n));else{if(!kh(a))throw new Error("Invalid CanDeactivate guard");o=bd(a(t,e,r,n))}return o.pipe(Vc())})).pipe(Ah()):tc(!0)}(t.component,t.route,r,e,n)),Vc(t=>!0!==t,!0))}(a,n,i,t).pipe(j(r=>r&&"boolean"==typeof r?function(t,e,r,n){return F(e).pipe(Dc(e=>uc(function(t,e){return null!==t&&e&&e(new ad(t)),tc(!0)}(e.route.parent,n),function(t,e){return null!==t&&e&&e(new ld(t)),tc(!0)}(e.route,n),function(t,e,r){const n=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>hc(()=>tc(e.guards.map(i=>{const s=Qh(i,e.node,r);let a;if(function(t){return t&&kh(t.canActivateChild)}(s))a=bd(s.canActivateChild(n,t));else{if(!kh(s))throw new Error("Invalid CanActivateChild guard");a=bd(s(n,t))}return a.pipe(Vc())})).pipe(Ah())));return tc(i).pipe(Ah())}(t,e.path,r),function(t,e,r){const n=e.routeConfig?e.routeConfig.canActivate:null;return n&&0!==n.length?tc(n.map(n=>hc(()=>{const i=Qh(n,e,r);let s;if(function(t){return t&&kh(t.canActivate)}(i))s=bd(i.canActivate(e,t));else{if(!kh(i))throw new Error("Invalid CanActivate guard");s=bd(i(e,t))}return s.pipe(Vc())}))).pipe(Ah()):tc(!0)}(t,e.route,r))),Vc(t=>!0!==t,!0))}(n,s,t,e):tc(r)),x(t=>Object.assign(Object.assign({},r),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Hc(t=>{if(xh(t.guardsResult)){const e=fd(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new ed(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Tc(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const r=new Zc(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(r),t.resolve(!1),!1}return!0}),df(t=>{if(t.guards.canActivateChecks.length)return tc(t).pipe(Hc(t=>{const e=new rd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),fc(t=>{let r=!1;return tc(t).pipe((n=this.paramsInheritanceStrategy,i=this.ngModule.injector,j(t=>{const{targetSnapshot:e,guards:{canActivateChecks:r}}=t;if(!r.length)return tc(t);let s=0;return F(r).pipe(Dc(t=>function(t,e,r,n){return function(t,e,r,n){const i=Object.keys(t);if(0===i.length)return tc({});const s={};return F(i).pipe(j(i=>function(t,e,r,n){const i=Qh(t,e,n);return bd(i.resolve?i.resolve(e,r):i(e,r))}(t[i],e,r,n).pipe(Hc(t=>{s[i]=t}))),Ic(1),j(()=>Object.keys(s).length===i.length?tc(s):cc))}(t._resolve,t,e,n).pipe(x(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),eh(t,r).resolve),null)))}(t.route,e,n,i)),Hc(()=>s++),Ic(1),j(e=>s===r.length?tc(t):cc))})),Hc({next:()=>r=!0,complete:()=>{if(!r){const r=new Zc(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(r),t.resolve(!1)}}}));var n,i}),Hc(t=>{const e=new nd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),df(t=>{const{targetSnapshot:e,id:r,extractedUrl:n,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:a}}=t;return this.hooks.afterPreactivation(e,{navigationId:r,appliedUrlTree:n,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!a})}),x(t=>{const e=function(t,e,r){const n=lh(t,e._root,r?r._root:void 0);return new Qd(n,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Hc(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,a=this.routeReuseStrategy,o=t=>this.triggerEvent(t),x(t=>(new Eh(a,t.targetRouterState,t.currentRouterState,o).activate(s),t))),Hc({next(){r=!0},complete(){r=!0}}),(i=()=>{if(!r&&!n){this.resetUrlToCurrentUrlTree();const r=new Zc(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(r),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new zc(i))),Cc(r=>{if(n=!0,(i=r)&&i.ngNavigationCancelingError){const n=xh(r.url);n||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Zc(t.id,this.serializeUrl(t.extractedUrl),r.message);e.next(i),n?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(r.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const n=new Qc(t.id,this.serializeUrl(t.extractedUrl),r);e.next(n);try{t.resolve(this.errorHandler(r))}catch(s){t.reject(s)}}var i;return cc}));var i,s,a,o}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:r,urlTree:n}=e,i={replaceUrl:!0};if(r){const t=Object.assign({},r);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(n,t,r,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const r=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&r&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Dh(t),this.config=t.map(Lh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:r,queryParams:n,fragment:i,queryParamsHandling:s,preserveFragment:a}=e,o=r||this.routerState.root,l=a?this.currentUrlTree.fragment:i;let u=null;switch(s){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),n);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=n||null}return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,r,n,i){if(0===r.length)return hh(e.root,e.root,e,n,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ph(!0,0,t);let e=0,r=!1;const n=t.reduce((t,n,i)=>{if("object"==typeof n&&null!=n){if(n.outlets){const e={};return _d(n.outlets,(t,r)=>{e[r]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(n.segmentPath)return[...t,n.segmentPath]}return"string"!=typeof n?[...t,n]:0===i?(n.split("/").forEach((n,i)=>{0==i&&"."===n||(0==i&&""===n?r=!0:".."===n?e++:""!=n&&t.push(n))}),t):[...t,n]},[]);return new ph(r,e,n)}(r);if(s.toRoot())return hh(e.root,new Ad([],{}),e,n,i);const a=function(t,e,r){if(t.isAbsolute)return new gh(e.root,!0,0);if(-1===r.snapshot._lastPathIndex){const t=r.snapshot._urlSegment;return new gh(t,t===e.root,0)}const n=ch(t.commands[0])?0:1;return function(t,e,r){let n=t,i=e,s=r;for(;s>i;){if(s-=i,n=n.parent,!n)throw new Error("Invalid number of '../'");i=n.segments.length}return new gh(n,!1,i-s)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+n,t.numberOfDoubleDots)}(s,e,t),o=a.processChildren?vh(a.segmentGroup,a.index,s.commands):mh(a.segmentGroup,a.index,s.commands);return hh(a.segmentGroup,o,e,n,i)}(o,this.currentUrlTree,t,u,null!=l?l:null)}navigateByUrl(t,e={skipLocationChange:!1}){const r=xh(t)?t:this.parseUrl(t),n=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(n,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const r=t[e];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(r){e=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return e}isActive(t,e){let r;if(r=!0===e?Object.assign({},wf):!1===e?Object.assign({},Ef):e,xh(t))return Sd(this.currentUrlTree,t,r);const n=this.parseUrl(t);return Sd(this.currentUrlTree,n,r)}removeEmptyProps(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return null!=n&&(e[r]=n),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Xc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,r,n,i){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),a="imperative"!==e&&"imperative"===(null==s?void 0:s.source),o=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(a&&o)return Promise.resolve(!0);let l,u,c;i?(l=i.resolve,u=i.reject,c=i.promise):c=new Promise((t,e)=>{l=t,u=e});const d=++this.navigationId;return this.setTransition({id:d,source:e,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:n,resolve:l,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,r,n){const i=this.urlSerializer.serialize(t);n=n||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},n),{navigationId:r})):this.location.go(i,"",Object.assign(Object.assign({},n),{navigationId:r}))}resetStateAndUrl(t,e,r){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(Qr(Nr),Qr(Id),Qr(mf),Qr(nu),Qr(cs),Qr(Ol),Qr(al),Qr(void 0))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Tf=(()=>{class t{constructor(t,e,r,n,i){this.parentContexts=t,this.location=e,this.resolver=r,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new So,this.deactivateEvents=new So,this.name=n||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const r=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),n=this.parentContexts.getOrCreateContext(this.name).children,i=new kf(t,n,this.location.injector);this.activated=this.location.createComponent(r,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(xs(mf),xs(ao),xs(ya),Lr("name"),xs(Wa))},t.\u0275dir=qt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class kf{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===th?this.route:t===mf?this.childContexts:this.parent.get(t,e)}}class xf{}class Cf{preload(t,e){return tc(null)}}let Af=(()=>{class t{constructor(t,e,r,n,i){this.router=t,this.injector=n,this.preloadingStrategy=i,this.loader=new pf(e,r,e=>t.triggerEvent(new id(e)),e=>t.triggerEvent(new sd(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Tc(t=>t instanceof Xc),Dc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(no);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const r=[];for(const n of e)if(n.loadChildren&&!n.canLoad&&n._loadedConfig){const t=n._loadedConfig;r.push(this.processRoutes(t.module,t.routes))}else n.loadChildren&&!n.canLoad?r.push(this.preloadConfig(t,n)):n.children&&r.push(this.processRoutes(t,n.children));return F(r).pipe(H(),x(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?tc(e._loadedConfig):this.loader.load(t.injector,e)).pipe(j(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Qr(Sf),Qr(Ol),Qr(al),Qr(cs),Qr(xf))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})(),Rf=(()=>{class t{constructor(t,e,r={}){this.router=t,this.viewportScroller=e,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Yc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new cd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Qr(Sf),Qr(wu),Qr(void 0))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();const Df=new Mr("ROUTER_CONFIGURATION"),If=new Mr("ROUTER_FORROOT_GUARD"),Of=[nu,{provide:Id,useClass:Od},{provide:Sf,useFactory:function(t,e,r,n,i,s,a,o={},l,u){const c=new Sf(null,t,e,r,n,i,s,vd(a));return l&&(c.urlHandlingStrategy=l),u&&(c.routeReuseStrategy=u),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(o,c),o.enableTracing&&c.events.subscribe(t=>{var e,r;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(r=console.groupEnd)||void 0===r||r.call(console)}),c},deps:[Id,mf,nu,cs,Ol,al,ff,Df,[class{},new nn],[class{},new nn]]},mf,{provide:th,useFactory:function(t){return t.routerState.root},deps:[Sf]},{provide:Ol,useClass:Ml},Af,Cf,class{preload(t,e){return e().pipe(Cc(()=>tc(null)))}},{provide:Df,useValue:{enableTracing:!1}}];function Lf(){return new kl("Router",Sf)}let Pf=(()=>{class t{constructor(t,e){}static forRoot(e,r){return{ngModule:t,providers:[Of,Uf(e),{provide:If,useFactory:Nf,deps:[[Sf,new nn,new sn]]},{provide:Df,useValue:r||{}},{provide:Ql,useFactory:Ff,deps:[Hl,[new rn(tu),new nn],Df]},{provide:Rf,useFactory:Mf,deps:[Sf,wu,Df]},{provide:xf,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Cf},{provide:kl,multi:!0,useFactory:Lf},[Bf,{provide:Go,multi:!0,useFactory:jf,deps:[Bf]},{provide:Gf,useFactory:Vf,deps:[Bf]},{provide:Yo,multi:!0,useExisting:Gf}]]}}static forChild(e){return{ngModule:t,providers:[Uf(e)]}}}return t.\u0275fac=function(e){return new(e||t)(Qr(If,8),Qr(Sf,8))},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})();function Mf(t,e,r){return r.scrollOffset&&e.setOffset(r.scrollOffset),new Rf(t,e,r)}function Ff(t,e,r={}){return r.useHash?new ru(t,e):new eu(t,e)}function Nf(t){return"guarded"}function Uf(t){return[{provide:Fr,multi:!0,useValue:t},{provide:ff,multi:!0,useValue:t}]}let Bf=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new S}appInitializer(){return this.injector.get($l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),r=this.injector.get(Sf),n=this.injector.get(Df);return"disabled"===n.initialNavigation?(r.setUpLocationChangeListener(),t(!0)):"enabled"===n.initialNavigation||"enabledBlocking"===n.initialNavigation?(r.hooks.afterPreactivation=()=>this.initNavigation?tc(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),r.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Df),r=this.injector.get(Af),n=this.injector.get(Rf),i=this.injector.get(Sf),s=this.injector.get(Dl);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),r.setUpPreloading(),n.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(Qr(cs))},t.\u0275prov=ct({token:t,factory:t.\u0275fac}),t})();function jf(t){return t.appInitializer.bind(t)}function Vf(t){return t.bootstrapListener.bind(t)}const Gf=new Mr("Router Initializer"),Hf=[];let Kf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Pf.forRoot(Hf,{relativeLinkResolution:"legacy"})],Pf]}),t})();var $f=r(2738);let zf=(()=>{class t{constructor(){this.playingState=new S,this.loading=new ec(!0),this.videoEnded=new ec(!1)}get loading$(){return this.loading.asObservable()}setLoading(t){this.loading.next(t)}play(){this.playingState.next(!0)}pause(){this.playingState.next(!1)}get playingState$(){return this.playingState.asObservable()}get videoEnded$(){return this.videoEnded.asObservable()}setVideoEnded(t){this.videoEnded.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),qf=(()=>{class t{constructor(){this.volume=new ec(1)}setVolumeValue(t){this.volume.next(t)}get volumeValue$(){return this.volume.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Wf=(()=>{class t{constructor(){this.videoProgress=new ec(0),this.videoDuration=new ec(0),this.currentTime=new ec(0),this.ignore=new ec(!1)}setVideoDuration(t){this.videoDuration.next(t)}get videoDuration$(){return this.videoDuration.asObservable()}setVideoProgress(t){this.videoProgress.next(t)}get videoProgress$(){return this.videoProgress.asObservable()}setCurrentTime(t){this.currentTime.next(t)}get currentTime$(){return this.currentTime.asObservable()}setIgnore(t){this.ignore.next(t)}get ignore$(){return this.ignore.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Yf=(()=>{class t{constructor(t){this.videoService=t,this.list=new ec([]),this.currentVideo=new ec(""),this.shouldPlayNext=new ec(!0)}setShouldPlayNext(t){this.shouldPlayNext.next(t)}get shouldPlayNext$(){return this.shouldPlayNext.asObservable()}get list$(){return this.list.asObservable()}get currentVideo$(){return this.currentVideo.asObservable()}setCurrentVideo(t){this.currentVideo.getValue()!==t&&(this.currentVideo.next(t),this.videoService.pause())}playNextVideo(){const t=this.list.getValue().findIndex(t=>this.currentVideo.getValue()===t.url);this.setCurrentVideoByIndex(t+1)}setCurrentVideoByIndex(t){this.setCurrentVideo(this.list.getValue()[t].url)}fetchList(t){fetch(t).then(t=>t.json()).then(t=>{this.list.next(t),this.setCurrentVideo(t[0].url)})}}return t.\u0275fac=function(e){return new(e||t)(Qr(zf))},t.\u0275prov=ct({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Xf extends d{constructor(t,e){super()}schedule(t,e=0){return this}}class Zf extends Xf{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this}requestAsyncId(t,e,r=0){return setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let Qf=(()=>{class t{constructor(e,r=t.now){this.SchedulerAction=e,this.now=r}schedule(t,e=0,r){return new this.SchedulerAction(this,t).schedule(r,e)}}return t.now=()=>Date.now(),t})();class Jf extends Qf{constructor(t,e=Qf.now){super(t,()=>Jf.delegate&&Jf.delegate!==this?Jf.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,r){return Jf.delegate&&Jf.delegate!==this?Jf.delegate.schedule(t,e,r):super.schedule(t,e,r)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}const tp=new Jf(Zf);class ep{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new rp(t,this.dueTime,this.scheduler))}}class rp extends p{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(np,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function np(t){t.debouncedNext()}function ip(t){return null!=t&&"false"!=`${t}`}function sp(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function ap(t){return t instanceof Ea?t.nativeElement:t}let op;try{op="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(gm){op=!1}let lp,up,cp=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!op)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(Qr(Wo))},t.\u0275prov=ct({factory:function(){return new t(Qr(Wo))},token:t,providedIn:"root"}),t})(),dp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})();function hp(t){return function(){if(null==lp&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>lp=!0}))}finally{lp=lp||!1}return lp}()?t:!!t.capture}function fp(t){if(function(){if(null==up){const t="undefined"!=typeof document?document.head:null;up=!(!t||!t.createShadowRoot&&!t.attachShadow)}return up}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}let pp=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ct({factory:function(){return new t},token:t,providedIn:"root"}),t})(),gp=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=ap(t);return new y(t=>{const r=this._observeElement(e).subscribe(t);return()=>{r.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new S,r=this._mutationObserverFactory.create(t=>e.next(t));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:r}=this._observedElements.get(t);e&&e.disconnect(),r.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(Qr(pp))},t.\u0275prov=ct({factory:function(){return new t(Qr(pp))},token:t,providedIn:"root"}),t})(),mp=(()=>{class t{constructor(t,e,r){this._contentObserver=t,this._elementRef=e,this._ngZone=r,this.event=new So,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=ip(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=sp(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(function(t,e=tp){return r=>r.lift(new ep(t,e))}(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(xs(gp),xs(Ea),xs(ul))},t.\u0275dir=qt({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),vp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({providers:[pp]}),t})();function yp(t){return 0===t.buttons}function _p(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const bp=new Mr("cdk-focus-monitor-default-options"),wp=hp({passive:!0,capture:!0});let Ep=(()=>{class t{constructor(t,e,r,n){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=yp(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{_p(t)?this._lastTouchTarget||this._setOriginForCurrentEventQueue("keyboard"):(null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=Sp(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650))},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=Sp(t),r="focus"===t.type?this._onFocus:this._onBlur;for(let n=e;n;n=n.parentElement)r.call(this,t,n)},this._document=r,this._detectionMode=(null==n?void 0:n.detectionMode)||0}monitor(t,e=!1){const r=ap(t);if(!this._platform.isBrowser||1!==r.nodeType)return tc(null);const n=fp(r)||this._getDocument(),i=this._elementInfo.get(r);if(i)return e&&(i.checkChildren=!0),i.subject;const s={checkChildren:e,subject:new S,rootNode:n};return this._elementInfo.set(r,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(t){const e=ap(t),r=this._elementInfo.get(e);r&&(r.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(r))}focusVia(t,e,r){const n=ap(t);n===this._getDocument().activeElement?this._getClosestElementsInfo(n).forEach(([t,r])=>this._originChanged(t,e,r)):(this._setOriginForCurrentEventQueue(e),"function"==typeof n.focus&&n.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,r){r?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=Sp(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const r=this._elementInfo.get(e);r&&(r.checkChildren||e===Sp(t))&&this._originChanged(e,this._getFocusOrigin(t),r)}_onBlur(t,e){const r=this._elementInfo.get(e);!r||r.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(r.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,r=this._rootNodeFocusListenerCount.get(e)||0;r||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,wp),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,wp)}),this._rootNodeFocusListenerCount.set(e,r+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,wp),t.addEventListener("mousedown",this._documentMousedownListener,wp),t.addEventListener("touchstart",this._documentTouchstartListener,wp),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,wp),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,wp),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,wp),t.removeEventListener("mousedown",this._documentMousedownListener,wp),t.removeEventListener("touchstart",this._documentTouchstartListener,wp),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(t,e,r){this._setClasses(t,e),this._emitOrigin(r.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((r,n)=>{(n===t||r.checkChildren&&n.contains(t))&&e.push([n,r])}),e}}return t.\u0275fac=function(e){return new(e||t)(Qr(ul),Qr(cp),Qr(Gl,8),Qr(bp,8))},t.\u0275prov=ct({factory:function(){return new t(Qr(ul),Qr(cp),Qr(Gl,8),Qr(bp,8))},token:t,providedIn:"root"}),t})();function Sp(t){return t.composedPath?t.composedPath()[0]:t.target}let Tp=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,r=e&&e.getComputedStyle?e.getComputedStyle(t):null,n=(r&&r.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),n){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black"),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}return t.\u0275fac=function(e){return new(e||t)(Qr(cp),Qr(Gl))},t.\u0275prov=ct({factory:function(){return new t(Qr(cp),Qr(Gl))},token:t,providedIn:"root"}),t})();const kp=new Mr("cdk-dir-doc",{providedIn:"root",factory:function(){return Jr(Gl)}});let xp=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new So,t){const e=t.documentElement?t.documentElement.dir:null,r=(t.body?t.body.dir:null)||e;this.value="ltr"===r||"rtl"===r?r:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(Qr(kp,8))},t.\u0275prov=ct({factory:function(){return new t(Qr(kp,8))},token:t,providedIn:"root"}),t})(),Cp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})();const Ap=new Aa("12.0.0");function Rp(){return"undefined"!=typeof window&&void 0!==window.document}function Dp(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let Ip=(t,e)=>!1,Op=(t,e)=>!1,Lp=(t,e,r)=>[];const Pp=Dp();(Pp||"undefined"!=typeof Element)&&(Rp()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),Op=(()=>{if(Pp||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,r)=>e.apply(t,[r]):Op}})());const Mp=new Mr("AnimationModuleType"),Fp=new Aa("12.0.0"),Np=new Mr("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Up,Bp=(()=>{class t{constructor(t,e,r){this._hasDoneGlobalChecks=!1,this._document=r,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return Sl()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&Fp.full!==Ap.full&&console.warn("The Angular Material version ("+Fp.full+") does not match the Angular CDK version ("+Ap.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(Qr(Tp),Qr(Np,8),Qr(Gl))},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Cp],Cp]}),t})();function jp(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=ip(t)}}}function Vp(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}function Gp(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ip(t)}}}function Hp(t,e=0){return class extends t{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?sp(t):this.defaultTabIndex}}}try{Up="undefined"!=typeof Intl}catch(gm){Up=!1}let Kp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=qt({type:t,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),t})();function $p(t,e,r){const n=t.nativeElement.classList;r?n.add(e):n.remove(e)}let zp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Bp],Bp]}),t})();class qp{constructor(t,e,r){this._renderer=t,this.element=e,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Wp={enterDuration:450,exitDuration:400},Yp=hp({passive:!0}),Xp=["mousedown","touchstart"],Zp=["mouseup","mouseleave","touchend","touchcancel"];class Qp{constructor(t,e,r,n){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,n.isBrowser&&(this._containerElement=ap(r))}fadeInRipple(t,e,r={}){const n=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},Wp),r.animation);r.centered&&(t=n.left+n.width/2,e=n.top+n.height/2);const s=r.radius||function(t,e,r){const n=Math.max(Math.abs(t-r.left),Math.abs(t-r.right)),i=Math.max(Math.abs(e-r.top),Math.abs(e-r.bottom));return Math.sqrt(n*n+i*i)}(t,e,n),a=t-n.left,o=e-n.top,l=i.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-s+"px",u.style.top=o-s+"px",u.style.height=2*s+"px",u.style.width=2*s+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)";const c=new qp(this,u,r);return c.state=0,this._activeRipples.add(c),r.persistent||(this._mostRecentTransientRipple=c),this._runTimeoutOutsideZone(()=>{const t=c===this._mostRecentTransientRipple;c.state=1,r.persistent||t&&this._isPointerDown||c.fadeOut()},l),c}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const r=t.element,n=Object.assign(Object.assign({},Wp),t.config.animation);r.style.transitionDuration=`${n.exitDuration}ms`,r.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,r.parentNode.removeChild(r)},n.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=ap(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(Xp))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Zp),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=yp(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||r||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!_p(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,Yp)})})}_removeTriggerEvents(){this._triggerElement&&(Xp.forEach(t=>{this._triggerElement.removeEventListener(t,this,Yp)}),this._pointerUpEventsRegistered&&Zp.forEach(t=>{this._triggerElement.removeEventListener(t,this,Yp)}))}}const Jp=new Mr("mat-ripple-global-options");let tg=(()=>{class t{constructor(t,e,r,n,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=n||{},this._rippleRenderer=new Qp(this,e,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(xs(Ea),xs(ul),xs(cp),xs(Jp,8),xs(Mp,8))},t.\u0275dir=qt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&Ks("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),eg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Bp,dp],Bp]}),t})(),rg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Bp]]}),t})();function ng(t,e){if(1&t&&(Ze(),Is(0,"circle",3)),2&t){const t=Ns();Hs("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),Ss("r",t._getCircleRadius())}}function ig(t,e){if(1&t&&(Ze(),Is(0,"circle",3)),2&t){const t=Ns();Hs("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),Ss("r",t._getCircleRadius())}}function sg(t,e){if(1&t&&(Ze(),Is(0,"circle",3)),2&t){const t=Ns();Hs("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),Ss("r",t._getCircleRadius())}}function ag(t,e){if(1&t&&(Ze(),Is(0,"circle",3)),2&t){const t=Ns();Hs("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),Ss("r",t._getCircleRadius())}}const og=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n";class lg{constructor(t){this._elementRef=t}}const ug=Vp(lg,"primary"),cg=new Mr("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});let dg=(()=>{class t extends ug{constructor(e,r,n,i,s){super(e),this._elementRef=e,this._document=n,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const a=t._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),a.has(n.head)||a.set(n.head,new Set([100])),this._fallbackAnimation=r.EDGE||r.TRIDENT,this._noopAnimations="NoopAnimations"===i&&!!s&&!s._forceAnimations,s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=sp(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=sp(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,sp(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=fp(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const e=this._styleRoot,r=this._diameter,n=t._diameters;let i=n.get(e);if(!i||!i.has(r)){const t=this._document.createElement("style");t.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),t.textContent=this._getAnimationText(),e.appendChild(t),i||(i=new Set,n.set(e,i)),i.add(r)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}return t.\u0275fac=function(e){return new(e||t)(xs(Ea),xs(cp),xs(Gl,8),xs(Mp,8),xs(cg))},t.\u0275cmp=Vt({type:t,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(Ss("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),Hs("width",e.diameter,"px")("height",e.diameter,"px"),Ks("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[hs],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Ze(),Rs(0,"svg",0),Ts(1,ng,1,9,"circle",1),Ts(2,ig,1,7,"circle",2),Ds()),2&t&&(Hs("width",e.diameter,"px")("height",e.diameter,"px"),Cs("ngSwitch","indeterminate"===e.mode),Ss("viewBox",e._getViewBox()),ti(1),Cs("ngSwitchCase",!0),ti(1),Cs("ngSwitchCase",!1))},directives:[vu,yu],styles:[og],encapsulation:2,changeDetection:0}),t._diameters=new WeakMap,t})(),hg=(()=>{class t extends dg{constructor(t,e,r,n,i){super(t,e,r,n,i),this.mode="indeterminate"}}return t.\u0275fac=function(e){return new(e||t)(xs(Ea),xs(cp),xs(Gl,8),xs(Mp,8),xs(cg))},t.\u0275cmp=Vt({type:t,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(t,e){2&t&&(Hs("width",e.diameter,"px")("height",e.diameter,"px"),Ks("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color"},features:[hs],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Ze(),Rs(0,"svg",0),Ts(1,sg,1,9,"circle",1),Ts(2,ag,1,7,"circle",2),Ds()),2&t&&(Hs("width",e.diameter,"px")("height",e.diameter,"px"),Cs("ngSwitch","indeterminate"===e.mode),Ss("viewBox",e._getViewBox()),ti(1),Cs("ngSwitchCase",!0),ti(1),Cs("ngSwitchCase",!1))},directives:[vu,yu],styles:[og],encapsulation:2,changeDetection:0}),t})(),fg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Bp,bu],Bp]}),t})();const pg=["video"];function gg(t,e){1&t&&Is(0,"mat-spinner",4)}let mg=(()=>{class t{constructor(t,e,r,n){this.videoService=t,this.volumeService=e,this.videoTimeService=r,this.videoPlaylistService=n,this.playing=!1,this.hls=new $f,this.videoListeners={loadedmetadata:()=>this.videoTimeService.setVideoDuration(this.video.nativeElement.duration),canplay:()=>this.videoService.setLoading(!1),seeking:()=>this.videoService.setLoading(!0),timeupdate:()=>{this.ignore||this.videoTimeService.setVideoProgress(this.video.nativeElement.currentTime),this.video.nativeElement.currentTime===this.video.nativeElement.duration&&this.video.nativeElement.duration>0?(this.videoService.pause(),this.videoService.setVideoEnded(!0)):this.videoService.setVideoEnded(!1)}}}ngOnInit(){this.subscriptions(),Object.keys(this.videoListeners).forEach(t=>this.video.nativeElement.addEventListener(t,this.videoListeners[t]))}onVideoClick(){this.playing?this.videoService.pause():this.videoService.play()}onDoubleClick(){if(document.fullscreenElement)document.exitFullscreen();else{const t=document.querySelector(".video-player");t.requestFullscreen&&t.requestFullscreen()}}load(t){$f.isSupported()?this.loadVideoWithHLS(t):this.video.nativeElement.canPlayType("application/vnd.apple.mpegurl")&&this.loadVideo(t)}playPauseVideo(t){this.playing=t,this.video.nativeElement[t?"play":"pause"]()}subscriptions(){this.videoService.playingState$.subscribe(t=>this.playPauseVideo(t)),this.videoPlaylistService.currentVideo$.subscribe(t=>this.load(t)),this.videoTimeService.currentTime$.subscribe(t=>this.video.nativeElement.currentTime=t),this.volumeService.volumeValue$.subscribe(t=>this.video.nativeElement.volume=t),this.videoService.loading$.subscribe(t=>this.loading=t),this.videoTimeService.ignore$.subscribe(t=>this.ignore=t)}loadVideoWithHLS(t){this.hls.loadSource(t),this.hls.attachMedia(this.video.nativeElement)}loadVideo(t){this.video.nativeElement.src=t}}return t.\u0275fac=function(e){return new(e||t)(xs(zf),xs(qf),xs(Wf),xs(Yf))},t.\u0275cmp=Vt({type:t,selectors:[["app-video-wrapper"]],viewQuery:function(t,e){if(1&t&&Fo(pg,7),2&t){let t;Mo(t=Uo())&&(e.video=t.first)}},decls:4,vars:1,consts:[[1,"video-wrapper"],[1,"video",3,"click","dblclick"],["video",""],["class","spinner","color","accent","strokeWidth","5",4,"ngIf"],["color","accent","strokeWidth","5",1,"spinner"]],template:function(t,e){1&t&&(Rs(0,"div",0),Rs(1,"video",1,2),Ps("click",function(){return e.onVideoClick()})("dblclick",function(){return e.onDoubleClick()}),Ds(),Ts(3,gg,1,0,"mat-spinner",3),Ds()),2&t&&(ti(3),Cs("ngIf",e.loading))},directives:[fu,hg],styles:[".video-wrapper[_ngcontent-%COMP%]{position:relative}.video-wrapper[_ngcontent-%COMP%]   .video[_ngcontent-%COMP%]{width:100%;max-height:80vh;margin:0 auto}.video-wrapper[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 50px);left:calc(50% - 50px)}"]}),t})();const vg=new Mr("NgValueAccessor"),yg=["sliderWrapper"],_g=hp({passive:!1}),bg={provide:vg,useExisting:nt(()=>Tg),multi:!0};class wg{}class Eg{constructor(t){this._elementRef=t}}const Sg=Hp(Vp(jp(Eg),"accent"));let Tg=(()=>{class t extends Sg{constructor(t,e,r,n,i,s,a,o){super(t),this._focusMonitor=e,this._changeDetectorRef=r,this._dir=n,this._ngZone=s,this._animationMode=o,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new So,this.input=new So,this.valueChange=new So,this.onTouched=()=>{},this._percent=0,this._isSliding=!1,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=d.EMPTY,this._pointerDown=t=>{this.disabled||this._isSliding||!kg(t)&&0!==t.button||this._ngZone.run(()=>{const e=this.value,r=xg(t);this._isSliding=!0,this._lastPointerEvent=t,t.preventDefault(),this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(t),this._focusHostElement(),this._updateValueFromPosition(r),this._valueOnSlideStart=e,e!=this.value&&this._emitInputEvent()})},this._pointerMove=t=>{if(this._isSliding){t.preventDefault();const e=this.value;this._lastPointerEvent=t,this._updateValueFromPosition(xg(t)),e!=this.value&&this._emitInputEvent()}},this._pointerUp=t=>{this._isSliding&&(t.preventDefault(),this._removeGlobalEvents(),this._isSliding=!1,this._valueOnSlideStart==this.value||this.disabled||this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=a,this.tabIndex=parseInt(i)||0,s.runOutsideAngular(()=>{const e=t.nativeElement;e.addEventListener("mousedown",this._pointerDown,_g),e.addEventListener("touchstart",this._pointerDown,_g)})}get invert(){return this._invert}set invert(t){this._invert=ip(t)}get max(){return this._max}set max(t){this._max=sp(t,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(t){this._min=sp(t,this._min),null===this._value&&(this.value=this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(t){this._step=sp(t,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(t){this._thumbLabel=ip(t)}get tickInterval(){return this._tickInterval}set tickInterval(t){this._tickInterval="auto"===t?"auto":"number"==typeof t||"string"==typeof t?sp(t,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(t){if(t!==this._value){let e=sp(t);this._roundToDecimal&&e!==this.min&&e!==this.max&&(e=parseFloat(e.toFixed(this._roundToDecimal))),this._value=e,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(t){this._vertical=ip(t)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(t){this._focusHostElement(t)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const t=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${t})`}}_getTrackFillStyles(){const t=this.percent,e=this.vertical?`1, ${t}, 1`:`${t}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${e})`,display:0===t?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let t=100*this._tickIntervalPercent,e={backgroundSize:this.vertical?`2px ${t}%`:`${t}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${t/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const t=this._shouldInvertAxis();let r;r=this.vertical?t?"Bottom":"Top":t?"Right":"Left",e[`padding${r}`]=`${this._getThumbGap()}px`}return e}_getThumbContainerStyles(){const t=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?t:!t)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const t=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?t:!t}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{this._isActive=!!t&&"keyboard"!==t,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const t=this._elementRef.nativeElement;t.removeEventListener("mousedown",this._pointerDown,_g),t.removeEventListener("touchstart",this._pointerDown,_g),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(t){if(this.disabled||function(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(t))return;const e=this.value;switch(t.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}e!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding=!0,t.preventDefault()}_onKeyup(){this._isSliding=!1}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(t){const e=this._document,r=kg(t),n=r?"touchend":"mouseup";e.addEventListener(r?"touchmove":"mousemove",this._pointerMove,_g),e.addEventListener(n,this._pointerUp,_g),r&&e.addEventListener("touchcancel",this._pointerUp,_g);const i=this._getWindow();void 0!==i&&i&&i.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const t=this._document;t.removeEventListener("mousemove",this._pointerMove,_g),t.removeEventListener("mouseup",this._pointerUp,_g),t.removeEventListener("touchmove",this._pointerMove,_g),t.removeEventListener("touchend",this._pointerUp,_g),t.removeEventListener("touchcancel",this._pointerUp,_g);const e=this._getWindow();void 0!==e&&e&&e.removeEventListener("blur",this._windowBlur)}_increment(t){this.value=this._clamp((this.value||0)+this.step*t,this.min,this.max)}_updateValueFromPosition(t){if(!this._sliderDimensions)return;let e=this._clamp(((this.vertical?t.y:t.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(e=1-e),0===e)this.value=this.min;else if(1===e)this.value=this.max;else{const t=this._calculateValue(e),r=Math.round((t-this.min)/this.step)*this.step+this.min;this.value=this._clamp(r,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(this.tickInterval&&this._sliderDimensions)if("auto"==this.tickInterval){let t=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width,e=Math.ceil(30/(t*this.step/(this.max-this.min)));this._tickIntervalPercent=e*this.step/t}else this._tickIntervalPercent=this.tickInterval*this.step/(this.max-this.min)}_createChangeEvent(t=this.value){let e=new wg;return e.source=this,e.value=t,e}_calculatePercentage(t){return((t||0)-this.min)/(this.max-this.min)}_calculateValue(t){return this.min+t*(this.max-this.min)}_clamp(t,e=0,r=1){return Math.max(e,Math.min(t,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(t){this._elementRef.nativeElement.focus(t)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(t){this.value=t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}}return t.\u0275fac=function(e){return new(e||t)(xs(Ea),xs(Ep),xs(Wa),xs(xp,8),Lr("tabindex"),xs(ul),xs(Gl),xs(Mp,8))},t.\u0275cmp=Vt({type:t,selectors:[["mat-slider"]],viewQuery:function(t,e){if(1&t&&Fo(yg,5),2&t){let t;Mo(t=Uo())&&(e._sliderWrapper=t.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(t,e){1&t&&Ps("focus",function(){return e._onFocus()})("blur",function(){return e._onBlur()})("keydown",function(t){return e._onKeydown(t)})("keyup",function(){return e._onKeyup()})("mouseenter",function(){return e._onMouseenter()})("selectstart",function(t){return t.preventDefault()}),2&t&&(ta("tabIndex",e.tabIndex),Ss("aria-disabled",e.disabled)("aria-valuemax",e.max)("aria-valuemin",e.min)("aria-valuenow",e.value)("aria-valuetext",null==e.valueText?e.displayValue:e.valueText)("aria-orientation",e.vertical?"vertical":"horizontal"),Ks("mat-slider-disabled",e.disabled)("mat-slider-has-ticks",e.tickInterval)("mat-slider-horizontal",!e.vertical)("mat-slider-axis-inverted",e._shouldInvertAxis())("mat-slider-invert-mouse-coords",e._shouldInvertMouseCoords())("mat-slider-sliding",e._isSliding)("mat-slider-thumb-label-showing",e.thumbLabel)("mat-slider-vertical",e.vertical)("mat-slider-min-value",e._isMinValue())("mat-slider-hide-last-tick",e.disabled||e._isMinValue()&&e._getThumbGap()&&e._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",value:"value",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",vertical:"vertical",displayWith:"displayWith",valueText:"valueText"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[ga([bg]),hs],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(t,e){1&t&&(Rs(0,"div",0,1),Rs(2,"div",2),Is(3,"div",3),Is(4,"div",4),Ds(),Rs(5,"div",5),Is(6,"div",6),Ds(),Rs(7,"div",7),Is(8,"div",8),Is(9,"div",9),Rs(10,"div",10),Rs(11,"span",11),Xs(12),Ds(),Ds(),Ds(),Ds()),2&t&&(ti(3),Cs("ngStyle",e._getTrackBackgroundStyles()),ti(1),Cs("ngStyle",e._getTrackFillStyles()),ti(1),Cs("ngStyle",e._getTicksContainerStyles()),ti(1),Cs("ngStyle",e._getTicksStyles()),ti(1),Cs("ngStyle",e._getThumbContainerStyles()),ti(5),Zs(e.displayValue))},directives:[_u],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:-webkit-grabbing;cursor:grabbing}.mat-slider-wrapper{position:absolute;-webkit-print-color-adjust:exact;color-adjust:exact}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{background-repeat:repeat;background-clip:content-box;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:-webkit-grab;cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),t})();function kg(t){return"t"===t.type[0]}function xg(t){const e=kg(t)?t.touches[0]||t.changedTouches[0]:t;return{x:e.clientX,y:e.clientY}}let Cg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[bu,Bp],Bp]}),t})(),Ag=(()=>{class t{constructor(){this.input=new So,this.change=new So}inputHandler(t){this.input.emit(t)}changeHandler(t){this.change.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-progress-bar"]],inputs:{max:"max",value:"value",label:"label"},outputs:{input:"input",change:"change"},decls:1,vars:3,consts:[["min","0","step","0.00001",1,"slider",3,"max","value","input","change"]],template:function(t,e){1&t&&(Rs(0,"mat-slider",0),Ps("input",function(t){return e.inputHandler(t)})("change",function(t){return e.changeHandler(t)}),Ds()),2&t&&(Cs("max",e.max)("value",e.value),Ss("aria-label",e.label))},directives:[Tg],styles:[".slider[_ngcontent-%COMP%]{width:100%}"]}),t})(),Rg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-control"]],inputs:{icon:"icon",title:"title"},decls:3,vars:2,consts:[[1,"button",3,"title"],[1,"material-icons"]],template:function(t,e){1&t&&(Rs(0,"button",0),Rs(1,"i",1),Xs(2),Ds(),Ds()),2&t&&(Cs("title",e.title),ti(2),Zs(e.icon))},styles:[".button[_ngcontent-%COMP%]{border:none;background-color:transparent;min-width:3rem;min-height:3rem;cursor:pointer}.button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}"]}),t})(),Dg=(()=>{class t{constructor(t){this.volumeService=t,this.volume=1,this.maxVolumeValue=1,this.iconVolumeUp={name:"Unmute",value:"volume_up"},this.iconVolumeMute={name:"Mute",value:"volume_off"},this.label="Video progress",this.savedVolume=1}ngOnInit(){this.volumeService.volumeValue$.subscribe(t=>this.volume=t)}onVolumeClick(){this.savedVolume=0===this.volume?this.savedVolume:this.volume,this.volumeService.setVolumeValue(this.volume>0?0:this.savedVolume)}onInput(t){this.volumeService.setVolumeValue(t.value)}get icon(){return 0===this.volume?this.iconVolumeMute.value:this.iconVolumeUp.value}get title(){return 0===this.volume?this.iconVolumeMute.name:this.iconVolumeUp.name}get ariaLabel(){return this.label}}return t.\u0275fac=function(e){return new(e||t)(xs(qf))},t.\u0275cmp=Vt({type:t,selectors:[["app-control-volume"]],decls:3,vars:5,consts:[[1,"volume-control"],[1,"icon",3,"icon","title","click"],["tabindex","0",1,"bar",3,"max","value","label","input"]],template:function(t,e){1&t&&(Rs(0,"div",0),Rs(1,"app-control",1),Ps("click",function(){return e.onVolumeClick()}),Ds(),Rs(2,"app-progress-bar",2),Ps("input",function(t){return e.onInput(t)}),Ds(),Ds()),2&t&&(ti(1),Cs("icon",e.icon)("title",e.title),ti(1),Cs("max",e.maxVolumeValue)("value",e.volume)("label",e.ariaLabel))},directives:[Rg,Ag],styles:[".volume-control[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:flex-start}.volume-control[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:focus, .volume-control[_ngcontent-%COMP%]:hover   .bar[_ngcontent-%COMP%]{pointer-events:all;width:auto;margin-right:1em}.volume-control[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:relative}.volume-control[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:0;overflow:hidden;pointer-events:none}"]}),t})(),Ig=(()=>{class t{padZeros(t=0,e=2){return`${Math.floor(t)}`.padStart(e,"0")}get durationMinutes(){return this.duration/60}get durationSeconds(){return this.duration-60*Math.floor(this.durationMinutes)}get currentMinutes(){return this.currentProgress/60}get currentSeconds(){return this.currentProgress-60*Math.floor(this.currentMinutes)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-time"]],inputs:{duration:"duration",currentProgress:"currentProgress"},decls:7,vars:4,consts:[[1,"time"]],template:function(t,e){1&t&&(Rs(0,"p",0),Rs(1,"span"),Xs(2),Ds(),Rs(3,"span"),Xs(4," / "),Ds(),Rs(5,"span"),Xs(6),Ds(),Ds()),2&t&&(ti(2),Js(" ",e.padZeros(e.currentMinutes),":",e.padZeros(e.currentSeconds)," "),ti(4),Js(" ",e.padZeros(e.durationMinutes),":",e.padZeros(e.durationSeconds)," "))},styles:['.time[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;line-height:1em;font-size:12px;font-feature-settings:"tnum";font-variant-numeric:tabular-nums}']}),t})(),Og=(()=>{class t{constructor(t,e,r){this.videoService=t,this.videoTimeService=e,this.videoPlaylistService=r,this.playing=!1,this.currentProgress=0,this.duration=0,this.currentTime=0,this.label="Audio volume",this.videoEnded=!1}ngOnInit(){this.videoService.playingState$.subscribe(t=>this.playing=t),this.videoTimeService.videoDuration$.subscribe(t=>this.duration=t),this.videoTimeService.videoProgress$.subscribe(t=>this.currentProgress=t),this.videoService.videoEnded$.subscribe(t=>this.videoEnded=t)}onPlayClick(){this.playing?this.videoService.pause():this.videoService.play()}onNextClick(){this.videoPlaylistService.playNextVideo(),this.videoService.play()}onInput(t){this.videoTimeService.setIgnore(!0),this.videoTimeService.setVideoProgress(t.value)}onChange(t){this.videoTimeService.setIgnore(!1),this.videoTimeService.setCurrentTime(t.value)}onFullscreen(){if(document.fullscreenElement)document.exitFullscreen();else{const t=document.querySelector(".video-player");t.requestFullscreen&&t.requestFullscreen()}}get iconPlaying(){return this.videoEnded?{name:"Replay",value:"replay"}:this.playing?{name:"Pause",value:"pause"}:{name:"Play",value:"play_arrow"}}ariaLabel(){return this.label}}return t.\u0275fac=function(e){return new(e||t)(xs(zf),xs(Wf),xs(Yf))},t.\u0275cmp=Vt({type:t,selectors:[["app-controls"]],decls:9,vars:7,consts:[[1,"video-controls"],[1,"bar",3,"max","value","label","input","change"],[1,"controls"],[3,"icon","title","click"],["icon","skip_next","title","Next",3,"click"],[3,"currentProgress","duration"],[1,"full-screen"],["icon","fullscreen","title","Fullscreen",3,"click"]],template:function(t,e){1&t&&(Rs(0,"div",0),Rs(1,"app-progress-bar",1),Ps("input",function(t){return e.onInput(t)})("change",function(t){return e.onChange(t)}),Ds(),Rs(2,"div",2),Rs(3,"app-control",3),Ps("click",function(){return e.onPlayClick()}),Ds(),Rs(4,"app-control",4),Ps("click",function(){return e.onNextClick()}),Ds(),Is(5,"app-control-volume"),Is(6,"app-time",5),Rs(7,"div",6),Rs(8,"app-control",7),Ps("click",function(){return e.onFullscreen()}),Ds(),Ds(),Ds(),Ds()),2&t&&(ti(1),Cs("max",e.duration)("value",e.currentProgress)("label",e.ariaLabel()),ti(2),Cs("icon",e.iconPlaying.value)("title",e.iconPlaying.name),ti(3),Cs("currentProgress",e.currentProgress)("duration",e.duration))},directives:[Ag,Rg,Dg,Ig],styles:[".video-controls[_ngcontent-%COMP%]{width:100%}.video-controls[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{height:1.5em;align-items:center;display:flex;justify-content:flex-start}.video-controls[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .full-screen[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end}"]}),t})();const Lg=["thumbContainer"],Pg=["toggleBar"],Mg=["input"],Fg=function(){return{enterDuration:150}},Ng=["*"],Ug=new Mr("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let Bg=0;const jg={provide:vg,useExisting:nt(()=>Kg),multi:!0};class Vg{constructor(t,e){this.source=t,this.checked=e}}class Gg{constructor(t){this._elementRef=t}}const Hg=Hp(Vp(Gp(jp(Gg))));let Kg=(()=>{class t extends Hg{constructor(t,e,r,n,i,s){super(t),this._focusMonitor=e,this._changeDetectorRef=r,this.defaults=i,this._animationMode=s,this._onChange=t=>{},this._onTouched=()=>{},this._uniqueId="mat-slide-toggle-"+ ++Bg,this._required=!1,this._checked=!1,this.name=null,this.id=this._uniqueId,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new So,this.toggleChange=new So,this.tabIndex=parseInt(n)||0,this.color=this.defaultColor=i.color||"accent"}get required(){return this._required}set required(t){this._required=ip(t)}get checked(){return this._checked}set checked(t){this._checked=ip(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?this._inputElement.nativeElement.focus():t||Promise.resolve().then(()=>this._onTouched())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onChangeEvent(t){t.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(t){t.stopPropagation()}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}focus(t,e){e?this._focusMonitor.focusVia(this._inputElement,e,t):this._inputElement.nativeElement.focus(t)}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(new Vg(this,this.checked))}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(xs(Ea),xs(Ep),xs(Wa),Lr("tabindex"),xs(Ug),xs(Mp,8))},t.\u0275cmp=Vt({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(t,e){if(1&t&&(Fo(Lg,5),Fo(Pg,5),Fo(Mg,5)),2&t){let t;Mo(t=Uo())&&(e._thumbEl=t.first),Mo(t=Uo())&&(e._thumbBarEl=t.first),Mo(t=Uo())&&(e._inputElement=t.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(t,e){2&t&&(ta("id",e.id),Ss("tabindex",e.disabled?null:-1)("aria-label",null)("aria-labelledby",null),Ks("mat-checked",e.checked)("mat-disabled",e.disabled)("mat-slide-toggle-label-before","before"==e.labelPosition)("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[ga([jg]),hs],ngContentSelectors:Ng,decls:16,vars:18,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(t,e){if(1&t&&(Bs(),Rs(0,"label",0,1),Rs(2,"div",2,3),Rs(4,"input",4,5),Ps("change",function(t){return e._onChangeEvent(t)})("click",function(t){return e._onInputClick(t)}),Ds(),Rs(6,"div",6,7),Is(8,"div",8),Rs(9,"div",9),Is(10,"div",10),Ds(),Ds(),Ds(),Rs(11,"span",11,12),Ps("cdkObserveContent",function(){return e._onLabelTextChange()}),Rs(13,"span",13),Xs(14,"\xa0"),Ds(),js(15),Ds(),Ds()),2&t){const t=ks(1),r=ks(12);Ss("for",e.inputId),ti(2),Ks("mat-slide-toggle-bar-no-side-margin",!r.textContent||!r.textContent.trim()),ti(2),Cs("id",e.inputId)("required",e.required)("tabIndex",e.tabIndex)("checked",e.checked)("disabled",e.disabled),Ss("name",e.name)("aria-checked",e.checked.toString())("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby),ti(5),Cs("matRippleTrigger",t)("matRippleDisabled",e.disableRipple||e.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",function(t,e,r){const n=Le()+17,i=Te();return i[n]===Jn?ws(i,n,e()):function(t,e){return t[e]}(i,n)}(0,Fg))}},directives:[tg,mp],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),t})(),$g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({}),t})(),zg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[$g,eg,Bp,vp],$g,Bp]}),t})();class qg{constructor(t){this.notifier=t}call(t,e){const r=new Wg(t),n=B(this.notifier,new N(r));return n&&!r.seenValue?(r.add(n),e.subscribe(r)):r}}class Wg extends U{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let Yg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[Bp],Bp]}),t})();const Xg=["*"],Zg=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],Qg=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"];class Jg{}const tm=jp(Gp(Jg));class em{}const rm=Gp(em),nm=new Mr("MatList"),im=new Mr("MatNavList");let sm=(()=>{class t extends tm{constructor(){super(...arguments),this._stateChanges=new S}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(){let e;return function(r){return(e||(n=t,e=St(()=>{const t=n.prototype.constructor,e=t[Ut]||Or(t),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const t=i[Ut]||Or(i);if(t&&t!==e)return t;i=Object.getPrototypeOf(i)}return t=>new t})))(r||t);var n}}(),t.\u0275cmp=Vt({type:t,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[ga([{provide:im,useExisting:t}]),hs,ie],ngContentSelectors:Xg,decls:1,vars:0,template:function(t,e){1&t&&(Bs(),js(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),t})(),am=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=qt({type:t,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),t})(),om=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=qt({type:t,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),t})(),lm=(()=>{class t extends rm{constructor(t,e,r,n){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new S,this._disabled=!1,this._isInteractiveList=!!(r||n&&"action-list"===n._getListType()),this._list=r||n;const i=this._getHostElement();var s;"button"!==i.nodeName.toLowerCase()||i.hasAttribute("type")||i.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((s=this._destroyed,t=>t.lift(new qg(s)))).subscribe(()=>{e.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=ip(t)}ngAfterContentInit(){!function(t,e,r="mat"){t.changes.pipe(bc(t)).subscribe(({length:t})=>{$p(e,`${r}-2-line`,!1),$p(e,`${r}-3-line`,!1),$p(e,`${r}-multi-line`,!1),2===t||3===t?$p(e,`${r}-${t}-line`,!0):t>3&&$p(e,`${r}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(xs(Ea),xs(Wa),xs(im,8),xs(nm,8))},t.\u0275cmp=Vt({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,e,r){if(1&t&&(No(r,am,5),No(r,om,5),No(r,Kp,5)),2&t){let t;Mo(t=Uo())&&(e._avatar=t.first),Mo(t=Uo())&&(e._icon=t.first),Mo(t=Uo())&&(e._lines=t)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(t,e){2&t&&Ks("mat-list-item-disabled",e.disabled)("mat-list-item-avatar",e._avatar||e._icon)("mat-list-item-with-avatar",e._avatar||e._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[hs],ngContentSelectors:Qg,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,e){1&t&&(Bs(Zg),Rs(0,"div",0),Is(1,"div",1),js(2),Rs(3,"div",2),js(4,1),Ds(),js(5,2),Ds()),2&t&&(ti(1),Cs("matRippleTrigger",e._getHostElement())("matRippleDisabled",e._isRippleDisabled()))},directives:[tg],encapsulation:2,changeDetection:0}),t})(),um=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t}),t.\u0275inj=dt({imports:[[zp,eg,Bp,rg,bu],zp,Bp,rg,Yg]}),t})();const cm=function(t){return{active:t}};function dm(t,e){if(1&t){const t=Te();Rs(0,"a",6),Ps("click",function(){const e=(r=t,Ee.lFrame.contextLView=r,r[8]).index;var r;return Ns().playIt(e)}),Rs(1,"i",7),Xs(2,"play_arrow"),Ds(),Xs(3),Ds()}if(2&t){const t=e.$implicit;Cs("ngClass",(r=2,n=cm,i=t.selected,function(t,e,r,n,i,s){const a=e+r;return Es(t,a,i)?ws(t,a+1,s?n.call(s,i):n(i)):function(t,e){const r=t[e];return r===Jn?void 0:r}(t,a+1)}(Te(),Le(),r,n,i,s))),ti(3),Qs(" ",t.name," ")}var r,n,i,s}let hm=(()=>{class t{constructor(t,e){this.videoService=t,this.videoPlaylistService=e,this.videoList=[],this.list=[],this.activeVideo=0}ngOnInit(){this.videoPlaylistService.list$.subscribe(t=>this.list=t),this.videoPlaylistService.currentVideo$.subscribe(t=>{this.videoList=this.list.map(e=>({name:e.title,selected:e.url===t}))}),this.videoPlaylistService.fetchList("./assets/playlist.json"),this.videoPlaylistService.shouldPlayNext$.subscribe(t=>this.playNext=t),this.videoService.videoEnded$.subscribe(t=>{this.playNext&&t&&(this.videoPlaylistService.playNextVideo(),this.videoService.play())})}playIt(t){this.videoPlaylistService.setCurrentVideoByIndex(t),this.videoService.play(),this.activeVideo=t}onChange(){this.playNext=!this.playNext,this.videoPlaylistService.setShouldPlayNext(this.playNext)}}return t.\u0275fac=function(e){return new(e||t)(xs(zf),xs(Yf))},t.\u0275cmp=Vt({type:t,selectors:[["app-video-list"]],decls:10,vars:2,consts:[[1,"video-list"],[1,"header"],[1,"title"],["aria-label","Enable autoplay",3,"checked","change"],[1,"list"],["mat-list-item","","class","list-item",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-list-item","",1,"list-item",3,"ngClass","click"],[1,"material-icons"]],template:function(t,e){1&t&&(Rs(0,"div",0),Rs(1,"div",1),Rs(2,"h2",2),Xs(3,"Next"),Ds(),Rs(4,"p"),Rs(5,"span"),Xs(6," Play next "),Ds(),Rs(7,"mat-slide-toggle",3),Ps("change",function(){return e.onChange()}),Ds(),Ds(),Ds(),Rs(8,"mat-nav-list",4),Ts(9,dm,4,4,"a",5),Ds(),Ds()),2&t&&(ti(7),Cs("checked",e.playNext),ti(2),Cs("ngForOf",e.videoList))},directives:[Kg,sm,du,lm,uu],styles:[".video-list[_ngcontent-%COMP%]{width:auto}.video-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.video-list[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0 1em 0 0}.video-list[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%], .video-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{width:100%}.video-list[_ngcontent-%COMP%]   .list-item.active[_ngcontent-%COMP%]{background-color:#ff98bb}"]}),t})(),fm=(()=>{class t{constructor(){this.title="video-player"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-root"]],decls:10,vars:0,consts:[[1,"container"],[1,"video-app"],[1,"video-player"],[1,"list"]],template:function(t,e){1&t&&(Rs(0,"div",0),Rs(1,"h1"),Xs(2,"HLS Video Player"),Ds(),Rs(3,"p"),Xs(4,"A responsive video player made in Angular 12, Typescript, HLS and Material UI"),Ds(),Rs(5,"div",1),Rs(6,"div",2),Is(7,"app-video-wrapper"),Is(8,"app-controls"),Ds(),Is(9,"app-video-list",3),Ds(),Ds())},directives:[mg,Og,hm],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:95vw;height:95vh;margin:2em 2em 0}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.container[_ngcontent-%COMP%]   .video-app[_ngcontent-%COMP%]{margin-top:1em;display:flex;width:95vw;height:95vh;justify-content:center;align-items:flex-start}.container[_ngcontent-%COMP%]   .video-app[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{width:60vw;background-color:#fff;display:flex;flex-direction:column;justify-content:center}.container[_ngcontent-%COMP%]   .video-app[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin-left:1.5em;flex:1}@media (max-width:800px){.container[_ngcontent-%COMP%]   .video-app[_ngcontent-%COMP%]{flex-direction:column}.container[_ngcontent-%COMP%]   .video-app[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{width:90%}.container[_ngcontent-%COMP%]   .video-app[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{margin:2em 0 0;width:90%}}"]}),t})(),pm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=$t({type:t,bootstrap:[fm]}),t.\u0275inj=dt({providers:[],imports:[[Ju,Kf,zg,fg,Cg,um]]}),t})();(function(){if(El)throw new Error("Cannot enable prod mode after platform setup.");wl=!1})(),Zu().bootstrapModule(pm).catch(t=>console.error(t))}},function(t){"use strict";t(t.s=5185)}]);